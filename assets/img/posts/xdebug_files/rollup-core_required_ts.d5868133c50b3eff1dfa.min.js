webpackJsonp([25,260,273],{10029:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("emoji",{onStart:function e(){TS.web&&TS.web.login_sig.add(TS.emoji.onLogin);TS.client&&TS.client.login_sig.add(TS.emoji.onLogin);TS.prefs.jumbomoji_changed_sig.add(v);if(TS.boot_data.feature_emoji5){T();b.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)})}var n=true;w=TS.utility.throttleFunc(w,3e3,n);window._&&(x=_.debounce(x,3e3,{leading:false,trailing:n}))},onLogin:function e(){v()},isValidName:function n(a){if(!a)return false;a=TS.emoji.stripWrappingColons(a).toLowerCase();if("undefined"===typeof e[a])return false;return a},isEmojiNameSafe:function e(n){var a=_.get(p,"rx_colons.source");var t=new RegExp("^"+a+"$");var o=":"+n+":";return t.test(o)},substringMatchesName:function e(n,a){if(!n||!a||!_.isString(n)||!_.isString(a))return false;if("::"===a)return false;var t=":"===a.charAt(0);var o=":"===a.slice(-1);a=TS.emoji.stripWrappingColons(a.toLowerCase());if(!a)return true;if(t&&o)return a===n;if(t)return n.slice(0,a.length)===a;if(o)return n.slice(-1*a.length)===a;var r=-1!==n.indexOf(a);if(r)return true;return false},emojiMatchesTerm:function e(n,a,t){if(!n||!a)return false;var o=TS.emoji.nameToBaseName(n.display_name||n.name);o=TS.interop.i18n.deburr(o);a=TS.emoji.normalizeSearchTerm(a);if(TS.emoji.substringMatchesName(o,a))return true;var r=TS.interop.i18n.deburr(n.display_names||n.names);n.display_names&&n.display_names!==n.names&&(r+=" "+n.names);var i=r.split(" ");for(var s=0;s<i.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[s]),a))return true;return-1!==_.indexOf(t,o)},normalizeSearchTerm:function e(n){if(!n||!_.isString(n))return;n=n.toLowerCase();n=TS.interop.i18n.deburr(n);n=n.replace(/['\u02bc\u2019]/g,"'");return n},nameToBaseName:function e(n){if(!_.isString(n))return"";n=TS.emoji.stripLocalizedSkinTone(n);n=TS.emoji.stripWrappingColons(n);return n},stripLocalizedSkinTone:function e(n){var a=/::skin-tone-[2-6]:/g;n=n.replace(a,":");if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var t=TS.emoji.getLocalSkinToneName();a=new RegExp("::"+t+"-[2-6]:","g")}n=n.replace(a,":");return n},stripWrappingColons:function e(n){if(!n)return"";n="string"===typeof n?n:""+n;if(":"===n[0]){if(":"===n[n.length-1])return n.slice(1,n.length-1);return n.slice(1,n.length)}if(":"===n[n.length-1])return n.slice(0,n.length-1);return n},nameToCanonicalName:function e(n){n=TS.emoji.stripWrappingColons(n);if(!n)return"";n=String(n).toLowerCase();var a=function(){var e=n.split("::");if(2!=e.length)return"";n=e[0];return"::"+e[1]}();return(m()[n]||n)+a},emojiHasAliases:function e(n){return-1!==n.names.indexOf(" ")},addCustomEmoji:function e(n,a,t){j(n,a,t)},removeCustomEmoji:function e(n,a){var t;j(n,t,a)},renameCustomEmoji:function e(n,a,t,o){TS.emoji.removeCustomEmoji(n,o);TS.emoji.addCustomEmoji(a,t,o)},ingestCustoms:function e(n){TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};r={};var t;var o;var i=[];_.forOwn(p.data,function(e){i.push.apply(i,e[3])});function s(e){return p.map.colons.hasOwnProperty(e)||i.indexOf(e)>=0}function l(e){var n=TS.emoji.maybeGetCanonicalEmojiName(e);return n!==e}_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":a(e))){TS.model.emoji_complex_customs[n]=e;p.data[n]=[[],null,null,[n],null,null,null,e.apple];p.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}else{if(0===e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(n)){TS.error("can't ingest custom emoji :"+n+": because it's invalid");return}p.data[n]=[[],null,null,[n],null,null,null,e];p.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}});_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":a(e))||0!==e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}if(!TS.emoji.isEmojiNameSafe(n)){TS.error("can't ingest custom emoji :"+n+": because it's invalid");return}t=e.replace("alias:","");o=p.data.hasOwnProperty(t)&&p.data[t];if(o){o[3].push(n);p.map.colons[n]=t;return}t=p.map.colons.hasOwnProperty(t)&&p.map.colons[t];o=p.data.hasOwnProperty(t)&&p.data[t];if(o){o[3].push(n);p.map.colons[n]=t;return}TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.warn('alias for "'+n+'":"'+e+'" not recognized')});TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.forOwn(n,function(e,n){l(n)&&(r[n]=true)});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(p&&p.inits){delete p.inits.emoticons;p.init_emoticons()}u=f()},bootEmoji:function e(){var n=function e(n){o.then(n)};if(o)return new Promise(n);o=TS.emoji.setUpEmoji().finally(function(){o=null});return new Promise(n)},setUpEmoji:function e(){return new Promise(function(e){if(!p){TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji, there was nothing to do");return e()}var n=function n(){p.buildKeywordIndex();k();TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji");e()};y();if(!TS.boot_data.page_needs_custom_emoji)return n();if(!TS.boot_data.page_needs_custom_emoji_fresh){var a=TS.storage.fetchCustomEmoji();"calls"!==TS.boot_data.app||TS.model.emoji_cache_ts||(TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts"));if(a&&TS.model.emoji_cache_ts==a.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(a.data);return n()}}TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var t=function e(a,t){if(!a||!t.emoji)return n();TS.model.emoji_cache_ts=t.cache_ts;TS.storage.storeCustomEmoji({data:t.emoji,cache_ts:TS.model.emoji_cache_ts});TS.emoji.ingestCustoms(t.emoji);n()};TS.api.call("emoji.list",{include_complex_values:1}).then(function(e){var n=e.data,a=e.args,o=e.request_id;var r=true;t(r,n,a,o);return{data:n,args:a,request_id:o}}).catch(function(e){var n=e.data,a=e.args,o=e.request_id;var r=false;t(r,n,a,o);return{data:n,args:a,request_id:o}})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");w()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_emoji_picker_frecently_used)return;var a=c();TS.utility.areSimpleObjectsEqual(a,n,"maybemakeMenuLists")||d(a)},replaceFrecentlyUsed:function e(){if(!TS.boot_data.feature_emoji_picker_frecently_used)return;var n=B();if(!n.length)return;if(!_.isEqual(n,t)){d(n);t=n}},makeMenuLists:function a(){TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var t=_.cloneDeep(b);var o=E();o&&o.length&&t.push({display_name:TS.interop.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:o});n=c();t.unshift({name:"mine",display_name:TS.interop.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:n});var i;var s;var l=[];for(i=0;i<t.length;i+=1)l=l.concat(t[i].emoji_names);var d={};Object.keys(p.data).forEach(function(n){var a=p.data[n][3];var t=TS.emoji.isIdxSkinToneModifiable(n);a.forEach(function(a,o,r){var i=a;var s=_.compact(r);s.length!==r.length&&TS.error('Emoji "'+a+'" contains bad record(s) in "names" prop');TS.model.emoji_names.push(a);e[a]=true;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){i=TS.emoji.maybeGetLocalizedEmojiName(a);s=r.map(function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)})}d[a]={html:TS.emoji.graphicReplace(":"+a+":"),name:":"+a+":",names:":"+r.join(": :")+":",display_name:":"+i+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+n+(o>0?"_alias_"+o:""),name:a,name_with_colons:":"+a+":",display_name:i,is_skin:t,is_emoji:true});if(t){d[a].is_skin=true;d[a].skin_tone_id="1";p.skin_tones.forEach(function(t){if(!g(n,t))return;var o=p.data[t];var l=o[3][0];var _=a+"::"+l;TS.model.emoji_names.push(_);e[_]=true;var c=":"+_+":";var u=r.map(function(e){return e+"::"+l});var m=c;var f=u;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var h=TS.emoji.maybeGetLocalizedEmojiName(l);m=":"+i+"::"+h+":";f=s.map(function(e){return e+"::"+h})}d[_]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(c),name:c,names:":"+u.join(": :")+":",display_name:m,display_names:":"+f.join(": :")+":"}})}})});S=d;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");for(i=0;i<l.length;i+=1){var u=l[i];d[u]||TS.info(u+" not in cat_map?")}var m;var f;var h;var T;for(i=0;i<t.length;i+=1){m=t[i];f=[];h=null;T="";m.tab_icon_html&&(T=m.tab_icon_html);for(s=0;s<m.emoji_names.length;s+=1){h=d[m.emoji_names[s]];f.push(h);if(T)continue;m.emoji_names[s]==m.name&&(T=h.html)}h=f[0];TS.model.emoji_groups.push({name:m.name,display_name:m.display_name,tab_html:T||h.html,tab_icon:m.tab_icon,tab_icon_name:m.tab_icon_name,items:f})}var w=TS.emoji.getCurrentSheetUrl();if(C("ss_emojis")&&w){var v=new Image;v.onload=function(){v.onload=null;v.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";v=null};v.src=w}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var k=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[k]="ok";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(r,function(e,n){_.remove(TS.model.emoji_map,{name:n})});var j=function e(n){var a=TS.model.emoji_names.concat();["skin-tone-2","skin-tone-3","skin-tone-4","skin-tone-5","skin-tone-6"].forEach(function(e){_.pull(a,e)});n.forEach(function(e){e.emoji_names.forEach(function(e){_.pull(a,e);var n=p.map.colons[e];var t=p.data[n];t&&t[3].forEach(function(e){[e,e+"::skin-tone-2",e+"::skin-tone-3",e+"::skin-tone-4",e+"::skin-tone-5",e+"::skin-tone-6"].forEach(function(e){_.pull(a,e)})})})});TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(r,function(e,n){_.pull(a,n)});a.length&&TS.error("testGroupings() expected these emoji names to be in a category, but they were not found! "+a.join(","))};"dev"===TS.boot_data.version_ts&&j(t)},friendlyReorder:function e(){var n=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];n.forEach(function(e){var n=_.reduce(TS.model.emoji_names,function(n,a,t){if(0===a.indexOf(e.filter)){var o=TS.model.all_custom_emoji.indexOf(a)>-1;var r=!o&&0===a.indexOf(e.first);var i=!o&&!r&&0===a.indexOf(e.second);n.emoji.push({name:a,is_first:r,is_second:i});n.indexes.push(t)}return n},{indexes:[],emoji:[]});n.emoji=_.orderBy(n.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(n.emoji,function(e,a){var t=n.indexes[a];TS.model.emoji_names[t]=e.name})})},isIdxSkinToneModifiable:function e(n){return g(n,p.skin_tones[0])},isNameSkinToneModifiable:function e(n){n=TS.emoji.stripWrappingColons(n);n=String(n).toLowerCase();var a=p.map.colons[n];return TS.emoji.isIdxSkinToneModifiable(a)},graphicReplace:function e(n,a){if(!n)return"";a=a||{};var t=TS.emoji.shouldRenderEmoji5(n)?TS.emoji.getEmojiConvertor5():p;if(a.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(n))return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+n.replace(/:/g,"")+'"></ts-icon>';t.init_env();var o=t.text_mode;var r=t.include_title;var i=t.include_text;var s=t.supports_css;var l=t.allow_skin_tone_squares;if(a.force_img&&a.obey_emoji_mode_pref){a.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(a.force_style&&a.obey_emoji_mode_pref){a.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+a.force_style)}t.text_mode=a.obey_emoji_mode_pref&&TS.interop.rules.emoji.shouldRenderEmojiAsText();if(a.force_style){TS.emoji.setEmojiMode(a.force_style);t.use_sheet=false}t.include_title=!!a.include_title;t.include_text=!!a.include_text;t.supports_css=!a.force_img;t.allow_skin_tone_squares=!a.no_skin_tone_squares;var _=t.replace_colons(n,{stop_animations:a.stop_animations});a.jumbomoji&&(_=_.replace("emoji-sizer","emoji-sizer emoji-only"));a.force_style&&TS.emoji.setEmojiMode();t.text_mode=o;t.include_title=r;t.include_text=i;t.supports_css=s;t.allow_skin_tone_squares=l;return _},replaceColons:function e(n){if(n.indexOf(":")<0)return n;return p.replace_colons(n)},maybeUnifiedReplace:function e(n){if("unified"!==p.replace_mode)return n;return p.replace_colons_with_unified(n)},replaceEmoticons:function e(n){return p.replace_emoticons_with_colons(n)},eachEmoticon:function e(n,a){n.replace(p.rx_emoticons,a)},getLocalSkinToneName:function e(){var n="skin-tone";TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n=TSFEmoji.getLocalSkinToneName(TS.interop.i18n.locale));return n},getChosenSkinTone:function e(n){var a=parseInt(C("preferred_skin_tone"),10);if(!a||"1"==a||!_.includes([2,3,4,5,6],a))return"";var t=n?TS.emoji.getLocalSkinToneName():"skin-tone";return t+"-"+a},getChosenSkinToneModifier:function e(n){var a=TS.emoji.getChosenSkinTone(n);if(!a)return"";return":"+a+":"},setEmojiMode:function e(n){var a=["google","emojione","twitter","apple"];n=n||TS.interop.rules.emoji.getEmojiMode();p.text_mode="as_text"===n;p.do_emoticons=!!C("graphic_emoticons");p.allow_native=false;p.use_sheet=function(){if(!C("ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();var t=n;TS.boot_data.feature_emoji5&&"as_text"==n&&(t=TS.interop.rules.emoji.getEmojiMode({forceDisplay:true}));p.img_set=_.includes(a,t)?t:"apple";if(!TS.model.emoji_complex_customs)return;for(var o in TS.model.emoji_complex_customs){if(!p.data[o])continue;p.data[o][7]=TS.model.emoji_complex_customs[o][p.img_set]}},getColonsRx:function e(){return p.rx_colons},getEmoticonsRx:function e(){return p.rx_emoticons},getEmojiByName:function e(n){if(!n)return;return _.find(TS.model.emoji_map,{name:n})},getEmojiById:function e(n){var a=_.find(TS.model.emoji_map,{id:n});if(!a){TS.warn("no emoji ob found for "+n);return}return a},getEmojiMap:function e(){return TS.model.emoji_map},getEmoticonMap:function e(){return p.emoticons_data},getEmojiForSpaces:function e(){var n={emoticonEmojiNames:p.emoticons_data,emoji:{},sheetSize:p.sheet_size,sheetPath:TS.emoji.getCurrentSheetUrl(),replace:function e(){var n=p.colons_mode;p.colons_mode=true;var a=p.replace_unified.apply(p,arguments);TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(a=TS.emoji.maybeGetCanonicalEmojiString(a));p.colons_mode=n;return a}};TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n.getLocalEmojiString=function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)||e});Object.keys(p.data).forEach(function(e){var a=p.data[e];var t=a[3];var o=a[4];var r=a[5];var i=a[7];var s;if(null!==o&&null!==r)s=[o,r];else{if(!i){TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}s=false===C("a11y_animations")?TS.utility.getImgProxyURLWithOptions(i,{emoji:true}):i}t.forEach(function(e){n.emoji[e]=s})});return n},getCurrentSheetUrl:function e(){return p.img_sets[p.img_set].sheet},getCurrentImagePath:function e(){return p.img_sets[p.img_set].path},hasUnifiedEmoji:function e(n){p.init_unified();return-1!==n.search(p.rx_unified)},test:function e(){return{emoji:p,isEmojiFromEmoji5:M,getEmojiConvertor:function e(){return p},setEmojiConvertor:function e(n){p=n}}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(n){var a=0;n.concat().forEach(function(e,t){var o=p.map.colons[e];var r=p.data.hasOwnProperty(o)&&p.data[o];if(!r)return;p.skin_tones.forEach(function(r){if(!g(o,r))return;var i=p.data[r];var s=i[3][0];var l=e+"::"+s;if(-1!==n.indexOf(l))return;a+=1;var _=a+t;n.splice(_,0,l)})})},findByKeyword:function e(n){return p.findByKeyword(n)},getObsoletedEmojiNameFromModernEmojiName:function e(n){if(!TS.boot_data.feature_emoji5)return null;if(!n)return null;var a=TS.emoji.stripWrappingColons(n);var t=/(::skin-tone-[2-6])/;var o=a.match(t);var r=o?o[1]:"";var i=a.replace(t,"");var s=p.map.colons[i];if(!s)return null;var l=p.obsoletes_data[s];var _=l&&l[4]&&l[4][0];if(_&&_!=i)return _+r;return null},maybeGetCanonicalEmojiString:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToCanonical(n,TS.interop.i18n.locale,{include_emoji_5:TS.boot_data.feature_emoji5});return n},maybeGetLocalizedEmojiString:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToLocal(n,TS.interop.i18n.locale,{include_emoji_5:TS.boot_data.feature_emoji5});return n},maybeGetLocalizedEmojiName:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE)return TSFEmoji.getLocalEmojiString(n,TS.interop.i18n.locale,{include_emoji_5:TS.boot_data.feature_emoji5});return n},maybeGetCanonicalEmojiName:function e(n){if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE)return TSFEmoji.getCanonicalEmojiString(n,TS.interop.i18n.locale,{include_emoji_5:TS.boot_data.feature_emoji5});return n},getEmojiConvertor5:function e(){var n=true;h||(h=window.getMonkeyPatchedEmojiConvertor(n));h.img_set="google"===TS.prefs.getPref("emoji_mode")?"google":"apple";return h},shouldRenderEmoji5:function e(n){if(!TS.boot_data.feature_emoji5_dark_launch)return false;if(!n)return false;if(TS.boot_data.feature_emoji5)return false;if(!M(n))return false;return true},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/ecf3e/img/emoji_missing.png);"></span>'});var e={};var n;var t;var o;var r={};var i="E";var s=36;var l=50;var c=function e(){var n;var a={};_.each(_.keys(TS.model.emoji_use),function(e){n=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&O(n))return;a.hasOwnProperty(n)||(a[n]=0);a[n]+=TS.model.emoji_use[e]});TS.dir(777,a,"condensed emoji names:");var t=Object.keys(a).sort(function(e,n){var t=a[e];var o=a[n];if(t==o){if(e<n)return-1;if(e>n)return 1}return-(t-o)});t.length=Math.min(t.length,4*TS.model.emoji_menu_columns);var o=["slightly_smiling_face","heart","+1","100","bug"];var r;while(t.length<5&&o.length){r=o.shift();-1===t.indexOf(r)&&t.push(r)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(t);return t};var d=function e(a){n=a;var t=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});t||TS.emoji.makeMenuLists();var o=[];n.forEach(function(e){var n=S[e];n&&o.push(n)});t.items=o};var u;var m=function e(){u=u||f();return u};var f=function e(){var n={};var a;Object.keys(p.data).forEach(function(e){a=p.data[e];n[a[3][0]]=null;a[3].forEach(function(e){if(n.hasOwnProperty(e))return;n[e]=a[3][0]})});return n};var g=function e(n,a){if(TS.boot_data.feature_emoji5)return!!(p.variations_data[n]&&p.variations_data[n][a]);return!!p.variations_data[n+"-"+a]};var p=emoji;var h;var S={};var b=[{name:"people",display_name:TS.interop.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grimacing","grin","joy","smiley","smile","sweat_smile","laughing","innocent","wink","blush","slightly_smiling_face","upside_down_face","relaxed","yum","relieved","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","stuck_out_tongue","money_mouth_face","nerd_face","sunglasses","hugging_face","smirk","no_mouth","neutral_face","expressionless","unamused","face_with_rolling_eyes","thinking_face","flushed","disappointed","worried","angry","rage","pensive","confused","slightly_frowning_face","white_frowning_face","persevere","confounded","tired_face","weary","triumph","open_mouth","scream","fearful","cold_sweat","hushed","frowning","anguished","cry","disappointed_relieved","sleepy","sweat","sob","dizzy_face","astonished","zipper_mouth_face","mask","face_with_thermometer","face_with_head_bandage","sleeping","zzz","hankey","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","ghost","alien","robot_face","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","raised_hands","clap","wave","+1","-1","facepunch","fist","v","ok_hand","hand","open_hands","muscle","pray","point_up","point_up_2","point_down","point_left","point_right","middle_finger","raised_hand_with_fingers_splayed","the_horns","spock-hand","writing_hand","nail_care","lips","tongue","ear","nose","eye","eyes","bust_in_silhouette","busts_in_silhouette","speaking_head_in_silhouette","baby","boy","girl","man","woman","person_with_blond_hair","older_man","older_woman","man_with_gua_pi_mao","man_with_turban","cop","construction_worker","guardsman","sleuth_or_spy","santa","angel","princess","bride_with_veil","walking","runner","dancer","dancers","couple","two_men_holding_hands","two_women_holding_hands","bow","information_desk_person","no_good","ok_woman","raising_hand","person_with_pouting_face","person_frowning","haircut","massage","couple_with_heart","woman-heart-woman","man-heart-man","couplekiss","woman-kiss-woman","man-kiss-man","family","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","womans_clothes","shirt","jeans","necktie","dress","bikini","kimono","lipstick","kiss","footprints","high_heel","sandal","boot","mans_shoe","athletic_shoe","womans_hat","tophat","helmet_with_white_cross","mortar_board","crown","school_satchel","pouch","purse","handbag","briefcase","eyeglasses","dark_sunglasses","ring","closed_umbrella"]},{name:"nature",display_name:TS.interop.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["dog","cat","mouse","hamster","rabbit","bear","panda_face","koala","tiger","lion_face","cow","pig","pig_nose","frog","octopus","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","wolf","boar","horse","unicorn_face","bee","bug","snail","beetle","ant","spider","scorpion","crab","snake","turtle","tropical_fish","fish","blowfish","dolphin","whale","whale2","crocodile","leopard","tiger2","water_buffalo","ox","cow2","dromedary_camel","camel","elephant","goat","ram","sheep","racehorse","pig2","rat","mouse2","rooster","turkey","dove_of_peace","dog2","poodle","cat2","rabbit2","chipmunk","feet","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","ear_of_rice","hibiscus","sunflower","rose","tulip","blossom","cherry_blossom","bouquet","mushroom","chestnut","jack_o_lantern","shell","spider_web","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","moon","new_moon_with_face","full_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","sun_with_face","crescent_moon","star","star2","dizzy","sparkles","comet","sunny","mostly_sunny","partly_sunny","barely_sunny","partly_sunny_rain","cloud","rain_cloud","thunder_cloud_and_rain","lightning","zap","fire","boom","snowflake","snow_cloud","snowman_without_snow","snowman","wind_blowing_face","dash","tornado","fog","umbrella","umbrella_with_rain_drops","droplet","sweat_drops","ocean"]},{name:"food_and_drink",display_name:TS.interop.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","pineapple","tomato","eggplant","hot_pepper","corn","sweet_potato","honey_pot","bread","cheese_wedge","poultry_leg","meat_on_bone","fried_shrimp","egg","hamburger","fries","hotdog","pizza","spaghetti","taco","burrito","ramen","stew","fish_cake","sushi","bento","curry","rice_ball","rice","rice_cracker","oden","dango","shaved_ice","ice_cream","icecream","cake","birthday","custard","candy","lollipop","chocolate_bar","popcorn","doughnut","cookie","beer","beers","wine_glass","cocktail","tropical_drink","champagne","sake","tea","coffee","baby_bottle","fork_and_knife","knife_fork_plate"]},{name:"activity",display_name:TS.interop.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["soccer","basketball","football","baseball","tennis","volleyball","rugby_football","8ball","golf","golfer","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","ice_hockey_stick_and_puck","field_hockey_stick_and_ball","cricket_bat_and_ball","ski","skier","snowboarder","ice_skate","bow_and_arrow","fishing_pole_and_fish","rowboat","swimmer","surfer","bath","person_with_ball","weight_lifter","bicyclist","mountain_bicyclist","horse_racing","man_in_business_suit_levitating","trophy","running_shirt_with_sash","sports_medal","medal","reminder_ribbon","rosette","ticket","admission_tickets","performing_arts","art","circus_tent","microphone","headphones","musical_score","musical_keyboard","saxophone","trumpet","guitar","violin","clapper","video_game","space_invader","dart","game_die","slot_machine","bowling"]},{name:"travel_and_places",display_name:TS.interop.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","racing_motorcycle","bike","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","monorail","bullettrain_side","bullettrain_front","light_rail","mountain_railway","steam_locomotive","train2","metro","tram","station","helicopter","small_airplane","airplane","airplane_departure","airplane_arriving","boat","motor_boat","speedboat","ferry","passenger_ship","rocket","satellite","seat","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","checkered_flag","ship","ferris_wheel","roller_coaster","carousel_horse","building_construction","foggy","tokyo_tower","factory","fountain","rice_scene","mountain","snow_capped_mountain","mount_fuji","volcano","japan","camping","tent","national_park","motorway","railway_track","sunrise","sunrise_over_mountains","desert","beach_with_umbrella","desert_island","city_sunrise","city_sunset","cityscape","night_with_stars","bridge_at_night","milky_way","stars","sparkler","fireworks","rainbow","house_buildings","european_castle","japanese_castle","stadium","statue_of_liberty","house","house_with_garden","derelict_house_building","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine"]},{name:"objects",display_name:TS.interop.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["watch","iphone","calling","computer","keyboard","desktop_computer","printer","three_button_mouse","trackball","joystick","compression","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_with_flash","video_camera","movie_camera","film_projector","film_frames","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass_flowing_sand","hourglass","satellite_antenna","battery","electric_plug","bulb","flashlight","candle","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","scales","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","chains","gun","bomb","hocho","dagger_knife","crossed_swords","shield","smoking","skull_and_crossbones","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","barber","alembic","telescope","microscope","hole","pill","syringe","thermometer","label","bookmark","toilet","shower","bathtub","key","old_key","couch_and_lamp","sleeping_accommodation","bed","door","bellhop_bell","frame_with_picture","world_map","umbrella_on_ground","moyai","shopping_bags","balloon","flags","ribbon","gift","confetti_ball","tada","dolls","wind_chime","crossed_flags","izakaya_lantern","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","postbox","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","package","postal_horn","inbox_tray","outbox_tray","scroll","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","page_facing_up","date","calendar","spiral_calendar_pad","card_index","card_file_box","ballot_box_with_ballot","file_cabinet","clipboard","spiral_note_pad","file_folder","open_file_folder","card_index_dividers","rolled_up_newspaper","newspaper","notebook","closed_book","green_book","blue_book","orange_book","notebook_with_decorative_cover","ledger","books","book","link","paperclip","linked_paperclips","scissors","triangular_ruler","straight_ruler","pushpin","round_pushpin","triangular_flag_on_post","waving_white_flag","waving_black_flag","closed_lock_with_key","lock","unlock","lock_with_ink_pen","lower_left_ballpoint_pen","lower_left_fountain_pen","black_nib","memo","pencil2","lower_left_crayon","lower_left_paintbrush","mag","mag_right"]},{name:"symbols",display_name:TS.interop.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["heart","yellow_heart","green_heart","blue_heart","purple_heart","broken_heart","heavy_heart_exclamation_mark_ornament","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om_symbol","wheel_of_dharma","star_of_david","six_pointed_star","menorah_with_nine_branches","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","u7a7a","u5272","radioactive_sign","biohazard_sign","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","accept","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u7981","a","b","ab","cl","o2","sos","no_entry","name_badge","no_entry_sign","x","o","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","100","low_brightness","high_brightness","trident","fleur_de_lis","part_alternation_mark","warning","children_crossing","beginner","recycle","u6307","chart","sparkle","eight_spoked_asterisk","eject","negative_squared_cross_mark","white_check_mark","diamond_shape_with_a_dot_inside","cyclone","loop","globe_with_meridians","m","atm","sa","passport_control","customs","baggage_claim","left_luggage","wheelchair","no_smoking","wc","parking","potable_water","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","keycap_star","1234","arrow_forward","double_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","black_square_for_stop","black_circle_for_record","black_right_pointing_double_triangle_with_vertical_bar","black_left_pointing_double_triangle_with_vertical_bar","fast_forward","rewind","twisted_rightwards_arrows","repeat","repeat_one","arrow_backward","arrow_up_small","arrow_down_small","arrow_double_up","arrow_double_down","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrows_counterclockwise","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","hash","information_source","abc","abcd","capital_abcd","symbols","musical_note","notes","wavy_dash","curly_loop","heavy_check_mark","arrows_clockwise","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","heavy_dollar_sign","currency_exchange","copyright","registered","tm","end","back","on","top","soon","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","small_red_triangle","black_small_square","white_small_square","black_large_square","white_large_square","small_red_triangle_down","black_medium_square","white_medium_square","black_medium_small_square","white_medium_small_square","black_square_button","white_square_button","speaker","sound","loud_sound","mute","mega","loudspeaker","bell","no_bell","black_joker","mahjong","spades","clubs","hearts","diamonds","flower_playing_cards","thought_balloon","right_anger_bubble","speech_balloon","left_speech_bubble","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230"]},{name:"flags",display_name:TS.interop.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","flag-es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-fr","flag-ga","flag-gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-it","flag-je","flag-jm","flag-jo","flag-jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw"]}];TS.boot_data.feature_emoji5||b.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});var T=function e(){_.find(b,{name:"people"}).emoji_names=["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"];_.find(b,{name:"nature"}).emoji_names=["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"];_.find(b,{name:"food_and_drink"}).emoji_names=["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"];_.find(b,{name:"activity"}).emoji_names=["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"];_.find(b,{name:"travel_and_places"}).emoji_names=["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"];_.find(b,{name:"objects"}).emoji_names=["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"];_.find(b,{name:"symbols"}).emoji_names=["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"];_.find(b,{name:"flags"}).emoji_names=["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]};var w=function e(){TS.emoji.setUpEmoji()};var v=function e(){if(TS.client&&TS.model.ms_logged_in_once){TS.client.msg_pane.rebuildMsgsWithReason("_toggleJumbomoji");TS.view.rebuildMentions();TS.view.rebuildStars();TS.model.previewed_file_id&&TS.client.ui.files.rebuildFilePreview()}};var y=function e(){if(p.unaltered_data){p.data=JSON.parse(JSON.stringify(p.unaltered_data));p.inits={}}p.ts_init_colons()};var k=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();var n=!!TS.model.ms_logged_in_once;var a=true;TS.client&&n&&TS.client.ui.rebuildAll(a);TS.redux&&TS.interop&&TS.interop.redux&&TS.redux.dispatch(TS.interop.redux.features.customEmoji.updateCustomEmoji())};var j=function e(n,a,t){if(!p)return;var o=TS.storage.fetchCustomEmoji();if(!o){TS.logError("error_updating_emoji","Attempting to update custom emoji, but no custom emoji data is in local storage");return}if("undefined"===typeof a){delete TS.model.emoji_use[n];if(!o.data.hasOwnProperty(n))return;delete o.data[n];_.remove(TS.model.emoji_map,{name:n})}else o.data[n]=a;TS.model.emoji_cache_ts=t;TS.storage.storeCustomEmoji({data:o.data,cache_ts:TS.model.emoji_cache_ts});x(o.data)};var x=function e(n){y();TS.emoji.ingestCustoms(n);k()};var E=function e(){var n=TS.model.all_custom_emoji;TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(n=A(n));return n};var O=function e(n){return!!r[n]};var C=function e(n){return TS.prefs&&TS.prefs.getPref(n)};var A=function e(n){return _.filter(n,function(e){return!O(e)})};var B=function e(){var n=TS.ui.frecency.getMostCommonWithPrefix(i,l);n=_.map(n,"id");if(!n.length)return[];var a=TS.emoji.getChosenSkinTone(true);var t=_.keyBy(TS.model.emoji_map,"id");var o=[];return _.chain(n).map(function(e){var n=t[e];if(!n)return null;var r=n.display_name;a&&n.is_skin&&(r=r+"::"+a);var i=S[r];if(!i)return null;if(TS.emoji.emojiHasAliases(i)){var s=i.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(o,c))return null}}o.push(r);return r}).compact().take(s).value()};var M=function e(n){if(!n)return false;if(TS.emoji.isValidName(n))return false;var a=TS.emoji.stripWrappingColons(n).replace(/(::skin-tone-[2-6])/,"").toLowerCase();return _.includes(L,a)};var L=["flag-un","fried_egg","cooking","woman-running","man-running","woman-surfing","man-surfing","woman-swimming","man-swimming","woman-lifting-weights","man-lifting-weights","woman-golfing","man-golfing","rainbow-flag","flag-england","flag-scotland","flag-wales","eye-in-speech-bubble","male-farmer","male-cook","male-student","male-singer","male-artist","male-teacher","male-factory-worker","man-boy-boy","man-boy","man-girl-boy","man-girl-girl","man-girl","male-technologist","male-office-worker","male-mechanic","male-scientist","male-astronaut","male-firefighter","male-doctor","male-judge","male-pilot","female-farmer","female-cook","female-student","female-singer","female-artist","female-teacher","female-factory-worker","woman-boy-boy","woman-boy","woman-girl-boy","woman-girl-girl","woman-girl","female-technologist","female-office-worker","female-mechanic","female-scientist","female-astronaut","female-firefighter","female-doctor","female-judge","female-pilot","woman-heart-man","woman-kiss-man","female-police-officer","male-police-officer","woman-with-bunny-ears-partying","man-with-bunny-ears-partying","blond-haired-woman","blond-haired-man","woman-wearing-turban","man-wearing-turban","female-construction-worker","male-construction-worker","woman-tipping-hand","man-tipping-hand","female-guard","male-guard","woman-getting-massage","man-getting-massage","woman-getting-haircut","man-getting-haircut","female-detective","male-detective","man_dancing","black_heart","woman-gesturing-no","man-gesturing-no","woman-gesturing-ok","man-gesturing-ok","woman-bowing","man-bowing","woman-raising-hand","man-raising-hand","woman-frowning","man-frowning","woman-pouting","man-pouting","woman-rowing-boat","man-rowing-boat","woman-biking","man-biking","woman-mountain-biking","man-mountain-biking","woman-walking","man-walking","octagonal_sign","shopping_trolley","scooter","motor_scooter","canoe","sled","flying_saucer","call_me_hand","raised_back_of_hand","left-facing_fist","right-facing_fist","handshake","crossed_fingers","hand_with_index_and_middle_fingers_crossed","i_love_you_hand_sign","face_with_cowboy_hat","clown_face","nauseated_face","rolling_on_the_floor_laughing","drooling_face","lying_face","woman-facepalming","man-facepalming","face_palm","sneezing_face","face_with_raised_eyebrow","face_with_one_eyebrow_raised","star-struck","grinning_face_with_star_eyes","zany_face","grinning_face_with_one_large_and_one_small_eye","shushing_face","face_with_finger_covering_closed_lips","face_with_symbols_on_mouth","serious_face_with_symbols_covering_mouth","face_with_hand_over_mouth","smiling_face_with_smiling_eyes_and_hand_covering_mouth","face_vomiting","face_with_open_mouth_vomiting","exploding_head","shocked_face_with_exploding_head","pregnant_woman","breast-feeding","palms_up_together","selfie","prince","man_in_tuxedo","mrs_claus","mother_christmas","woman-shrugging","man-shrugging","shrug","woman-cartwheeling","man-cartwheeling","person_doing_cartwheel","woman-juggling","man-juggling","juggling","fencer","woman-wrestling","man-wrestling","wrestlers","woman-playing-water-polo","man-playing-water-polo","water_polo","woman-playing-handball","man-playing-handball","handball","wilted_flower","drum_with_drumsticks","clinking_glasses","tumbler_glass","spoon","goal_net","first_place_medal","second_place_medal","third_place_medal","boxing_glove","martial_arts_uniform","curling_stone","croissant","avocado","cucumber","bacon","potato","carrot","baguette_bread","green_salad","shallow_pan_of_food","stuffed_flatbread","glass_of_milk","peanuts","kiwifruit","pancakes","dumpling","fortune_cookie","takeout_box","chopsticks","bowl_with_spoon","cup_with_straw","coconut","broccoli","pie","pretzel","cut_of_meat","sandwich","canned_food","eagle","duck","bat","shark","owl","fox_face","butterfly","deer","gorilla","lizard","rhinoceros","shrimp","squid","giraffe_face","zebra_face","hedgehog","sauropod","t-rex","cricket","face_with_monocle","adult","child","older_adult","bearded_person","person_with_headscarf","woman_in_steamy_room","man_in_steamy_room","person_in_steamy_room","woman_climbing","man_climbing","person_climbing","woman_in_lotus_position","man_in_lotus_position","person_in_lotus_position","female_mage","male_mage","mage","female_fairy","male_fairy","fairy","female_vampire","male_vampire","vampire","mermaid","merman","merperson","female_elf","male_elf","elf","female_genie","male_genie","genie","female_zombie","male_zombie","zombie","brain","orange_heart","billed_cap","scarf","gloves","coat","socks","female_sign","male_sign","medical_symbol","staff_of_aesculapius","woman-bouncing-ball","man-bouncing-ball"]})()},11174:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:true});var t=a(11175);var o=a.n(t);var r=a(11176);var i=a.n(r);var s=a(11177);var l=a.n(s);var _=a(11178);var c=a.n(_);var d=a(11179);var u=a.n(d);var m=a(11180);var f=a.n(m);var g=a(9889);var p=a.n(g);var h=a(11181);var S=a.n(h);var b=a(11182);var T=a.n(b);var w=a(9905);var v=a.n(w);var y=a(10029);var k=a.n(y);var j=a(11183);var x=a.n(j);var E=a(11184);var O=a.n(E);var C=a(11185);var A=a.n(C)},11175:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e=function e(n,a){var t=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var o=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var r={description:a,error_json:JSON.stringify(n),team:t,user:o,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,r)};var n=function e(n,a,t){if(!window.console||!console[n])return;var o=TS.qs_args.clean_log;var i=null!==a;t=Array.prototype.slice.call(t);if(i){if(!TS.console.shouldLog(a))return;t.splice(0,1)}t=_.map(t,function(e){return r(e)});var s=true;var l=t.length;while(s&&l){l-=1;s="string"===typeof t[l]}if(o&&"error"!==n&&(a!==parseInt(TS.qs_args.pri,10)||!i))return;if(s){var c=TS.makeLogDate();i&&!o&&(c+="[** "+a+" **]");t.unshift(c);console[n](t.join(" "))}else console[n].apply(console,t)};window.TS||(window.TS={});TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){n("count",null,arguments)},dir:function e(n,a,t){if(!window.console||!console.dir)return;if(n&&!TS.shouldLog(n))return;t=t||"";a=r(a);var o=parseInt(TS.qs_args.dir_json,10);if(o){var i=1==o?"2000":o;try{var s=JSON.stringify(a,null,"  ");if(s.length>i)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" "+a);return}}}try{var l=_.cloneDeep(a);console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" \ud83d\udc47");console.dir(l)}catch(e){TS.warn("could not dir ob:"+a+" err:"+e)}},error:function e(){n("error",null,arguments)},group:function e(){n("group",null,arguments)},groupCollapsed:function e(){n("groupCollapsed",null,arguments)},groupEnd:function e(){n("groupEnd",null,arguments)},maybeError:function e(a){n("error",a,arguments)},getStackTrace:function e(){var n="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var a=(new Error).stack;if(n){var t=new Error;var o=Promise.resolve();if(_.isFunction(o._attachExtraTrace)){o._attachExtraTrace(t);a=t.stack||"";var r=a.split("\n");if(r.length&&r.indexOf("From previous event:")>=0){var i=r.indexOf("From previous event:")+1;a=[r[0]].concat(r.slice(i)).join("\n")}}}var s;s=a?a.split&&a.split("\n")||["[could not parse stack]",a]:["no stacktrace available"];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){n("info",null,arguments)},log:function e(a){n("log",a,arguments)},logError:function n(a,t,o,r){var i=a instanceof Error?a:new Error;var s={subtype:o||"none",message:a instanceof Error?a.message||a.description:JSON.stringify(a),fileName:i.fileName||i.sourceURL,lineNumber:i.lineNumber||i.line,stack:i.stack||i.backtrace||i.stacktrace};var l=JSON.stringify(s);e(s,t);!r&&window.console&&console.error&&console.error(TS.makeLogDate()+"logging error: "+l)},logStackTrace:function e(n){var a=_.isUndefined(n)?"":n+"\n";TS.console.info(a+"Stacktrace: \u21b4\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function n(a,t,o){if(!t||!a||_.isUndefined(o)){TS.console.warn("Invalid parameters, will not log stack trace");return}var r=TS.console.getStackTrace();var i=_.get(r.split("\n"),"[1]")||"(unknown)";TS.metrics.count(t+"_v"+o);var s={message:a+". Immediate caller: "+i,stack:r};var l=i.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=t+"_caller_v"+o;e(s,c)},profile:function e(){n("profile",null,arguments)},profileEnd:function e(){n("profileEnd",null,arguments)},replaceConsoleFunction:function e(a){var t=n;n=a;return t},setAppropriatePri:function e(n){var a="";TS.qs_args.pri&&(a+=TS.qs_args.pri);if(n&&TS.boot_data.client_logs_pri){""!==a&&(a+=",");a+=TS.boot_data.client_logs_pri}if(TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")){""!==a&&(a+=",");a+=TS.prefs.getPref("client_logs_pri")}""!==a&&(a+=",");a+="0";TS.pri=_.uniq(a.split(",")).join(",");t()},shouldLog:function e(n){var a=String(TS.pri).split(",");if(-1!==a.indexOf("all")||-1!==a.indexOf("*"))return true;if(-1!==a.indexOf(String(n)))return true;return"undefined"!==typeof TS.has_pri[n]},table:function e(){n("table",null,arguments)},time:function e(){n("time",null,arguments)},timeEnd:function e(){n("timeEnd",null,arguments)},timeStamp:function e(){n("timeStamp",null,arguments)},warn:function e(){n("warn",null,arguments)},maybeWarn:function e(a){n("warn",a,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_beacon_js_errors)return;var n=true;var a=_.throttle(s,1e4);window.addEventListener("error",a,n)},trace:function e(){n("trace",null,arguments)},maybeTrace:function e(a){n("trace",a,arguments)},test:function e(){return{_maybeRedactFields:r,_windowErrorHandler:s}}};var t=function e(){var n=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var a=TS.boot_data.client_logs[e];return n.some(function(e){if("*"===e)return true;if(a.numbers.indexOf(parseInt(e,10))>-1)return true;if(a.name&&a.name.indexOf(e)>-1)return true;if(a.owner&&a.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var o={name:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,email:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1};var r=function e(n,a){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return n;if(!n||!_.isObject(n))return n;a?a+=1:a=1;if(a>=10)return n;var t;t=_.isArray(n)?[]:{};_.each(n,function(n,r){o[r]?t[r]="[redacted "+i(n)+"]":t[r]=e(n,a)});return t};var i=function(e){var n={};return function(t){var o="undefined"===typeof t?"undefined":a(t);if(null===t)return"null";if(t===e)return"global";if("object"!==o)return o;if(t.nodeType)return"DOM node";var r=n[o={}.toString.call(t)]||(n[o]=o.slice(8,-1).toLowerCase());return r}}(this);var s=function e(){var n=arguments&&arguments[0];var a;var t="";var o;var r=true;if(!n)return;t="";a=n.srcElement||n.target;if(a&&a.nodeName)if("SCRIPT"===a.nodeName)t=(n.type||"error")+" from script at "+a.src+" (failed to load?)";else if("IMG"===a.nodeName){TS.pri&&TS.console&&TS.console.warn&&TS.console.warn("<img> fired error with url = "+(a.src||a.currentSrc||"unkonwn"));return}n.error&&n.error.stack?t+=n.error.stack:n.filename&&(t=" from "+n.filename+(n.lineno?" @ line "+n.lineno+", col "+n.colno:""));o=(n.error&&n.error.stack?"":n.message||"")+" "+t;o&&o.replace&&(o=o.replace(/\s+/g," ").trim());if(!o||!o.length){o=a?"error event from node of "+(a.nodeName||"unknown")+", no message provided?":"error event fired, no relevant message or node found";r=false}o="\ud83d\udc1e "+o;(window.TS&&TS.console&&TS.console.error||window.console.error||function(){})(o);if(window.TS&&TS.console&&r){var i="js_runtime_error";var s=false;TS.console.logError(n.error||n,o,i,s)}a=null;o=null}})()},11176:function(e,n){(function(){var e=window.TS&&TS.raw_templates;var n=window.TS&&TS.console;var a=0;var t;var o;var r=false;var i=7e4;window.TSM&&window.TSM.interop||console.error("TSM.interop not found, app almost certainly will not boot properly");window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:n,ms:{},interop:window.TSM&&window.TSM.interop,boot:function e(n){A();o=new Promise(function(e){t=e});TS.boot_data=n;TS.qs_args.js_path&&(TS.boot_data.version_ts="local_js");TS.console.onStart();TS.client&&TS.client.setClientLoadWatchdogTimer();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;TS.boot_data.feature_sonic&&localStorage.setItem("token",TS.boot_data.api_token);TS.model.webhook_url=TS.boot_data.webhook_url;TS.boot_data.page_needs_enterprise&&(TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token);TS.interop.console.info("BOOT","booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");TS.web&&TS.web.space&&TS.web.space.showFastPreview();if(TS.incremental_boot.shouldIncrementalBoot()){TS.interop.console.info("BOOT","Starting incremental boot (early)");w=TS.incremental_boot.startIncrementalBoot()}TS.redux.onStart();TS.redux.onStart=_.noop;TS.interop.clog.instance.setUser(TS.boot_data.user_id).setTeam(TS.boot_data.team_id).setEnterprise(TS.boot_data.enterprise_id).setLocale(TS.interop.i18n&&TS.interop.i18n.locale).start();$(document).ready(z)},useReactDownloads:function e(){return window.TS&&TS.interop.environment.isSSBAndAtLeastVersion("2.7")},useReactMessages:function e(){return true},useReactLFS:function e(){return TS.boot_data.feature_react_lfs},registerModule:function e(n,a,t){W(a);if(y)return TS.error('module "'+n+'" must be registered on before dom ready');if(B[n])return TS.error('module "'+n+'" already exists');var o=s(n,a,"module");if(void 0===o){t?TS.error('module "'+n+'" cannot be registered after delay; "'+n.split(".").slice(0,-1).join(".")+'" is not registered'):M[n]=a;return}a._name=n;B[n]=a},registerComponent:function e(n,t){if(y)return TS.error('component "'+n+'" must be registered on before dom ready');if(L[n])return TS.error('component "'+n+'" already exists');"function"===typeof t&&(t=t());if("function"!==typeof t.destroy)return TS.error('component "'+n+'" cannot be registered as it does not have a destroy method');var o=function e(){this._constructor&&this._constructor.apply(this,arguments);if(!this.id){this.id=n+"_auto_guid_"+a;a+=1}this.test&&l()?this.test=void 0:"function"===typeof this.test&&(this.test=this.test());e._add(this.id,this)};var r=s(n,o,"component");if(void 0===r){F[n]=t;return}var i=t.destroy;t.destroy=function(){o._remove(this.id);i.call(this)};o.prototype=Object.create(t);o.instances={};o._name=n;L[n]=o;o._add=function(e,a){L[n].instances[e]&&TS.warn("A "+n+" component with the instance id "+e+"already exists");L[n].instances[e]=a};o._remove=function(e){L[n].instances[e]=null};o.get=function(e){return L[n].instances[e]};o.getAll=function(){return L[n].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(n){return TS.console.shouldLog(n)},replaceConsoleFunction:function e(n){return TS.console.replaceConsoleFunction(n)},log:function e(n){if(TS.shouldLog(n)){var a=K(n,"log");var t=H(n,arguments);TS.interop.console.info(a,[].slice.call(t,0))}},info:function e(){TS.interop.console.info("info",[].slice.call(arguments,0))},maybeWarn:function e(n){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){TS.interop.console.warn([].slice.call(arguments,0))},dir:function e(n,a,t){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(n){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){TS.interop.console.error([].slice.call(arguments,0))},logError:function e(n,a,t,o){TS.console.logError.apply(this,[].slice.call(arguments,0))},getQsArgsForUrl:function e(n){if(!n&&k)return k;k="";for(var a in TS.qs_args){if("export_test"===a)continue;k+="&"+a+"="+encodeURIComponent(TS.qs_args[a])}return k},getOtherAccountsCount:function e(){var n=0;if(!TS.boot_data.other_accounts)return n;n=Object.keys(TS.boot_data.other_accounts).length;return n},refreshTeams:function e(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.api.call("auth.currentSessions").then(function(e){var n=e.data;TS.boot_data.other_accounts={};var a=0;for(var t in n.accounts){if(t==TS.model.user.id)continue;TS.boot_data.other_accounts[t]=n.accounts[t];a+=1}TS.view&&!a&&TS.view.updateTitleBarColor()}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.warn(8675309,"unable to do anything with refreshTeams rsp");TS.error(8675309,e)}})},ssbChromeClicked:function e(n){if(n)return;$("html").trigger("touchstart");$(".modal-backdrop").trigger("click")},reload:function e(n,a,t){if(n){TS.info("TS.reload called: "+n);TS.generic_dialog.start({title:TS.interop.i18n.t("Reloading!","ts")(),body:n,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}a&&(a=JSON.stringify(a));TS.info("TS.reload() called: "+(a||"no reason specified"));TS.console&&TS.console.logStackTrace();window.location.reload(t)},reloadIfVersionsChanged:function e(n){if(TS.model.ms_logged_in_once&&n.min_version_ts&&"dev"!==TS.boot_data.version_ts&&parseInt(TS.boot_data.version_ts,10)<parseInt(n.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&n.cache_version&&n.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+n.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},isPartiallyBooted:function e(){return!!(TS._incremental_boot||TS._did_incremental_boot&&!TS._did_full_boot)},ensureFullyBooted:function e(){return o},test:function e(){var e={_registerDelayedComponentsAndModules:q,_deleteModule:function e(n){delete TS[n];delete B[n]},_deleteComponent:function e(n){delete TS[n];delete L[n]}};return e}};delete window.TSM;var s=function e(n,a,t){var o=n;var r=TS;var i=o.split(".");var s=i.length-1;if(s>=3)TS.error(t+' "'+o+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){o=i[s];var l=0;for(l;l<s;l+=1){i[l]||TS.error(t+' "'+n+'" cannot be registered because of a bad name');r=r[i[l]];if(void 0===r)return r}}void 0!==r[o]?TS.error(t+' "'+n+'" cannot be registered; "'+o+'" already exists on "'+(r._name||"TS")+'"'):r[o]=a;return r};if(e){TS.raw_templates=e;e=null}var l=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var c=function e(){var n=u();v=n;if(!w){TS.info("Starting non-incremental boot");return d(n)}var a=w;w=void 0;return a.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");v=void 0;return d(n)})};var d=function e(n){return n.catch(function(e){f(e);throw e})};var u=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(n,a){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){n(e)}).catch(a)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var n=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return n}return E().then(function(e){TS.has_pri[R]&&TS.log(R,"Flannel: got rtm.start response \ud83d\udc95");return{ok:true,args:{},data:e}})};var m=function e(n){switch(n){case"user_removed_from_team":TS.warn("You have been removed from the "+TS.model.team.name+" team.");TS.client&&TS.client.userRemovedFromTeam(TS.model.team.id);break;case"account_inactive":case"team_disabled":case"invalid_auth":TSSSB.call("invalidateAuth");TS.reload(null,"Reloading due to error "+n);break;case"clear_cache":case"org_login_required":case"team_added_to_org":var a=true;TS.storage.flush(a);TS.reload(null,"Flushing storage and reloading due to '"+n+"' error");break;case"ratelimited":J();break;default:TS.warn("Unexpected start error: "+n)}};var f=function e(n){var a=n.data&&n.data.error;a&&m()};var g=function e(n){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Got rtm.start login data");TS.model.emoji_cache_ts=n.data.emoji_cache_ts;TS.model.apps_cache_ts=n.data.apps_cache_ts;TS.model.commands_cache_ts=n.data.commands_cache_ts;TS.model.static_translations_cache_ts=n.data.translations_cache_ts;if(TS.client&&TS.reloadIfVersionsChanged(n.data))return;if(!n.data.self){TS.error("No self?");return}if(!n.data.team){TS.error("No team?");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up model");return N(n.data,n.args).then(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Model did set up; setting up apps");TS.apps.setUp();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up commands");TS.cmd_handlers.setUpCmds();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up static translations");TS.i18n.setUpStaticTranslations();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up UI");p();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Finding initial channel");TS.client&&TS.client.calculateInitialCid();TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji and shared channels");if(TS.boot_data.feature_non_wasted_flannel_connection){if(TS.model.user.is_restricted){var e=_([n.data.mpims,n.data.ims]).flatten().map(function(e){return e.members||[e.user]}).flatten().concat(TS.model.guest_accessible_user_ids,TS.model.user.id).compact().uniq().value();var a=true;TS.members.legacySetAccessibleUserIds(e,a);TS.members.legacyMaybeFetchAccessibleUserIds()}return TS.emoji.bootEmoji().timeout(500).catch(Promise.TimeoutError,function(){TS.boot_data.feature_tinyspeck&&window.console.log("Fetching emoji took too long; continuing without waiting for it")}).catch(function(){TS.boot_data.feature_tinyspeck&&window.console.log("Setting up emoji failed, trying to move forward anyway...")})}return Promise.join(TS.emoji.setUpEmoji().catch(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji failed, trying to move forward anyway...")}),TS.members?TS.members.legacyMaybeFetchAccessibleUserIds():Promise.resolve())}).then(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Nearly there! Finalizing...");TS.model.ms_logged_in_once||h(n.data);TS.client&&TS.client.onEveryLoginMS(n.data);TS.web&&TS.web.onEveryLoginMS(n.data);b();var e;e=TS._did_incremental_boot?TS.model.ms_logged_in_once:!TS.model.ms_logged_in_once;if(e&&t){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Divine clementine, we are finalizing a full boot!");t();t=null;TSSSB.call("didFinishLoading");r=true;I&&TS.interop.console.info("BOOT","Finished first boot "+Math.ceil(performance.now()-I)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Holy guacamole, we\u2019re all done!");TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"))}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var p=function e(){TS.ui.setThemeClasses();if(TS.client){TSSSB.call("setCurrentTeam",TS.model.team.domain);TS.client.updateTeamIcon()}};var h=function e(n){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}if(TS.client){TS.client.onFirstLoginMS(n);if(TS.isPartiallyBooted()){S(v);v=void 0}else TS.incremental_boot.afterFullBoot();TS.has_pri["1996"]=true}TS.web&&TS.web.onFirstLoginMS(n)};var S=function e(n){TS.interop.console.info("BOOT","Finalizing incremental boot");TS.incremental_boot.beforeFullBoot();d(n).then(function(e){g(e);TS.incremental_boot.afterFullBoot();TS.interop.console.info("BOOT","Completed incremental boot")}).catch(function(e){TS.error("Tried to finalize incremental boot, but rtm.start failed. Will recover when we reconnect.");throw e})};var b=function e(){if(TS.isPartiallyBooted()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS not connecting to MS until we complete incremental boot");return}if(!TS.interop.Flannel.useSocket()){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.redux.socket.isProvisionallyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");var n=true;TS.console.logError(e,"sm_finalize_failed_2",void 0,n);TS.interop.SocketManager.disconnect()}}else{TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.redux.socket.hasNeverConnected()){"calls"===TS.boot_data.app?TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now"):TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");E().then(function(e){g({ok:true,args:{},data:e})})}else if(!TS.redux.socket.wasPreviouslyConnected()){TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.redux.socket.provisionallyConnectedSig.addOnce(function(){return e()})}}TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_maybeFinalizeOrOpenConnectionToMS did connect to MS")};var T=function e(){_.forOwn(TS.interop.redux.models.channels.getAllChannels(TS.redux.getState()),function(e){e._consistency_has_been_checked&&(e._consistency_has_been_checked=false);e._consistency_is_being_checked&&(e._consistency_is_being_checked=false)})};var w;var v;TS.qs_args=function(){var e=location.search.substring(1);var n={};var a;a=e.split("&");for(var t=0;t<a.length;t+=1){var o=a[t].indexOf("=");if(-1!=o){var r=a[t].substring(0,o);var i=a[t].substring(o+1);n[r]=unescape(i)}else a[t].length&&(n[a[t]]="")}return n}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){e&&(TS.has_pri[e]=true)});var y=false;var k;var j=function e(){TS.redux.socket.disconnectedSig.add(T);TS.redux.socket.connectedSig.addOnce(function(){TS.redux.socket.provisionallyConnectedSig.add(function(e){x(e).then(function(e){TS.info("Successfully hydrated start data from Socket Manager; processing it");g({ok:true,args:{},data:e})})})})};var x=function e(n){return n.then(function(e){TS.info("Got start data from Socket Manager; hydrating it");return TS.redux.dispatch(TS.interop.boot.data.hydrateStartData({startData:e}))})};var E=function e(){if(!TS.redux.socket.hasNeverConnected()){var n=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.console.logError(n,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(n)}TS.redux.socket.socketErrorMessageReceivedSig.add(m);var a=new Promise(function(e){function n(a){x(a).then(function(a){TS.redux.socket.provisionallyConnectedSig.remove(n);e(a)}).catch(function(e){TS.warn("Unable to get start data from socket");TS.logError(e)})}TS.redux.socket.provisionallyConnectedSig.add(n)});TS.has_pri["1996"]=true;TS.interop.Eventlog.createInstanceForTeam(TS.boot_data.team_id);TS.interop.SocketManager.start(TS.boot_data.api_token);return a};var O=function e(n){TS.client&&TSSSB.call("didStartLoading",6e4);TS.interop.Flannel.useSocket()&&j();U();y=true;TS.model.is_our_app&&D();TS.ui.setUpWindowUnloadHandlers();"client"===TS.boot_data.app?TS.client.gogogo():"web"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.web.gogogo();if(TS.boot_data.no_login){TS.info("running without a user");TS.web&&TS.web.no_login_complete_sig.dispatch()}else n?g(n):TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var C=function e(){if(!window.sessionStorage)return;try{var n=TS.client?"session_load_count_client":"session_load_count_web";var a=parseInt(sessionStorage.getItem(n)||0,10)+1;sessionStorage.setItem(n,a);TS.log(123,n+": "+a);TS.metrics.store(n,a,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var A=function e(){window.devtoolsFormatters=window.devtoolsFormatters||[];window.devtoolsFormatters.push({header:function e(n){if(!n||!n._is_interop_channel_object||!window._)return null;var a=_.omitBy(_.assign({},n),_.isNil);return["object",{object:a}]},hasBody:function e(){return false}})};var B={};var M={};var L={};var F={};var I;var z=function e(){I=performance.now();TS.log(123,"_onDOMReady");setTimeout(function(){if(!TS.model.is_our_app)return;if(TS.interop.environment.isSSBAndAtLeastVersion("2.6"))return;if(!r){TSSSB.call("didFinishLoading");r=true;TS.metrics.count("fake_call_did_finish_loading_for_older_SSBs")}},i);C();if(TS.qs_args.ws_flakiness)try{var n=parseFloat(TS.qs_args.ws_flakiness);TS.interop.SocketManager.debugSetSocketConnectFlakiness(n)}catch(e){}if(window.winssb&&winssb.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}TS.client?TSSSB.call("didStartLoading",3e4):TS.info("no TS.client on page:"+document.location.href);TS.api.paused_sig.add(function(e){TS.boot_data.feature_tinyspeck&&TS.api.debugShowQueue();TS.client?TS.client.apiPaused(e):TS.web.apiPaused(e)});TS.api.unpaused_sig.add(function(){TS.client?TS.client.apiUnpaused():TS.web.apiUnpaused()});soundManager.ignoreFlash=true;soundManager.setup({url:"/img/sm/",debugMode:false});TS.storage.onStart();q();TS.redux.members.onStart();TS.redux.members.onStart=_.noop;TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id);if(TS.interop&&TS.interop.console&&TS.interop.console.setRedactionEnabled){var a=!TS.boot_data.feature_tinyspeck;TS.interop.console.setRedactionEnabled(a)}var t=TS.boot_data.no_login?Promise.resolve():c();var o=[P(),t];TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login&&o.push(TS.redux.enterprise.getEnterpriseOrgInfo());Promise.all(o).then(function(){t.then(O);return null})};var P=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0)return Promise.resolve();var n;n=TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts?TS.boot_data.hbs_templates_version:"dev"===TS.boot_data.version_ts?Date.now():TS.boot_data.version_ts;var a="/templates.php?cb="+n+TS.getQsArgsForUrl();TS.boot_data.template_groups&&(a+="&template_groups="+TS.boot_data.template_groups);TS.boot_data.template_exclude_feature_flagged&&(a+="&template_exclude_feature_flagged=1");if(/&locale=[a-zA-Z-]/.test(a)){a=a.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");a=a.replace(/&locale=[a-zA-Z-]/,"")}TS.interop.i18n.locale&&TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(a+="&locale="+TS.interop.i18n.locale);var t=0;function o(){t+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0){e();return}TS.utility.getCachedScript(a).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(a+" returned no templates D:");return}e()}).fail(function(e,n,r){var i=Math.min(1e3*t,1e4);TS.warn("loading "+a+" failed (textStatus:"+n+" errorThrown:"+r+" attempts:"+t+"), trying again in "+i+"ms");setTimeout(o,i)})})}return o()};var q=function e(){_.sortBy(Object.keys(M),"length").forEach(function(e){TS.registerModule(e,M[e],true)});_.sortBy(Object.keys(F),"length").forEach(function(e){TS.registerComponent(e,F[e],true)})};var U=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app){TS.client.onStart();TS.client.onStart=_.noop}else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else{if("test"===TS.boot_data.app)return;if("api"!==TS.boot_data.app&&"oauth"!==TS.boot_data.app){TS.error("WTF app? "+TS.boot_data.app);return}}var n;var a=!TS.qs_args.keep_onstart;try{_.forOwn(B,function(e){if(!e.onStart)return;n=e._name;e.onStart();a&&(e.onStart=_.noop)})}catch(e){TS.error("TS."+n+".onStart encountered an error:");TS.logError(e);window.TSBeacon&&window.TSBeacon("call_onstarts_error",1);throw e}a&&(U=_.noop)};var N=function e(n,a){return new Promise(function(e,t){var o=!TS.model.ms_logged_in_once;n.team.activity=[];n.team.url=n.url;TS.team.upsertTeam(n.team);TS.boot_data.page_needs_enterprise&&void 0!==n.can_manage_shared_channels&&TS.prefs.setTeamPrefLocal("can_user_manage_shared_channels",n.can_manage_shared_channels);if(!TS.model.last_team_name){TS.model.last_team_name=TS.model.team.name;TS.model.last_team_domain=TS.model.team.domain}if(o){TS.model.read_only_channels=[];if(TS.boot_data.feature_default_shared_channels){TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}}else{var r=TS._did_incremental_boot&&!TS._did_full_boot;r||TS.refreshTeams()}TS.prefs.setPrefs(n.self.prefs);delete n.self.prefs;var i;var s;var l;var c=function e(n){TS.model.user=_.assign(n,{is_self:true})};var d=["args.cache_ts:"+a.cache_ts];var u=_.clone(a);u.token&&(u.token="REDACTED");try{d.push("api args: "+JSON.stringify(u))}catch(e){d.push("api args: "+u)}TS.members.legacyUpsertAndSignal(n.self);TS.members.legacyStartBatchUpsert();var m=n.users||[];var f=n.bots||[];var g={};if(!TS._did_incremental_boot||TS._incremental_boot||TS._did_full_boot)for(i=0;i<m.length;i+=1)g[m[i].id]=true;else;for(i=0;i<m.length;i+=1){s=TS.members.legacyUpsertAndSignal(m[i]);l=s.member;TS.has_pri[G]&&TS.log(G,"upsert from DATA: "+l.id+" "+s.status);l.id==n.self.id&&c(s.member)}var p={};for(i=0;i<f.length;i+=1)p[f[i].id]=true;TS.useReactMessages()?TS.redux.bots.bulkUpsertBots(f):TS.bots.legacyBatchUpsertAndSignal(f);d.push("members from updated_users in rtm.start:"+m.length+" (slackbot will always be here)");d.push("bots from updated_bots in rtm.start:"+f.length);m.length<TS.model.members.length/20&&(TS.model.did_we_load_with_user_cache=true);var h;TS.qs_args.debug_slackbot&&(h=true);h&&TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",m,f);p=null;g=null;TS.log(123,d.join("\n"));if(!TS.model.user){TS.error("No TS.model.user - Expected user with id: "+_.get(n,"self.id","#"));TS.log(d.join("\n"));t(Error("No TS.model.user"));return}TS.members.legacyFinishBatchUpsert();TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words"));if(n.subteams){TS.user_groups.legacyStartBatchUpsert();n.subteams.all.forEach(function(e){TS.user_groups.upsertUserGroup(e)});TS.user_groups.legacyFinishBatchUpsert();n.subteams.self.forEach(function(e){TS.user_groups.upsertSelfUserGroup(e)})}h&&TS.info("debug_slackbot: _setUpModel(): data.ims",n.ims);n.read_only_channels&&(TS.model.read_only_channels=n.read_only_channels);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(TS.model.non_threadable_channels=n.non_threadable_channels);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(TS.model.thread_only_channels=n.thread_only_channels);TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var S=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,S)}var b=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(b,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(b,2*TS.model.initial_msgs_cnt);TS.log(123,"initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var T=function e(){var a=1==TS.qs_args.just_general;TS.utility.msgs.startBatchUnreadCalc();TS.metrics.mark("upsert_channels_start");var t=true;var o=_.map(n.channels,function(e){if(a&&!e.is_general)return;var o=false;var r=false;var i=false;n.read_only_channels&&(o=n.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(r=n.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(i=n.non_threadable_channels.indexOf(e.id)>-1);e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.interop.channels.upsertChannel(e,t)});TS.metrics.measureAndClear("upsert_channels","upsert_channels_start");h&&TS.info("debug_slackbot: completeModelObSetup(): data.ims",n.ims);var r=_.map(n.ims,function(e){if(a&&"USLACKBOT"!==e.user)return;return TS.interop.channels.upsertIm(e,t)});TS.metrics.mark("upsert_groups_start");if(!TS.isPartiallyBooted()){var i=_.map(TS.model.groups,"id");var s=_.map(n.groups,"id");var l=false;_.difference(i,s).forEach(function(e){var n=TS.interop.channels.getGroupById(e);TS.redux.dispatch(TS.interop.redux.models.channels.removeChannels({ids:[e]}));TS.channels.left_sig.dispatch(n);l=true});l&&TS.members.invalidateMembersUserCanSeeArrayCaches()}var c=_.map(n.groups,function(e){if(a)return;var o=false;var r=false;var i=false;n.read_only_channels&&(o=n.read_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.thread_only_channels&&(r=n.thread_only_channels.indexOf(e.id)>-1);TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels&&(i=n.non_threadable_channels.indexOf(e.id)>-1);e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.interop.channels.upsertGroup(e,t)});TS.metrics.measureAndClear("upsert_groups","upsert_groups_start");if(n.mpims){h&&TS.info("debug_slackbot: completeModelObSetup(): data.mpims",n.mpims);var d=_.map(n.mpims,function(e){if(a)return;return TS.interop.channels.upsertMpim(e,t)})}var u=_.compact(o.concat(r).concat(c).concat(d));TS.redux.channels.bulkAddEntities(u);TS.interop&&TS.interop.ChannelSidebar&&TS.interop.ChannelSidebar.ensureRowInView();TS.utility.msgs.finishBatchUnreadCalc();TS.model.user.is_restricted&&!TS._incremental_boot&&TS._did_incremental_boot&&TS.members.invalidateMembersUserCanSeeArrayCaches();if(h){var m=TS.redux.channels.getImByMemberId("USLACKBOT");var f=TS.interop.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: "+(TS._incremental_boot?"incremental boot":"non-incremental boot")+"\nTS.redux.channels.getImByMemberId('USLACKBOT') => "+(m?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")+"\nTS.interop.members.getMemberById('USLACKBOT') => "+(f?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b"));m&&TS.info("debug_slackbot: slackbot_im",m.toJSON&&m.toJSON()||m);f&&TS.info("debug_slackbot: slackbot_member",f.toJSON&&f.toJSON()||f);TS._incremental_boot||m||TS.warn("debug_slackbot: TS.redux.channels.getImByMemberId(`USLACKBOT`): No IM found?")}};if(n.dnd){n.dnd.dnd_enabled?TS.redux.dnd.updateDndScheduleForMember(n.self.id,n.dnd.next_dnd_start_ts,n.dnd.next_dnd_end_ts):TS.redux.dnd.updateDndScheduleForMember(n.self.id,null,null);(n.dnd.snooze_enabled||n.dnd.snooze_endtime)&&TS.redux.dnd.updateSnoozeScheduleForCurrentMember(n.dnd.snooze_enabled,n.dnd.snooze_endtime)}if(!TS._incremental_boot&&!TS.boot_data.feature_non_blocking_user_boot){var w=n.ims.concat(n.mpims||[],n.groups||[]);h&&TS.info("debug_slackbot: _setUpModel(): !TS._incremental_boot, fetching all external members in shared model obs",w);var v=w.filter(TS.interop.rules.channels.isOrgShared);return TS.members.legacyEnsureMembersArePresentInModelObs(v).then(function(){T();e()},function(e){t(Error("could not fetch all external members: "+(e&&e.message)))})}T();e()})};var W=function e(n){if(n.test&&!n.__esModule&&l())delete n.test;else if("function"===typeof n.test){var a=n.test;Object.defineProperty(n,"test",{get:a})}};W(TS);var D=function e(){var n=false;var a=function e(){TS.info("sleep event!");n=true;TS.client&&TS.interop.SocketManager.sleep();TS.web&&TS.web.space&&TS.ds.sleep()};var t=function e(){if(!n)return;n=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms);TS.client&&TS.interop.SocketManager.wake();TS.web&&TS.web.space&&TS.ds.wake()};window.addEventListener("sleep",a,false);window.addEventListener("wake",t,false)};var R=1989;var G=481;var V;var J=function e(){if(V)return;V=true;TS.metrics.count("rate_limit_dialog_shown");var n="Bear with us";var a="Dismiss";var t="Lots of your teammates are connecting to Slack right now, so it\u2019s taking longer than usual. We\u2019re really sorry about this, and we\u2019ll have you online soon.";var o=TS.generic_dialog.alert(t,n,a);var r=function e(){o.isPending()&&TS.generic_dialog.cancel();V=false};TS.redux.socket.connectedSig.addOnce(r)};var K=function e(n,a){var t=a;n&&_.isNumber(n)?t=""+n:"log"===a&&(t="info");return t};var H=function e(n,a){var t=Array.prototype.slice.call(a);n&&_.isNumber(n)&&t.shift();return t}})()},11177:function(e,n){(function(){TS.registerModule("incremental_boot",{onStart:function e(){TS.channels.switched_sig.add(s);TS.ims.switched_sig.add(s);TS.groups.switched_sig.add(s);TS.mpims.switched_sig.add(s);TS.redux.socket.connectedSig.addOnce(s)},startIncrementalBoot:function n(){if(TS._did_incremental_boot)return Promise.reject(new Error("_startIncrementalBoot called more than once; this is a programming error."));TS._did_incremental_boot=true;var a=TS.boot_data.incremental_boot_data;delete TS.boot_data.incremental_boot_data;var t={canonical_avatars:true,include_full_users:true,count:TS.model.initial_msgs_cnt-1,ignore_replies:true,include_pin_count:true,no_members:true,name_tagging:true,no_user_profile:true};var o=l();if(o){TS.model.c_name_in_url=o;t.name=o;TS.log(123,"Performing incremental boot for channel in URL: "+o)}else{var i=localStorage[c()];if(i){t.channel=i;TS.log(123,"Performing incremental boot for channel from history: "+i)}}r(true);TS.model.change_channels_when_offline=false;var s=d("conversations.view",t);return s.then(function(n){TS._incremental_boot=true;var t=e(a,n.data);return{ok:true,data:t,args:n.args}}).catch(function(e){TS.warn("Incremental boot failed with error: "+e);TS._incremental_boot=false;TS._did_incremental_boot=false;TS.model.change_channels_when_offline=true;r(false);throw e})},beforeFullBoot:function e(){if(!TS._incremental_boot)return;if(!TS._did_incremental_boot)return;if(TS._did_full_boot)return;TS._incremental_boot=false;a=setTimeout(o,1e4);TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container&&TS.client.ui.$messages_input_container.one(n,o);TS.redux.socket.connectedSig.addOnce(o)},afterFullBoot:function e(){if(TS._did_incremental_boot){TS._did_full_boot=true;TS.model.change_channels_when_offline=true}r(false);TS.redux.dispatch(TS.interop.redux.features.incrementalBoot.setFullyBooted(true))},shouldIncrementalBoot:function e(){if(TS._did_incremental_boot)return false;if(!TS.boot_data.incremental_boot_data)return false;if(TS.model.ms_logged_in_once)return false;if(false===_.get(TS.boot_data.incremental_boot_data,"self.prefs.seen_welcome_2",void 0)||false===TS.boot_data.prefs_seen_welcome_2){delete TS.boot_data.incremental_boot_data;return false}if("client"!==TS.boot_data.app||0!==location.pathname.indexOf("/messages")){delete TS.boot_data.incremental_boot_data;return false}return true},userDidInteractWithUI:function e(){TS.sounds.play("beep");o()},getInitialChannelsToUpsert:function e(){return t}});var e=function e(n,a){var t=a;t.channels=t.channels||[];t.groups=t.groups||[];t.ims=t.ims||[];t.mpims=t.mpims||[];var o=t.channel||t.group||t.im;TS.model.initial_cid=o.id;delete t.channel;delete t.group;t.history&&t.history.messages?o.msgs=t.history.messages:o.msgs=[];TS.pins&&t.history&&TS.pins.updateCount(o,t.history.pin_count);Object.keys(n).forEach(function(e){t[e]=_.merge(n[e],t[e])});if(!t.self||t.self.id!=TS.boot_data.user_id)throw new Error("Missing `self` from incremental boot data");_.find(t.users,{id:t.self.id})||t.users.push(t.self);t.users.forEach(function(e){"USLACKBOT"!==e.id&&e.id!=TS.boot_data.user_id||(e.presence="active");delete e.updated});if(o.is_channel)i(o,t.channels);else if(o.is_mpim)i(o,t.mpims);else if(o.is_group)i(o,t.groups);else{if(!o.is_im)throw new Error("Unexpected model object type from channels.view");i(o,t.ims)}return t};var n="change.incremental_boot keydown.incremental_boot paste.incremental_boot";var a;var t=[];var o=function e(){if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container){TS.client.ui.$messages_input_container.off(n);TS.client.ui.$messages_input_container.removeClass("pretend-to-be-online")}TS.redux.socket.connectedSig.remove(e);if(a){clearTimeout(a);a=void 0}};var r=function e(n){$("#col_channels, #team_menu").toggleClass("placeholder",n);$(document.body).toggleClass("incremental_boot",n)};var i=function e(n,a){var t=_.find(a,{id:n.id});t?_.extend(t,n):a.push(n)};var s=function e(){var n=TS.shared.legacyGetActiveModelOb();try{if(n&&n.id){localStorage[c()]=n.id;localStorage[window.boot_data.api_token+"_last_model_ob_id"]=n.id}else delete localStorage[c()]}catch(e){}};var l=function e(){var n=location.pathname.match(/\/messages\/([^/]+)/);return n&&n[1]};var c=function e(){return window.boot_data.team_id+"_"+window.boot_data.user_id+"_incr_boot_last_model_ob_id_v2"};var d=function e(n,a){return new Promise(function(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status){t(new Error("Received non-200 response from "+n));return}var r=JSON.parse(o.responseText);if(!r.ok){t(new Error("Received not-OK from "+n));return}e({ok:true,args:a,data:r})};o.onerror=function(){t(new Error("XHR encountered an error"))};var r=new FormData;Object.keys(a).forEach(function(e){return r.append(e,a[e])});r.append("token",window.boot_data.api_token);var i=""+window.boot_data.api_url+n;o.open("POST",i,!a._synchronously);o.setRequestHeader("X-Slack-Version-Ts",TS.boot_data.version_ts);o.send(r)})}})()},11178:function(e,n){(function(){TS.registerModule("redux",{onStart:function n(){e=TS.interop.redux.configureStore({teamId:TS.boot_data.team_id||"NO_TEAM_ID"});TS.redux.dispatch(TS.interop.redux.features.bootData.setBootData(TS.boot_data))},bindSelectorToStore:function n(t){if(!t)throw new Error("bindSelectorToStore: selector is undefined.");return function(n,o,r,i,s,l,_){if(!e){TS.console.error("Attempting to use a redux selector before the redux store is initialized, returning undefined instead. Selector is: "+t);return}var c=a(t);if(!c){TS.console.error("Selector "+t+" cannot be found. Either it doesn't exist or it hasn't yet been initialized. Returning undefined instead");return}if(c&&c.length>7)throw new Error("bindSelectorToStore only supports selectors accepting up to 7 parameters. This should be more than enough for any use case");return c.call(void 0,TS.redux.getState(),n,o,r,i,s,l,_)}},getState:function n(){var a=e&&e.getState&&e.getState();if(!a){TS.error("No redux state found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return a},getStoreInstance:function n(){if(!e){TS.error("No redux store found. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")}return e},dispatch:function n(a){if(a&&e&&e.dispatch)return e.dispatch(a);if(!a){TS.error("No action provided?");return}TS.error("No dispatch function available. The redux store must not be initialized yet");TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")},test:function e(){var n={};return n}});var e;var n={};function a(e){var a=n[e];if(a)return a;a=_.get(window,e);if(!a)return;n[e]=a;return a}})()},11179:function(e,n){(function(){TS.registerModule("metrics",{onStart:function e(){TS.web&&TS.web.login_sig.add(TS.metrics.onLogin);TS.client&&TS.client.login_sig.add(TS.metrics.onLogin)},onLogin:function e(){var n=TS.interop.metrics.instance;n.setUser(TS.model&&TS.model.user&&TS.model.user.id||"").setTeam(TS.model&&TS.model.team&&TS.model.team.id||"").setTeamSize(TS.model&&TS.model.members&&TS.model.members.length||0).setVersionTs(TS.boot_data.version_ts).setEndpointUrl(TS.boot_data.beacon_timing_url||window.ts_endpoint_url).setLogDomNodeCount(TS.utility.enableFeatureForUser(1)).setSSBMemoryLogging(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron&&"client"===TS.boot_data.app).start()},mark:function e(n){TS.interop.metrics.mark(n)},getLatestMark:function e(n){return TS.interop.metrics.getLatestMark(n)},clearMarks:function e(n){TS.interop.metrics.clearMarks(n)},measure:function e(n,a,t,o){return TS.interop.metrics.measure(n,a,t,o)},measureAndClear:function e(n,a){return TS.interop.metrics.measureAndClear(n,a)},store:function e(n,a,t){return TS.interop.metrics.store(n,a,t)},count:function e(n,a){TS.interop.metrics.count(n,a)},flush:function e(){TS.interop.metrics.instance.sendDataAndEmptyQueue()},reportModelSize:function e(){return TS.interop.metrics.reportModelSize(TS.model.user,TS.model.team,TS.model.channels,TS.model.members,TS.model.user_groups,TS.model.mpim,TS.model.ims,TS.model.bots,TS.model.apps,TS.model.files,_.filter(TS.model.groups,function(e){return!e.is_archived}),_.filter(TS.model.members,"is_bot"))}})})()},11180:function(e,n){(function(){TS.registerModule("statsd",{onStart:function e(){var n=3e4;var a=5e3;var t=Math.floor(Math.random()*a);setInterval(o,n+t);$(window).on("beforeunload",o)},count:function e(n,a){_.isUndefined(a)&&(a=1);t(n,"count",a)},timing:function e(n,a){t(n,"timing",a)},flush:function e(){o()},mark:function e(n){TS.metrics.mark(n)},clearMarks:function e(n){TS.metrics.clearMarks(n)},measure:function e(n,a,t){var o=TS.metrics.measure(n,a,t,{ephemeral:true});if(_.isNaN(o)||_.isUndefined(o))return;TS.statsd.timing(n,o);return o},measureAndClear:function e(n,a){var t=TS.statsd.measure(n,a);TS.statsd.clearMarks(a);return t},test:function e(){var n={getStats:function e(){return a},reset:function e(){a=[]}};Object.defineProperty(n,"_record",{get:function e(){return t},set:function e(n){t=n}});Object.defineProperty(n,"_sendDataAndEmptyQueue",{get:function e(){return o},set:function e(n){o=n}});return n}});var e=2e3;var n;var a=[];var t=function e(n,t,o){var r;if("count"===t){r=" (count)";o=_.round(o,0)}else{if("timing"!==t){TS.error("TS.statsd._record called with invalid type: "+t);return}r="ms";o=_.round(o,3)}i(n)&&TS.info("[STATSD "+t.toUpperCase()+"] "+n+": "+o+r);a.push({stat:n,type:t,value:o})};var o=function n(){if(!a.length)return;var t=[];var o=[];var s="";var l=function e(n){return r()+"?stats="+encodeURIComponent(JSON.stringify(n))};a.forEach(function(n){o.push(n);s=l(o);if(s.length>e){o.pop();t.push(l(o));o=[n]}});t.push(l(o));t.forEach(function(e){var n=new Image;n.src=e});i()&&TS.info("[STATSD] Sending data: "+JSON.stringify(a));a=[]};var r=function e(){if(n)return n;if(TS.environment.is_dev){var a=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];n="https://"+a+".slack.com/beacon/statsd"}else n=location.host.match(/staging.slack.com/)?"https://staging.slack.com/beacon/statsd":"https://slack.com/beacon/statsd";return n};var i=function e(n){if(!n)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===n||true===TS.statsd.log||TS.statsd.log===n||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(n)}})()},11181:function(e,n){(function(){TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_group_opens:{},requested_mpim_opens:{},requested_channel_joins:{},archives_and_recreated_groups:{},last_team_name:"",last_team_domain:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,initial_explore_view:false,RESERVED_USERNAMES:["all","archive","archived","archives","channel","channels","create","delete","deleted-channel","edit","everyone","general","group","groups","here","me","ms","slack","slackbot","today","you","canal","aqu\xed","todos","m\xed","grupo","hier","alle","mir","gruppe","cha\xeene","chaine","ici","tous","moi","groupe","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1","\u81ea\u5206","\u30b0\u30eb\u30fc\u30d7"],RESERVED_KEYWORDS:["channel","here","everyone","slackbot","canal","aqu\xed","todos","hier","alle","cha\xeene","chaine","ici","tous","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1"],BROADCAST_KEYWORDS:[{id:"BKeveryone",ms_name:"everyone",cmd:"<!everyone>",name:TS.interop.i18n.t("everyone","broadcast_keywords")(),description:TS.interop.i18n.t("Notify everyone in your workspace.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKchannel",ms_name:"channel",alias:"group",cmd:"<!channel>",name:TS.interop.i18n.t("channel","broadcast_keywords")(),description:TS.interop.i18n.t("Notify everyone in this channel.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKhere",ms_name:"here",cmd:"<!here|@here>",name:TS.interop.i18n.t("here","broadcast_keywords")(),description:TS.interop.i18n.t("Notify every online desktop-using member in this channel.","broadcast_keywords")(),is_broadcast_keyword:true}],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.interop.i18n.t("All Unreads","model")(),is_view:true},{id:"Vall_threads",name:TS.interop.i18n.t("Threads","threads")(),alt_names:[TS.interop.i18n.t("All Threads","threads")(),TS.interop.i18n.t("New Threads","threads")()],is_view:true},{id:"Vapp_space",name:TS.interop.i18n.t("Apps","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:false,ds_asleep:false,ds_connected:false,ds_connecting:false,ds_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:{},emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,highlight_words:null,highlight_words_regex:null,everyone_regex:/<!everyone\b/,channel_regex:/<!channel\b/,group_regex:/<!group\b/,here_regex:/<!here\b/,your_user_group_regex:{},channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,ds_reconnect_ms:0,ds_reconnect_time:0,rtd_start_throttler:0,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},last_net_send:0,previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:21,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,msg_preview_showing:false,archive_view_is_showing:false,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,explore_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],ds_conn_log:[],mac_ssb_version:TSSSB.env.mac_ssb_version,mac_ssb_version_minor:TSSSB.env.mac_ssb_version_minor,mac_ssb_build:TSSSB.env.mac_ssb_build,win_ssb_version:TSSSB.env.win_ssb_version,win_ssb_version_minor:TSSSB.env.win_ssb_version_minor,lin_ssb_version:TSSSB.env.lin_ssb_version,lin_ssb_version_minor:TSSSB.env.lin_ssb_version_minor,desktop_app_version:TSSSB.env.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.interop.i18n.t("All File Types","model")(),posts:TS.interop.i18n.t("Posts","model")(),spaces:TS.interop.i18n.t("Posts","model")(),docs:"Arugula",snippets:TS.interop.i18n.t("Snippets","model")(),emails:TS.interop.i18n.t("Emails","model")(),images:TS.interop.i18n.t("Images","model")(),videos:TS.interop.i18n.t("Videos","model")(),pdfs:TS.interop.i18n.t("PDF Files","model")(),spreadsheets:TS.interop.i18n.t("Spreadsheets","model")(),gdocs:TS.interop.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()),msgs_are_auto_scrolling:false,is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_complex_customs:null,emoji_menu_columns:9,emoji_menu_colors:6,frecency_jumper:{},pdf_viewer_enabled:true,onStart:function e(){var n=[];TS.model.is_electron&&TS.model.is_mac&&TSSSB.call("isMainWindowFrameless")&&n.push("is_electron_mac");TS.model.is_electron&&n.push("is_electron");$("html").addClass(n.join(" "));TS.model.supports_growl_subtitle=!!(TS.model.mac_ssb_version&&TS.interop.environment.isSSBAndAtLeastVersion("2.2"));var a=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return a},set:function e(n){a=n;TSSSB.call("dialogIsShowing",n)},enumerable:true,configurable:true});TS.model.supports_voice_calls=false;var t=!TS.interop.environment.isSSBAndAtLeastVersion("2.5.2");if(window.winssb){TS.model.supports_voice_calls=!!(winssb.screenhero||winssb.calls||!t);TS.model.win_ssb_version&&TS.model.win_ssb_version<2&&(TS.model.supports_voice_calls=false)}else TS.model.is_chrome_desktop&&(TS.model.supports_voice_calls=true);TS.model.supports_video_calls=false;TS.model.supports_screen_sharing=false;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.winssb){if(winssb.calls&&winssb.calls.requestCapabilities){var o=winssb.calls.requestCapabilities();if(o){o.supports_video&&(TS.model.supports_video_calls=true);o.supports_screen_sharing&&winssb.stats&&winssb.stats.getDisplayInformation&&(TS.model.supports_screen_sharing=true);o.supports_screenhero&&!o.is_mas&&(TS.model.supports_screenhero=true);o.supports_mmap_minipanel&&(TS.model.supports_mmap_minipanel_calls=true)}}}else TS.model.is_chrome_desktop&&(TS.model.supports_video_calls=true);if(!t){TS.model.supports_video_calls=true;TS.model.supports_screen_sharing=true}TS.model.supports_spaces_in_windows=false;window.winssb&&winssb.window&&winssb.window.list&&(TS.model.supports_spaces_in_windows=true);TS.boot_data.special_flex_panes&&_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});var r=TS.storage.fetchExpandableState();TS.model.expandable_state=r},addProfilingKeyTime:function e(n,a){if(!a||!n)return;TS.model.profiling_key_times||(TS.model.profiling_key_times=[]);TS.model.profiling_key_times.push({name:n,ms:a})},incrementUnknownIdHandled:function n(a){e[a]=e[a]||{tries:0,state:0};var t=e[a];t.tries+=1;t.state=0;t.tries>2?TS.maybeError(48,'calling the API for id: "'+a+'", try #'+t.tries):t.tries>1?TS.maybeWarn(48,'calling the API for id: "'+a+'", try #'+t.tries):TS.log(48,'calling the API for id: "'+a+'", try #'+t.tries);return t.tries},reportResultOfUnknownIdHandled:function n(a,t){var o=e[a];if(!o)return;o.state=t?1:-1;1==o.state?TS.log(48,'API call for id: "'+a+'" SUCCEEDED, try #'+o.tries):TS.maybeWarn(48,'API call for id: "'+a+'" FAILED, try #'+o.tries)},logUnknownIdsHandled:function e(n,t){var o=a(n,t);TS.info("_unknown_ids_handled: "+JSON.stringify(o,null,2))},getUnknownIdsHandled:function e(n,t){return a(n,t)},test:function e(){return{getOSXVersion:o,isWin7Plus:t,sniffUserAgent:r}},getBroadcastKeywordById:function e(n){var a=_.find(TS.model.BROADCAST_KEYWORDS,{id:n});if(!a){TS.warn("no broadcast_keyword ob found for "+n);return}return a},getViewById:function e(n){var a=_.find(TS.model.NAMED_VIEWS,{id:n});if(!a){TS.warn("no view ob found for "+n);return}return a},isSSB:function e(){return TS.model.is_our_app},getAtChannelRegExp:function e(){return TS.model.channel_regex},getAtEveryoneRegExp:function e(){return TS.model.everyone_regex},getAtGroupRegExp:function e(){return TS.model.group_regex},getAtHereRegExp:function e(){return TS.model.here_regex},getYourUserGroupRegExp:function e(){return TS.model.your_user_group_regex}});_.merge(TS.model,r(navigator.userAgent));var e={};var n=[-1,0,1];var a=function a(t,o){t=parseInt(t,10)||1;o=_.includes(n,o)?o:"any";var r={};Object.keys(e).forEach(function(n){var a=e[n];if(t>a.tries)return;if("any"!==o&&a.state!=o)return;r[n]=e[n]});return{state:o,min_tries:t,count:Object.keys(r).length,obs:r}};function t(e){var n=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!n||n.length<2)return false;return parseInt(n[1],10)>=6}function o(e){var n=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);n||(n=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/));if(!n||!n[1])return 0;return n[1].replace("_",".")}function r(e){var n=/(OS X)/g.test(e);var a=-1!==e.indexOf("Windows");var r=/(WOW64|Win64)/g.test(e);var i=-1!==e.indexOf("Linux");var s=-1!==e.indexOf("CrOS");var l=/(iPad|iPhone|iPod)/g.test(e);var _=/(Android)/g.test(e);var c=/(Edge)/g.test(e);var d=/(Chrome)/g.test(e)&&!c;var u=d&&(l||_);var m=/(Slack)/g.test(e);var f=/(MSIE|Trident)/g.test(e);var g=/(Firefox)/g.test(e);var p=/(Safari)/g.test(e);var h=/(AtomShell)/g.test(e);return{is_iOS:l,is_IE:f,is_FF:g,is_edge:c,is_chrome_desktop:d&&!u&&!m,is_chrome_mobile:u,is_safari_desktop:p&&!d&&n&&!l,is_mac:n,mac_version:o(e)||void 0,is_win:a,is_win_64:r,is_win_7_plus:t(e),is_lin:i,is_cros:s,is_our_app:m,is_electron:h}}})()},11182:function(e,n){(function(){TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();r();d()},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var n={_decoratePageWithSupport:r,_initialSetup:c};Object.defineProperty(n,"cssPropertySupported",{get:function e(){return i},set:function e(n){i=n}});Object.defineProperty(n,"cssValueSupported",{get:function e(){return s},set:function e(n){s=n}});return n}});var e=["-webkit-","-moz-","-o-","-ms-",""];var n=["Webkit","Moz","O","ms",""];var a=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var t=new RegExp("^("+n.slice(0,n.length-1).join("|")+")");function o(){return window.devicePixelRatio>1}function r(){var e=["is_apple_webkit","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_line_clamp"];var n=_.partition(e,function(e){return TS.environment[e]});var a=$("html");a.addClass(n[0].join(" "));a.removeClass(n[1].join(" "))}function i(e){if("scrollbar"===e)return u();var o=document.createElement("css_property_supported").style;e=e.replace(t,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(a,"").toLowerCase();e=_.camelCase(e,"-");var r=_.upperFirst(e);if(void 0!==o[e])return true;return n.some(function(n){return void 0!==o[n+r]||void 0!==o[n+e]})}function s(n,t){var o=document.createElement("css_value_supported");t=t.replace(a,"").toLowerCase();o.style.cssText=n+":"+e.join(t+";"+n+":")+t+";";return!!o.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");"Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&o()&&(TS.environment.supports_sticky_position=false);TS.redux.dispatch(TS.interop.redux.models.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_retina=o();TS.environment.supports_custom_scrollbar=i("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_line_clamp=i("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function d(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=o();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();r()})}}function u(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth===10;document.body.removeChild(e);return n}})()},11183:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("ssb",{teams_did_load_sig:new signals.Signal,onStart:function e(){TS.files&&TS.files.team_file_deleted_sig.add(o)},openNewFileWindow:function e(n,a,o){d&&TS.log(d,"TS.ssb.openNewFileWindow url: "+a);if(TS.client)return TS.client.windows.openFileWindow(n.id,o);if(window.is_in_ssb){TS.ssb.upsertFileInSSBParentWin(n);if(document.ssb_main){if(document.ssb_main.TS)return document.ssb_main.TS.client.windows.openFileWindow(n.id,a);return true}if(window.winssb&&window.opener&&window.opener.executeJavaScript){d&&TS.log(d,"calling _executeInAtomSSBParentWin for TS.client.windows.openFileWindow");i("TS.client.windows.openFileWindow("+t(n.id)+", "+t(a)+");");return true}}return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(n){_(n,"window.is_in_ssb = true;");TS.shouldLog(438)&&!n._has_console&&(n._has_console=1)},upsertFileInSSBParentWin:function e(a){if(!TS.web)return;if(document.ssb_main)document.ssb_main.TS&&document.ssb_main.TS.files.upsertAndSignal(a);else if(window.winssb&&window.opener&&window.opener.executeJavaScript){d&&TS.log(d,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");i("TS.files.upsertAndSignal("+n(a)+");")}},toggleMuteInWin:function n(a,t,o){d&&TS.log(d,"toggleMuteInWin called with token: "+a);if(!TS.client)return;var r=TS.client.windows.getWinByToken(a);if(!r){TS.error("toggleMuteInWin called with bad token: "+a);return}_(r,"window.toggleMute("+e(t)+");",o)},teamsDidLoad:function e(){TS.ssb.teams_did_load_sig.dispatch()},distributeMsgToWin:function e(a,t){d&&TS.log(d,"distributeMsgToWin called with token: "+a);if(!TS.client)return;var o=TS.client.windows.getWinByToken(a);if(!o){TS.error("distributeMsgToWin called with bad token: "+a);return}_(o,"TS.redux.dispatch(TS.interop.redux.features.socket.socketMessageReceived(("+n(t)+"));")}});var e=function e(n){return(!!n).toString()};var n=function e(n){return"JSON.parse('"+JSON.stringify(n||null)+"')"};var t=function e(n){n=String(n);n=n.replace(/"/g,'\\"');return'"'+n+'"'};var o=function e(n){if(!n)return;if(!TS.client)return;var a=TS.client.windows.getWinByProp("file_id",n.id);if(!a)return;setTimeout(function(){_(a,"window.TS.files.team_file_deleted_sig.dispatch(TS.files.getFileById("+t(n.id)+"));")},1e3)};var r=[];var i=function e(n,a){return TSSSB.call("executeJavaScriptInParentWindow",{code:n,callback:a})};var s=function e(n,t){d&&TS.log(d,'CALLING _executeInAtomSSBParentWin\n\n"'+n+'"');var o=function n(){r.shift();r.length&&e.apply(null,r[0])};var i=2e3;var s=1;var l=2;var _=function e(){var r=setTimeout(function(){s+=1;if(s>l){TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\ndid not get a callback in '+i+"ms, bailing");o()}else{TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var _=TSSSB.call("executeJavaScriptInParentWindow",{code:n,callback:function e(i,l){clearTimeout(r);if(i)TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\nreturned err: '+i);else{var _="object"===("undefined"===typeof l?"undefined":a(l))?JSON.stringify(l,null,2):l;var c=1==s?438:0;TS.log(c,'_executeInAtomSSBParentWin\n\n"'+n+'"\n\nreturned data: '+_)}t&&t(i,l);setTimeout(o,0)}});d&&TS.log(d,'CALLED _executeInAtomSSBParentWin\n\n"'+n+'"\n\n ret: '+_);return _};var c=_();return!!c};var l=[];var _=function e(n,a,t){return TSSSB.call("executeJavaScriptInWindow",{window_token:n.token,code:a,callback:t})};var c=function e(n,t,o){d&&TS.log(d,"CALLING _executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"');var r=function n(){l.shift();l.length&&e.apply(null,l[0])};var i=2e3;var s=1;var _=2;var c=function e(){var l=setTimeout(function(){s+=1;if(s>_){TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, bailing");r()}else{TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var c=TSSSB.call("executeJavaScriptInWindow",{window_token:n.token,code:t,callback:function e(i,_){clearTimeout(l);if(i)TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\nreturned err: '+i);else{var c="object"===("undefined"===typeof _?"undefined":a(_))?JSON.stringify(_,null,2):_;var u=1==s?438:0;d&&TS.log(u,"_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\nreturned data: '+c)}o&&o(i,_);setTimeout(r,0)}});d&&TS.log(d,"CALLED _executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\n ret: '+c);return c};var u=c();return!!u};var d=438})()},11184:function(e,n){(function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);$("html").bind("mousedown",function(){TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Mousedown while !is_window_focused");TS.ui.onWindowFocus({target:window})});var a=!!(document.hasFocus&&document.hasFocus());a?TS.ui.onWindowFocus({target:window}):TS.ui.onWindowBlur({target:window});TS.model.win_ssb_version&&$("body").addClass("winssb");n()},setUpWindowUnloadHandlers:function e(){"undefined"!==typeof window.addEventListener?window.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof document.addEventListener?document.addEventListener("beforeunload",TS.ui.onWindowUnload,false):"undefined"!==typeof window.attachEvent?window.attachEvent("onbeforeunload",TS.ui.onWindowUnload):"function"===typeof window.onbeforeunload?window.onbeforeunload=function(){TS.ui.onWindowUnload();return false}:window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){TS.client&&TS.client.markLastReadsWithAPI();TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.models.window.setUnloading(true))},maybeTickleMS:function e(){if(!TS.client)return;TS.client.ui.maybeTickleMS()},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(n){TS.ui.file_share.handleDropFromWinSSB(n)},teamSelectionChanged:function e(){if(!window.desktop||!window.desktop.reduxHelper||!_.isFunction(window.desktop.reduxHelper.isSelectedTeam))return;if(TS.interop.environment.isSSBAndAtLeastVersion("3.2.0"))return;var n=window.desktop.reduxHelper.isSelectedTeam();TS.interop.console.info("FOCUS-EVENT","Team selection changed ("+n+")");n?a():t()},onWindowFocus:function e(n){if(n.target!==window&&n.target!==document)return;TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Window focused");a()},onWindowBlur:function e(n){if(n.target!==window&&n.target!==document)return;TS.interop.console.info("FOCUS-EVENT","Window blurred");t()},needToShowAtChannelWarning:function e(n,a){var t;var o=TS.format.cleanMsg(a);var r=TS.model.everyone_regex.test(o);var i=TS.model.channel_regex.test(o);var s=TS.model.group_regex.test(o);var l=!!TS.prefs.getPref("last_seen_at_channel_warning");var _=new Date(TS.prefs.getPref("last_seen_at_channel_warning"));var c=l&&TS.interop.datetime.isSameDay(_,new Date);if(!r&&!i&&!s)return false;t=TS.redux.channels.getEntityById(n);if(!t||t.is_im)return false;if((i||s)&&!TS.permissions.members.canAtChannelOrGroup(t.id))return false;if(t.is_general&&r&&!TS.permissions.members.canAtMentionEveryone(t.id))return false;if("never"===TS.prefs.getTeamPref("warn_before_at_channel"))return false;if("once"===TS.prefs.getTeamPref("warn_before_at_channel")&&l)return false;if("daily"===TS.prefs.getTeamPref("warn_before_at_channel")&&c)return false;return true},needToBlockAtChannelKeyword:function e(n,a,t){if(TS.interop.utility.looksLikeMemberId(t))return false;var o=TS.format.cleanMsg(n);var r=t&&TS.redux.channels.getEntityById(t);var i=r&&!r.is_im&&!r.is_mpim||a&&(a.channels.length||a.groups.length);if(!i)return false;var s=TS.model.everyone_regex.test(o);var l=TS.model.here_regex.test(o);var _=TS.model.channel_regex.test(o);var c=TS.model.group_regex.test(o);var d=false;if(r)d=!!r.is_general;else if(a&&0===a.groups.length&&1===a.channels.length){var u=TS.interop.channels.getChannelById(a.channels[0]);d=!!u.is_general}if(TS.boot_data.feature_file_threads&&!d&&s)return"@everyone";if(d&&s&&!l&&!_&&!c&&TS.permissions.members.canAtMentionEveryone(t))return false;if(!TS.permissions.members.canAtChannelOrGroup(t)){if(l)return"@here";if(_)return"@channel";if(c)return"@group";if(s)return"@everyone"}var m=r&&r.is_general;!m&&a&&a.channels&&a.channels.forEach(function(e){var n=TS.interop.channels.getChannelById(e);n&&n.is_general&&(m=true)});if(m&&!TS.permissions.members.canAtMentionEveryone(t)&&(s||l||c||_)){if(TS.boot_data.feature_file_threads){if(l)return"@here";if(_)return"@channel";if(c)return"@group";if(s)return"@everyone"}return"@everyone"}return false},startButtonSpinner:function n(a){TS.ui.resetButtonSpinner(a);var t=e(a);t.isLoading()||t.start()},stopButtonSpinner:function n(a,t){var o=e(a);if(o.isLoading()){o.stop();if(t){var r=$(a).find(".ladda-label").text();$(a).data("original_text",r);$(a).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.interop.i18n.t("Saved","ui")())}}},resetButtonSpinner:function n(a){var t=e(a);if(t.isLoading())return;var o=$(a).data("original_text");if(o){$(a).find(".ladda-label").text(o);$(a).removeData("original_text");$(a).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var n="version_info";var a=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.interop.i18n.t("Version Info","ui")(),unique:n,body:TS.interop.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:a}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.interop.i18n.t("Close","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.api.callImmediately("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=n)return;var a=TS.generic_dialog.div.find(".latest_version");a.removeClass("checking");var t=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(t)a.html(TS.interop.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.emoji.graphicReplace(":tada:")}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var o=e.data.min_version_ts>TS.boot_data.version_ts;o?a.html(TS.interop.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")})):a.html(TS.interop.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else{if("light"!==TS.prefs.getPref("theme")){TS.error("no theme?");return}$("body").addClass("light_theme")}TS.prefs.getPref("avatars")?$("body").removeClass("no_avatars"):$("body").addClass("no_avatars")}});var e=function e(n){var a=$(n).data("ladda");if(!a){a=Ladda.create(n);$(n).data("ladda",a)}return a};var n=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;var a=!!n.closest("#fs_modal").length||$(this).data("flat");n.pickmeup({flat:a,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){n.trigger("input")},title_format:"ja-JP"===TS.interop.i18n.locale?"Y\u5e74B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(a){var t=n.data("picker");if(!t){t=$('<div class="position_relative no_margin no_padding"></div>');n.data("picker",t)}n.after(t.append(n.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;window.document.activeElement===e.target&&n.pickmeup("hide")})};var a=function e(){if(TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;TS.view&&TS.view.updateTitleBarColor();TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(true))};var t=function e(){if(!TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(false))}})()},11185:function(e,n){(function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(n){TS.info("handleDropFromWinSSB called files:"+n);$("body").removeClass("drop-target");if(TS.client.ui.checkForEditing())return;if(!n||!n.length){TS.warn("handleDropFromWinSSB called with no files");return}TS.client.ui.files.validateFiles(n,TS.model.shift_key_pressed)},preselected:[],bindFileShareDropdowns:function t(i,s,l,c){var d=$("#select_share_channels");var u="60%";TS.web&&TS.web.space&&(u="100%");if(1!=d.length){alert("error: "+d.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=l||[];n=s;a=i;var m=TS.ui.file_share.promiseToGetFileShareSelectOptions;c&&(m=r);e={append:true,single:true,data_promise:m,approx_item_height:30,tab_to_nav:true,placeholder_text:TS.interop.i18n.t("Search channels and people ...","files"),template:function e(n){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:n.model_ob}))},onItemAdded:o,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(n,a){if(a.create_channel){n.html(TS.interop.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:TS.interop.i18n.safeString(_.escape(a.label))}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");n.html(_.escape(a.label)).removeClass("new_channel_not_found")},setValue:function e(n){var a;var t;var o=this.data.length;var r;for(a=0;a<o;a+=1){r=this.data[a].children.length;for(t=0;t<r;t+=1)if(this.data[a].children[t].model_ob.id===n){this.$container.find('.lfs_item[data-lfs-id="'+[a,t]+'"]').trigger("click");return}}}};d.lazyFilterSelect(e);d.css({width:u});d.one("remove",function(){a=false;$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){13==e.keyCode&&e.stopPropagation()});d.lazyFilterSelect("getInstance").current_items_in_view_signal.add(function(e){var n=e.filter(function(e){return e.model_ob&&Object.prototype.hasOwnProperty.call(e.model_ob,"presence")}).map(function(e){return e.model_ob.id});TS.presence_manager.queryMemberPresence(n)})},promiseToGetFileShareSelectOptions:function e(n){var t=i();return TS.searcher.search(n,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var o=false;e.all_items_fetched=true;e.filter(function(e){return TS.interop.utility.looksLikeMemberId(e.model_ob.id)?TS.permissions.members.canUserSeeMember(e.model_ob):TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=s(e.model_ob.id,t);e.preselected&&(o=true)});var r=false;t&&(TS.interop.utility.looksLikeMemberId(t)?r=TS.redux.channels.getImByMemberId(t):TS.interop.utility.looksLikeChannelId(t)&&(r=TS.redux.channels.getEntityById(t)));if(!n&&!o&&r)if(_.get(r,"is_im")){var i=TS.interop.members.getMemberById(r.user);e.push({preselected:true,lfs_id:i.id,model_ob:i})}else r&&TS.permissions.members.canPostInChannel(r)&&e.push({preselected:true,lfs_id:r.id,model_ob:r});if(r){TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(a,r);l(r)}var c=_(e).map("model_ob").filter(function(e){return _.get(e,"id")}).filter(TS.interop.utility.looksLikeMemberId).compact().value();TS.presence_manager.queryMemberPresence(c);return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){$(this).prop("checked")?$(".file_share_select").prop("disabled",false):$(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(n){var a=TS.utility.contenteditable.value($("#file_comment_textarea"));var o;var r=$("#select_share_channels").lazyFilterSelect("value")[0];var i;r&&(o=r.model_ob.id||"");var s=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(o,a)){var l=TS.format.cleanMsg(a);var c="";var d=true;TS.model.everyone_regex.test(l)?c="everyone":TS.model.channel_regex.test(l)?c="channel":TS.model.group_regex.test(l)&&(c="group");var u=TS.redux.channels.getEntityById(o);u&&!u.is_im||(d=false);if(d&&!t(u)&&!n){var m=TS.interop.memberCounts.getOrFetchMemberCounts(u.id);if(m.promise){i=0;m.promise.then(TS.ui.file_share.updateAtChannelWarningNote);d=false}else{i=_.get(m,"counts.member_count",1);i-=1}}var f=[];if(_.isUndefined(i)&&d&&u&&!u.is_im){f=_(u.members).map(TS.interop.members.getMemberById).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.interop.members.memberSorterByName).value();f.length<1&&(d=false)}if(d){var g=TS.templates.at_channel_warning_note({keyword:c,member_count:_.isUndefined(i)?f.length:i});s.html(g);s.removeClass("hidden");return}}s.addClass("hidden")},updateAtChannelBlockedNote:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var a;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");t&&r&&(a=t.model_ob.id);var i=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;TS.interop.utility.looksLikeMemberId(a)||(l=TS.ui.needToBlockAtChannelKeyword(n,null,a));if(l){i.html(TS.templates.at_channel_blocked_note({keyword:l}));i.removeClass("hidden");s.addClass("disabled")}else{i.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var a;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");t&&r&&(a=t.model_ob.id);var i;TS.interop.utility.looksLikeMemberId(a)||(i=TS.ui.needToBlockAtChannelKeyword(n,null,a));if(i){TS.info("Can't submit dialog because comment contains "+i);return true}return false},fileShowPublicUrlDialog:function e(n){var a=c(n);if(!a||!a.public_url_shared)return;var t=$('<input type="text" id="public_url" class="full_width small">').attr("value",a.permalink_public)[0].outerHTML;var o;o=TS.boot_data.feature_external_files?TS.interop.i18n.t('External link to this file <p style="display: inline-block;font-weight: 400"> (shareable with anyone) </p>',"files")():TS.interop.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:o,body:t,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.interop.i18n.t("Revoke","files")(),show_go_button:true,go_button_text:TS.interop.i18n.t("Done","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(a.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){e.which==TS.utility.keymap.esc&&TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(n){var a=TS.files.getFileById(n);if(!a)return false;var t;var o;if(TS.boot_data.feature_external_files){t=TS.interop.i18n.t("Revoke external file link","files")();o='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the external link for this file. Any previously shared links will stop working.<br /><br />Are you sure you want to revoke this link?","files")()+"</p>"}else{t=TS.interop.i18n.t("Revoke public file link","files")();o='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>"}TS.generic_dialog.start({title:t,body:o,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:a.id,public_url_shared:false});TS.api.callImmediately("files.revokePublicURL",{file:a.id})}})},test:function e(){var e={};Object.defineProperty(e,"_author",{get:function e(){return a},set:function e(n){a=n}});Object.defineProperty(e,"_populateDisabledInputMsg",{get:function e(){return l},set:function e(n){l=n}});Object.defineProperty(e,"_haveAllMembersForModelOb",{get:function e(){return t},set:function e(n){t=n}});return e}});var e={};var n=false;var a=false;var t=function e(n){if(n.is_channel&&!n.is_group)return false;var a=n.members||[n.user];var t=_.map(TS.model.members,"id");return!_.difference(a,t).length};var o=function e(n){$("#select_share_channels .lfs_input_container").removeClass("error");if(n.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Next","files")());TS.metrics.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.interop.i18n.t("Share","files")());var t;t=n.model_ob.id;if(!t)return;$("#share_model_ob_id").val(t);$("#select_share_channel_warning, #select_share_channels_join_note").addClass("hidden");var o=n.model_ob||{};TS.interop.utility.looksLikeMemberId(o.id)&&(o=TS.redux.channels.getImByMemberId(o.id)||o);TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(a,o);l(o);var r=TS.interop.rules.channels.isExternallySharedChannel(o)||a&&TS.interop.members.isExternal(a);if(r){$('label[for="file_comment_textarea"]').addClass("subtle_silver");TS.utility.contenteditable.disable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").addClass("subtle_silver")}else{$('label[for="file_comment_textarea"]').removeClass("subtle_silver");TS.utility.contenteditable.enable($("#file_sharing_div #file_comment_textarea"));$("#select_share_at_channel_list").removeClass("subtle_silver")}if(TS.interop.rules.channels.isExternallySharedChannel(o)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(o)&&o.shared_team_ids&&o.shared_team_ids.length){$("#select_share_channel_warning").removeClass("hidden");var i=TS.interop.i18n.listify(_.map(o.shared_team_ids,TS.teams.getTeamNameById)).join("");$("#select_share_channel_warning_text").html(TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of <strong>{shared_teams_list}</strong>.","shared_channels")({shared_teams_list:i}))}if(o.is_im||o.is_mpim)$("#share_context_label").text(TS.interop.i18n.t("Share with","files")());else{$("#share_context_label").text(TS.interop.i18n.t("Share in","files")());o.is_channel&&!o.is_member&&$("#select_share_channels_join_note").removeClass("hidden")}$("#share_cb").prop("checked",true);if(!r){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()}};var r=function e(n){return TS.ui.file_share.promiseToGetFileShareSelectOptions(n).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var a=TS.utility.channels.getPermissibleChannelName(n);if(a){e.push({lfs_group:true,label:n,create_channel:true,children:[{lfs_id:"c."+a,model_ob:{create_channel:true,name:a}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.metrics.count("share_picker_create_shown")}}return e})};var i=function e(){if(TS.client&&TS.client.activeChannelIsHidden()){if(n)return n.id}else{var a=TS.shared.legacyGetActiveModelOb();if(a)return a.id}if(TS.web&&TS.web.space)return TS.web.space.getOriginChannel();return null};var s=function e(n,a){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(n)>-1:n===a};var l=function e(n){if(!_.isObject(n))return;TS.interop.utility.looksLikeMemberId(n.id)&&(n=TS.redux.channels.getImByMemberId(n.id)||n);var t="";t=a&&TS.interop.members.isExternal(a)?TS.interop.i18n.t("Only members of {team_name} can comment on this file.","shared_channels")({team_name:TS.teams.getTeamNameByMember(a)}):n.is_channel||n.is_group?TS.interop.i18n.t("Comments are disabled in shared channels.","shared_channels")():TS.interop.i18n.t("Comments are disabled when sharing with another\xa0workspace.","shared_channels")();$("#file_comment_textarea").attr("data-disabled-text",t)};var c=function e(n){return _.isString(n)?TS.files.getFileById(n):n}})()},9889:function(e,n){(function(){TS.registerModule("i18n",{onStart:function e(){TS.interop.i18n.getReverseKeyCodeMap();if(TS.prefs){TS.prefs.keyboard_changed_sig.add(i);setTimeout(a,0)}TS.generic_notification_banner&&TS.generic_notification_banner.banner_to_show_sig.add(t);window.signals?TS.i18n.keyboard_changed_sig=new signals.Signal:TS.i18n.keyboard_changed_sig={add:function e(){},remove:function e(){},dispatch:function e(){}}},keyboard:function n(){if(!e)if(TS.interop.desktop.canAutoGetKeyboard()){e=TS.interop.i18n.normalizeKeyboardFromDesktop(desktop.app.getLocaleInformation().currentKeyboardLayout);desktop.app.onDidChangeKeyboardLayout(r)}else{if(!TS.prefs.prefs_loaded)return"en-US";e=TS.prefs.getPref("keyboard")||"en-US"}return e},sendButtonEnabled:function e(){return(TS.interop.i18n.localeSupportsSendButton()||TS.boot_data.feature_send_button_for_everyone)&&TS.prefs&&TS.prefs.getPref("msg_input_send_btn")},setUpStaticTranslations:function e(){return o()},getStaticTranslation:function e(n,a){if(!s())return null;var t=TS.storage.fetchStaticTranslations();var o=_.get(t,"data."+a);if(!o||!o[n])return null;return o[n]}});var e;var n=0;var a=function e(){if(TS.client&&!TS.prefs.getPref("seen_locale_change_message")){if(window.desktop&&void 0===window.teamId&&n<100){n+=1;setTimeout(e,50);return}if(!window.desktop||window.desktop.reduxHelper&&window.desktop.reduxHelper.isSelectedTeam&&window.desktop.reduxHelper.isSelectedTeam())TS.api.call("slackbot.sendLocalizationMessage");else{TS.prefs.setPrefLocal("seen_locale_change_message",2);TS.prefs.setPrefByAPI({name:"seen_locale_change_message",value:2})}}};var t=function e(n){if("i18n_japan_beta_send_btn_banner"===n.name&&TS.interop.i18n.localeSupportsSendButton()&&!TS.prefs.getPref("msg_input_send_btn_auto_set")){var a=function e(){TS.prefs.getPref("msg_input_send_btn_auto_set")||TS.prefs.setPrefByAPI({name:"msg_input_send_btn_auto_set",value:true});TS.prefs.msg_input_send_btn_changed_sig.remove(e);TS.prefs.msg_input_send_btn_auto_set_changed_sig.remove(e);TS.generic_notification_banner.is_showing&&TS.generic_notification_banner.close()};TS.prefs.getPref("msg_input_send_btn")?TS.prefs.msg_input_send_btn_changed_sig.add(a):TS.prefs.setPrefByAPI({name:"msg_input_send_btn",value:true},function(){TS.prefs.msg_input_send_btn_changed_sig.add(a)});TS.prefs.msg_input_send_btn_auto_set_changed_sig.add(a);var t=TS.interop.i18n.t("Just for Japan: a button for sending","send_btn")();var o=TS.interop.i18n.t('Send a message with a quick click, or by pressing {keys}</br>\t\t\tDon\u2018t like the change? You can always switch back in <button id="send_btn_link_prefs" class="{class}">your preferences</button>.',"send_btn")({keys:TS.interop.i18n.safeString('<span class="c-keyboard_key c-keyboard_key--slim">'+(TS.model.is_mac?"\u2318":"Ctrl")+'</span>\n\t\t\t<span class="c-keyboard_key c-keyboard_key--slim">Enter</span>'),class:"btn_link"});TS.generic_notification_banner.start({h1_copy:t,h2_copy:o,show_go_button:true,go_button_text:TS.interop.i18n.t("Got It","send_btn")(),onGo:a,show_go_link_button:false,show_close_button:false});$("#send_btn_link_prefs").on("click",function(){TS.ui.prefs_dialog.start("advanced","#msg_input_send_btn_label");a()})}};var o=function e(){if(s())return Promise.resolve();return TS.api.call("i18n.translations.get").then(function(e){var n=e.data;if(!n||!n.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=n.cache_ts;TS.storage.storeStaticTranslations({data:n,cache_ts:TS.model.static_translations_cache_ts,locale:n.locale})})};var r=function n(a){e=TS.interop.i18n.normalizeKeyboardFromDesktop(a);TS.i18n.keyboard_changed_sig.dispatch()};var i=function n(){if(!TS.model.is_our_app){e=TS.prefs.getPref("keyboard");TS.i18n.keyboard_changed_sig.dispatch()}};var s=function e(){var n=TS.storage.fetchStaticTranslations();if(!n)return false;if(TS.model.static_translations_cache_ts!==n.cache_ts)return false;if(TS.interop.i18n.locale!==n.locale)return false;return true}})()},9905:function(e,n){(function(){TS.registerModule("experiment",{onStart:function a(){e=!!(TS.api&&TS.api.call);n=e?TS.boot_data&&TS.boot_data.feature_modern_api_q?TS.interop.api.callWithDeprecatedHandler:TS.api.call:window.callSlackAPIUnauthed;TS.boot_data&&TS.boot_data.experiment_assignments&&c(TS.boot_data.experiment_assignments)},loadLeadAssignments:function e(n){if(void 0===n){TS.warn&&TS.warn("TS.experiment.loadLeadAssignments requires a lead_id");return Promise.resolve(false)}r||(r=l("experiments.getByLead",{lead_id:n}));return r},loadVisitorAssignments:function e(){s||(s=l("experiments.getByVisitor"));return s},loadUserAssignments:function n(){if(!e){TS.warn&&TS.warn("TS.experiment.loadUserAssignments requires a user to be logged in");return Promise.resolve(false)}i||(i=l("experiments.getByUser"));return i},getGroup:function e(n,t){if(!a[n])return null;a[n].log_exposures&&d(n,a[n]);t&&a[n].group&&t.forEach(function(e){o[e]=o[e]||[];o[e].indexOf(n)<0&&o[e].push(n)});return a[n].group},getExperimentsForMetric:function e(n){var t=o[n];if(!t)return[];return t.map(function(e){return a[e]})},getAllAssignmentsForDebugging:function e(){return a},test:function e(){var n={};Object.defineProperty(n,"_recordAssignments",{get:function e(){return c},set:function e(n){c=n}});Object.defineProperty(n,"_metric_experiments",{get:function e(){return o},set:function e(n){o=n}});return n}});var e;var n;var a={};var t={};var o={};var r;var i;var s;var l=function e(a,t){return new Promise(function(e){n(a,_.extend(TS.interop.url.queryStringParse(location.search.substring(1)),t),function(n,a){n&&a.assignments&&c(a.assignments);e(n)})})};var c=function e(n){var o;for(o in n){_.isEqual(t[o],n[o])||(t[o]=null);a[o]=n[o]}};var d=function e(n,a){if(TS.interop&&TS.interop.clog&&!_.isEqual(t[n],a)){TS.interop.clog.track("EXPERIMENT_EXPOSURE",{experiment_name:n,experiment_type:a.type,experiment_id:a.experiment_id,experiment_group:a.group,experiment_trigger:a.trigger,exposure_id:a.exposure_id});t[n]=a}}})()}},[11174]);