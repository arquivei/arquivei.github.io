webpackJsonp([12,33,74],{1:function(e,t,n){(function(t){e.exports=t["_"]=n(87)}).call(t,n(7))},10066:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1);var i=n.n(r);var a=n(9706);var o=Object(a["c"])("TS.utility.isFocusOnInput",r["noop"]);var s=o},10092:function(e,t){(function(){TS.registerModule("ui.email_healing",{onStart:function e(){n()},test:function e(){return{_correctEmailTypos:r}}});var e=0;var t={};var n=function e(){var t=$("body");t.on("input","[data-email-healing]",_.debounce(r,600));t.on("blur","[data-email-healing]",r)};var r=function n(){var r=this;var a=i(r.value);if(!TS.utility.email.validateEmail(a).is_valid)return;var o=TS.utility.email.correctTypos(a,false);if(!o.typo_corrected)return;var s=r.getAttribute("data-email-healing");if("true"===s){e+=1;s=e;r.setAttribute("data-email-healing",s)}void 0===t[s]&&(t[s]={color:window.getComputedStyle(r).color,orange:this.getAttribute("data-email-healing-typo-color")||"#ffa800",green:this.getAttribute("data-email-healing-corrected-color")||"#2ab27b"});r.style.color=t[s].orange;r.style.transition="color 0.2s ease-out 0s";setTimeout(function(){r.value=o.updated_email;r.style.color=t[s].green;r.style.transition="color 0.2s ease-out 0s"},300);setTimeout(function(){r.style.color=t[s].color;r.style.transition="color 0.6s ease-out 0.3s"},500)};var i=function e(t){if(!t&&0!==t)return"";return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}})()},10093:function(e,t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("utility.email",{ERROR_EMPTY:"empty",ERROR_INVALID:"invalid",ERROR_TOO_MANY:"too_many",EMAIL_REGEX:new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i"),DOMAIN_REGEX:new RegExp("^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$","i"),convertToArray:function e(t){return t.replace(/\s|\n/g,"").replace(/,$/g,"").split(",")},validateEmail:function e(t,n){var i=TS.utility.email.convertToArray(t);return r(i,n)},validateDomain:function e(n){var r=n?TS.utility.email.convertToArray(n):[];return t(r)},correctTypos:function e(t,n){void 0===n&&(n=true);return s(t,n)},removeDuplicates:function e(t){return _.uniq(TS.utility.email.convertToArray(t)).join(",")},getErrorMessage:function t(n,r){return e[n]?e[n](r||{}):""},getTooManyErrorMessage:function t(n){return e[TS.utility.email.ERROR_TOO_MANY]({max_addresses:n})},test:function t(){return{error_messages:e,tld_typo:i,domain_typo:a}}});var e={empty:TS.interop.i18n.t("Please fill in your email.","email_utility"),invalid:TS.interop.i18n.t("Sorry, but that email is invalid.","email_utility"),too_many:TS.interop.i18n.t("Please make your list shorter \u2014 we can check up to {max_addresses} addresses at a time.","email_utility"),invalid_domain:TS.interop.i18n.t("Sorry, but that isn\u2019t a valid email domain.","email_utility")};var t=function t(r){Array.isArray(r)||TS.error("Type error: TS.utility.email._validateDomain requires an array. domain_array is a","undefined"===typeof r?"undefined":n(r));var i=[];_.each(r,function(e){TS.utility.email.DOMAIN_REGEX.test(e)||i.push(e)});if(i.length){var a="invalid_domain";return{is_valid:false,email_domain:r,error_key:a,error_message:e[a](),error_domains:i}}return{is_valid:true,email_domain:r,error_key:"",error_message:""}};var r=function e(t,r){Array.isArray(t)||TS.error("Type error: TS.utility.email._validateEmail requires an array. email_array is a","undefined"===typeof t?"undefined":n(t));var i=0;var a=t.length;var o;var s;var l;if(r&&a>r){s=TS.utility.email.ERROR_TOO_MANY;l=r>1?TS.utility.email.getTooManyErrorMessage(r):TS.utility.email.getErrorMessage(TS.utility.email.ERROR_INVALID);return{is_valid:false,email_array:t,error_key:s,error_message:l}}for(i;i<a;i+=1){o=t[i];i||""!==o?TS.utility.email.EMAIL_REGEX.test(o)||(s=TS.utility.email.ERROR_INVALID):s=TS.utility.email.ERROR_EMPTY;if(s)return{is_valid:false,email_array:t,error_key:s,error_message:TS.utility.email.getErrorMessage(s)}}return{is_valid:true,email_array:t,error_key:"",error_message:""}};var i={cmo:"com",ocm:"com",con:"com","com.com":"com",vom:"com",cim:"com",cpm:"com",ccom:"com",coom:"com",comm:"com",cmm:"com"};var a={gmai:"gmail",gamil:"gmail",gmil:"gmail",gmial:"gmail",gmal:"gmail",gmaill:"gmail",gnail:"gmail",gamail:"gmail",gmsil:"gmail",yhoo:"yahoo",yahooo:"yahoo",yaho:"yahoo",homail:"hotmail",hotmaill:"hotmail",outook:"outlook",outlock:"outlook",otlook:"outlook",outlolk:"outlook"};var o={};var s=function e(t,n){void 0===n&&(n=true);var r=TS.utility.email.convertToArray(t);var i=t;var a=t;r.forEach(function(e){if(!n&&o[e])return;var t=l(e);if(t.has_typo){o[e]=true;i=i.replace(e,t.email_val);a=a.replace(e,t.shadow_val)}});return{typo_corrected:t!==i,shadow_email:a.replace(/\n/g,"<br />"),updated_email:i}};var l=function e(t){var n=t;var r;var o;_.forOwn(i,function(e,i){o=new RegExp("\\."+i+"$");if(o.test(t)){r=true;t=t.replace(o,"."+e);n=n.replace(o,'.<span class="seafoam_green">'+e+"</span>");return false}});_.forOwn(a,function(e,i){o=new RegExp("@"+i+"\\.");if(o.test(t)){r=true;t=t.replace(o,"@"+e+".");n=n.replace(o,'@<span class="seafoam_green">'+e+"</span>.");return false}});return{has_typo:r,email_val:t,shadow_val:n}}})()},11296:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(11297);var i=n.n(r);var a=n(11298);var o=n.n(a);var s=n(11299);var l=n.n(s);var u=n(11300);var c=n.n(u);var f=n(11301);var d=n.n(f);var _=n(11302);var m=n.n(_);var v=n(11303);var g=n.n(v);var p=n(11304);var h=n.n(p);var S=n(9899);var T=n(9891);var y=n.n(T);var b=n(11305);var w=n.n(b);var k=n(11306);var x=n.n(k);var E=n(11307);var C=n.n(E);var O=n(11308);var R=n.n(O);var A=n(11309);var I=n.n(A);var M=n(11310);var j=n.n(M);var F=n(11311);var L=n.n(F);var P=n(11312);var $=n.n(P);var D=n(11313);var N=n.n(D);var B=n(11314);var U=n.n(B);var q=n(11315);var W=n.n(q);var z=n(10092);var H=n.n(z);var G=n(11316);var K=n.n(G);var V=n(11317);var Q=n.n(V);var J=n(11318);var Y=n.n(J);var X=n(11319);var Z=n.n(X);var ee=n(11320);var te=n.n(ee);var ne=n(11321);var re=n.n(ne);var ie=n(11322);var ae=n.n(ie);var oe=n(11323);var se=n.n(oe);var le=n(11324);var ue=n.n(le);var ce=n(11325);var fe=n.n(ce);var de=n(11326);var _e=n.n(de);var me=n(11327);var ve=n.n(me);var ge=n(10093);var pe=n.n(ge);var he=n(11328);var Se=n.n(he);var Te=n(11329);var ye=n.n(Te);var be=n(11330);var we=n.n(be);var ke=n(11331);var xe=n.n(ke);var Ee=n(11332);var Ce=n.n(Ee);var Oe=n(11333);var Re=n.n(Oe);var Ae=n(11334);var Ie=n.n(Ae);var Me=n(11335);var je=n.n(Me);var Fe=n(11336);var Le=n.n(Fe);var Pe=n(11337);var $e=n.n(Pe);var De=n(11338);var Ne=n.n(De);var Be=n(11339);var Ue=n.n(Be);var qe=n(11340);var We=n.n(qe);var ze=n(11341);var He=n.n(ze);var Ge=n(11342);var Ke=n.n(Ge);var Ve=n(11343);var Qe=n.n(Ve);var Je=n(11344);var Ye=n.n(Je);var Xe=n(11345);var Ze=n.n(Xe);var et=n(11346);var tt=n.n(et);var nt=n(11347);var rt=n.n(nt);var it=n(11348);var at=n.n(it);var ot=n(11349);var st=n.n(ot);var lt=n(11350);var ut=n.n(lt);var ct=n(11351);var ft=n.n(ct);var dt=n(11352);var _t=n.n(dt);var mt=n(11353);var vt=n.n(mt)},11297:function(e,t){(function(){TS.registerModule("generic_dialog",{div:null,is_showing:false,current_setting:null,body_template_html:{},Q:[],ladda_go:null,alert:function e(t,n,r){return new Promise(function(e){TS.generic_dialog.start({role:"alertdialog",title:n||"",body:t,show_cancel_button:false,esc_for_ok:true,fullscreen:false,go_button_text:r,onEnd:e})})},graphics:{error:"oops"},dark:function e(n,r,i){return new Promise(function(e){TS.generic_dialog.start({type:"dark",graphic:i||false,title:r||"",body:n,show_close_button:false,show_cancel_button:true,cancel_button_text:t,fullscreen:false,show_go_button:false,onCancel:e})})},start:function e(t){if(t.fullscreen){TS.ui.fs_modal.start(t);return}if(TS.generic_dialog.is_showing){t.unique&&TS.generic_dialog.current_setting.unique==t.unique?TS.info("redundant generic dialog not Qed: "+t.unique):TS.generic_dialog.Q.push(t);return}TS.generic_dialog.current_setting=_.defaults({},t,r);var n=TS.generic_dialog.current_setting;"undefined"===typeof t.show_close_button&&(n.show_close_button=n.show_cancel_button);TS.generic_dialog.div||TS.generic_dialog.build();var i=TS.generic_dialog.div;var a=n.body;if(n.body_template)if(TS.generic_dialog.body_template_html[n.body_template]){a=TS.generic_dialog.body_template_html[n.body_template];n.body&&TS.warn("both body and body_template were passed on settings, using body_template");n.$body&&TS.warn("both $body and body_template were passed on settings, using body_template")}else TS.error(n.body_template+" not found in TS.generic_dialog.body_template_html");n.dialog_class&&i.addClass(n.dialog_class);var o=TS.templates.generic_dialog({title:new Handlebars.SafeString(n.title),body:new Handlebars.SafeString(a),footer_content:n.footer_content?new Handlebars.SafeString(n.footer_content):"",ladda:n.ladda,type:n.type,img:n.graphic});i.empty();i.html(o);n.$body&&i.find(".modal-body").empty().append(n.$body);n.body_cls&&i.find(".modal-body").addClass(n.body_cls);i.find(".close").bind("click",function(){n.show_cancel_button?TS.generic_dialog.cancel():n.esc_for_ok&&TS.generic_dialog.go()});i.find(".dialog_go").click(TS.generic_dialog.go);n.ladda?i.find(".dialog_go .ladda-label").html(n.go_button_text):i.find(".dialog_go").html(n.go_button_text);if(n.show_go_button){i.find(".dialog_go").removeClass("hidden").addClass(n.go_button_class);n.go_button_disabled&&i.find(".dialog_go").prop("disabled",true)}else i.find(".dialog_go").addClass("hidden");i.find(".dialog_secondary_go").click(TS.generic_dialog.secondaryGo);i.find(".dialog_secondary_go").html(n.secondary_go_button_text);n.show_secondary_go_button?i.find(".dialog_secondary_go").removeClass("hidden").addClass(n.secondary_go_button_class):i.find(".dialog_secondary_go").addClass("hidden");i.find(".dialog_cancel").click(TS.generic_dialog.cancel);i.find(".dialog_cancel").html(n.cancel_button_text);i.find(".dialog_cancel").toggleClass("hidden",!n.show_cancel_button);i.find(".close").toggleClass("hidden",!n.show_close_button);n.show_throbber?i.find(".throbber").removeClass("hidden"):i.find(".throbber").addClass("hidden");n.title?i.find(".modal-header").removeClass("hidden"):i.find(".modal-header").addClass("hidden");var s=n.show_go_button||n.show_secondary_go_button||n.show_cancel_button;var l=!s||n.hide_footer;i.find(".modal-footer").toggleClass("hidden",!!l);i.modal("show");n.backdrop_click_to_dismiss&&$(".modal-backdrop").click(function(){TS.generic_dialog.cancel()});"dark"===n.type&&$(".modal-backdrop").addClass("c-modal_backdrop--dark");n.title||n.force_small?i.removeClass("small"):i.addClass("small");!TS.boot_data.feature_accessible_dialogs&&document.activeElement&&document.activeElement!=document.body&&document.activeElement.blur();n.onShow&&n.onShow()},go:function e(){if(!TS.generic_dialog.is_showing){TS.error("not showing?");return}var t=TS.generic_dialog.current_setting;var n=TS.generic_dialog.div;t.onGo?false!==t.onGo()&&n.modal("hide"):n.modal("hide")},secondaryGo:function e(t){if(!TS.generic_dialog.is_showing){TS.error("not showing?");return}var n=TS.generic_dialog.current_setting;var r=TS.generic_dialog.div;n.onSecondaryGo?false!==n.onSecondaryGo(t)&&r.modal("hide"):r.modal("hide")},cancel:function e(){var t=TS.generic_dialog.current_setting;TS.generic_dialog.div.modal("hide");t.onCancel&&t.onCancel()},end:function e(){var t=TS.generic_dialog.current_setting;TS.model.dialog_is_showing=false;TS.generic_dialog.is_showing=false;TS.boot_data.feature_accessible_dialogs||$(document).off("keydown",o);t.$body&&t.$body.detach();TS.generic_dialog.div.empty();t.dialog_class&&TS.generic_dialog.div.removeClass(t.dialog_class);TS.boot_data.feature_accessible_dialogs&&$("#client-ui").attr("aria-hidden",false);t.onEnd&&t.onEnd();TS.generic_dialog.ladda_go=null;if(!TS.generic_dialog.is_showing&&TS.generic_dialog.Q.length){var n=TS.generic_dialog.Q.shift();TS.generic_dialog.start(n)}var r=TS.boot_data.feature_accessible_dialogs&&!TS.generic_dialog.is_showing&&!TS.generic_dialog.Q.length&&TS.generic_dialog.previously_focused;if(r){if(TS.utility.contenteditable.isContenteditable(r)){TS.utility.contenteditable.focus(r);return}try{r.focus()}catch(e){}}TS.generic_dialog.previously_focused=null},build:function e(){var t=TS.generic_dialog.current_setting&&TS.generic_dialog.current_setting.type||"default";var n="onboarding_dialog"===TS.generic_dialog.current_setting.type?"":" fade";$("body").append('<div id="generic_dialog" class="modal c-modal--'+t+n+' hide" data-keyboard="false" data-backdrop="static"></div>');TS.generic_dialog.div=$("#generic_dialog");var r=TS.generic_dialog.div;r.on("hidden",function(e){if(e.target!=this)return;setTimeout(function(){TS.generic_dialog.end();r.removeAttr("data-qa")},200)});r.on("show",function(e){if(e.target!=this)return;TS.model.dialog_is_showing=true;TS.generic_dialog.is_showing=true});r.on("shown",function(e){if(e.target!=this)return;setTimeout(function(){if(!TS.generic_dialog.is_showing)return;var e=TS.generic_dialog.current_setting;TS.boot_data.feature_accessible_dialogs&&$("#client-ui").attr("aria-hidden",true);var t=e.role;var n=l[t]?t:"dialog";r.attr({"data-qa":"generic_dialog_ready"}).find(".title_input").select();TS.boot_data.feature_accessible_dialogs||$(document).on("keydown",o);TS.boot_data.feature_accessible_dialogs&&r.attr("role",n).prepend(u).append(c);var i=TS.boot_data.feature_accessible_dialogs&&e.title&&_.uniqueId("modal-header-");if(i){r.find(".modal-header h3").attr("id",i);r.attr("aria-labelledby",i)}TS.boot_data.feature_accessible_dialogs&&"dialog"==n&&r.find(".modal-body").attr("role","document");var a=TS.boot_data.feature_accessible_dialogs&&"alertdialog"==n&&_.uniqueId("modal-body-");if(a){r.find(".modal-body").attr("id",a);r.attr("aria-describedby",a)}e.ladda&&(TS.generic_dialog.ladda_go=Ladda.create(r.find(".dialog_go")[0]));TS.generic_dialog.focus()},100)});if(TS.boot_data.feature_accessible_dialogs){$(document).on("focusin",s);r.on("keydown",o);r.on("keyup",i)}},focus:function e(){if(!TS.boot_data.feature_accessible_dialogs)return;var t=TS.generic_dialog.div;var n=document.activeElement;var r=TS.generic_dialog.current_setting;if(t[0].contains(n))return;var i=n&&$(n).hasClass("focus-ring");i&&(TS.generic_dialog.previously_focused=n);var a=r.show_go_button&&t.find(".dialog_go")[0];if(a){a.focus();return}$(TS.interop.utility.firstFocusableChild(t[0])).focus()},startLadda:function e(){TS.generic_dialog.ladda_go&&TS.generic_dialog.ladda_go.start();TS.generic_dialog.div.find(".dialog_go").addClass("disabled")},stopLadda:function e(){TS.generic_dialog.div.find(".dialog_go").removeClass("disabled");TS.generic_dialog.ladda_go&&TS.generic_dialog.ladda_go.stop()},showError:function e(t){var n=TS.generic_dialog.div.find(".modal-footer .generic_dialog_error");if(!n.length){n=$('<div class="generic_dialog_error yolk_orange top_margin">');TS.generic_dialog.div.find(".modal-footer").append(n)}n.text(t)},hideError:function e(){TS.generic_dialog.div.find(".modal-footer .generic_dialog_error").remove()}});var e=TS.interop.i18n.t("Cancel","generic_dialog")();var t=TS.interop.i18n.t("Close","generic_dialog")();var n=TS.interop.i18n.t("OK","generic_dialog")();var r={type:"default",graphic:false,title:"",body:"BODY",body_template:null,body_cls:null,$body:null,show_go_button:true,show_secondary_go_button:false,show_cancel_button:true,go_button_text:n,go_button_class:"",secondary_go_button_text:n,secondary_go_button_class:"",cancel_button_text:e,onGo:null,onSecondaryGo:null,onCancel:null,onEnd:null,show_throbber:false,esc_for_ok:false,onShow:null,force_small:false,enter_always_gos:TS.boot_data.feature_accessible_dialogs,fullscreen:false,dialog_class:null,hide_footer:false,backdrop_click_to_dismiss:false};var i=function e(t){if(!TS.boot_data.feature_accessible_dialogs)return;if(!TS.generic_dialog.is_showing)return;if(t.keyCode!==TS.utility.keymap.tab)return;var n=t.shiftKey;var r=$(t.target);var i=TS.generic_dialog.div;var a=i[0];var o=i.find(".close");var s=!i.find(".modal-header").hasClass("hidden");!n&&r.is(".last_tab_stop")&&(s&&!o.hasClass("hidden")?o.addClass("focus-ring").focus():$(TS.interop.utility.firstFocusableChild(a)).addClass("focus-ring").focus());n&&r.is(".first_tab_stop")&&$(TS.interop.utility.lastFocusableChild(a)).addClass("focus-ring").focus()};var a=function e(t,n){var r=!TS.boot_data.feature_accessible_dialogs&&"BODY"===TS.utility.getActiveElementProp("NODENAME")||n.enter_always_gos;if(!r)return false;if(!n.show_go_button)return false;var i=$(t.target);var a=TS.utility.contenteditable.isContenteditable(i);var o=i.is("a,button,input[type=button],input[type=submit],input[type=reset],textarea");if(TS.boot_data.feature_accessible_dialogs&&(a||o))return false;return true};var o=function e(t){if(!TS.generic_dialog.is_showing)return;var n=t.keyCode;var r=t.shiftKey;var i=TS.generic_dialog.current_setting;var o=n==TS.utility.keymap.enter&&a(t,i);if(o){TS.boot_data.feature_accessible_dialogs&&t.stopPropagation();TS.generic_dialog.go();t.preventDefault();return}n!=TS.utility.keymap.esc||r||(i.show_cancel_button?TS.generic_dialog.cancel():i.esc_for_ok&&TS.generic_dialog.go())};var s=function e(){if(!TS.boot_data.feature_accessible_dialogs)return;if(!TS.generic_dialog.is_showing)return;if("clipboardTextarea"===document.activeElement.id)return;TS.generic_dialog.div[0].contains(document.activeElement)||TS.generic_dialog.focus()};var l={dialog:true,alertdialog:true};var u='<div class="first_tab_stop" tabindex="0" style="position:absolute;"></div>';var c='<div class="last_tab_stop" tabindex="0" style="position:absolute;"></div>'})()},11298:function(e,t){(function(){TS.registerModule("sidebar_themes",{default_themes:{default_theme:{column_bg:"#4D394B",menu_bg:"#3E313C",active_item:"#4C9689",active_item_text:"#FFFFFF",hover_item:"#3E313C",text_color:"#FFFFFF",active_presence:"#38978D",badge:"#EB4D5C"},hoth_theme:{column_bg:"#F8F8FA",menu_bg:"#F8F8FA",active_item:"#2D9EE0",active_item_text:"#FFFFFF",hover_item:"#FFFFFF",text_color:"#383F45",active_presence:"#60D156",badge:"#DC5960"},monument_theme:{column_bg:"#0D7E83",menu_bg:"#076570",active_item:"#F79F66",active_item_text:"#FFFFFF",hover_item:"#D37C71",text_color:"#FFFFFF",active_presence:"#F79F66",badge:"#F15340"},chocolate_theme:{column_bg:"#544538",menu_bg:"#42362B",active_item:"#5DB09D",active_item_text:"#FFFFFF",hover_item:"#4A3C30",text_color:"#FFFFFF",active_presence:"#FFFFFF",badge:"#5DB09D"},ocean_theme:{column_bg:"#303E4D",menu_bg:"#2C3849",active_item:"#6698C8",active_item_text:"#FFFFFF",hover_item:"#4A5664",text_color:"#FFFFFF",active_presence:"#94E864",badge:"#78AF8F"},workhard_theme:{column_bg:"#4D5250",menu_bg:"#444A47",active_item:"#D39B46",active_item_text:"#FFFFFF",hover_item:"#434745",text_color:"#FFFFFF",active_presence:"#99D04A",badge:"#DB6668"},solanum_theme:{column_bg:"#4F2F4C",menu_bg:"#452842",active_item:"#8C5888",active_item_text:"#FFFFFF",hover_item:"#1C0B1A",text_color:"#FFFFFF",active_presence:"#D0FF00",badge:"#889100"},brinjal_theme:{column_bg:"#4F2F4C",menu_bg:"#452842",active_item:"#8C5888",active_item_text:"#FFFFFF",hover_item:"#1C0B1A",text_color:"#FFFFFF",active_presence:"#00FFB7",badge:"#DE4C0D"},cotton_theme:{column_bg:"#BB6A76",menu_bg:"#AD5B67",active_item:"#62B791",active_item_text:"#FFFFFF",hover_item:"#A5516A",text_color:"#FFFFFF",active_presence:"#68F798",badge:"#694464"},eco_theme:{column_bg:"#86A34E",menu_bg:"#94AF63",active_item:"#FFFFFF",active_item_text:"#6D8B42",hover_item:"#94AF63",text_color:"#FFFFFF",active_presence:"#FFB10A",badge:"#DFA044"}},onStart:function e(){TS.client&&TS.client.login_sig.add(TS.sidebar_themes.onLogin,TS.sidebar_themes)},onLogin:function e(){TS.prefs.getPref("sidebar_theme")&&TS.prefs.sidebar_theme_changed_sig.dispatch()},setLastThemeSelectedInUI:function e(t){TS.prefs.last_theme_selected_in_UI=t}})})()},11299:function(e,t){(function(){TS.registerModule("ui.tabs",{instances:[],onStart:$.noop,create:function t(n,r){if(!n||n&&0===n.length)return;return new e(n,r)}});function e(e,i){this.$element=e;var a=e.hasClass("c-tabs__tab_menu");var o=a?"js-tab":"tab";var s=a?"c-tabs__tab--active":"active";var l=a?"c-tabs__tab_panel--active":"active";var u={tab_class:o,tab_active_class:s,panel_active_class:l};var c=e.find("."+u.tab_class);c.attr("role","tab").closest("li").attr("role","presentation");c.closest("ul").attr("role","tablist");var f=c.map(function(e,t){var n=$(t).attr("href").replace(/^#/,"");return document.getElementById(n)});f.attr("role","tabpanel");this.$element.on("click",function(e){var t=n(e,u.tab_class);if(!t.length)return;e.preventDefault();return r(t,c,f,u)});this.unbind=function(){this.$element.off();this.$element=null};this.$element.one("remove",this.unbind);var d=t(c,i);r(d,c,f,u);return this}function t(e,t){if(t&&t.default_tab){var n=e.toArray().reduce(function(e,n){if(e&&e.length)return e;var r="#"+t.default_tab;if($(n).attr("href")==r)return $(n);return null},null);if(n&&n.length)return n}TS.warn("Default tab was not found, falling back to first tab.");return e.eq(0)}e.prototype.destroy=function(){this.$element.off();this.$element.remove()};function n(e,t){var n=$(e.target);return n.closest("."+t)}function r(e,t,n,r){n.removeClass(r.panel_active_class).removeAttr("aria-label");if(t.closest("li").length){t.attr("aria-selected",false).closest("li").removeClass(r.tab_active_class);e.attr("aria-selected",true).closest("li").addClass(r.tab_active_class)}else{t.attr("aria-selected",false).removeClass(r.tab_active_class);e.attr("aria-selected",true).addClass(r.tab_active_class)}var i=e.attr("href");$(i).addClass(r.panel_active_class).attr("aria-label",e.text())}})()},11300:function(e,t){(function(){TS.registerModule("help_modal",{onStart:function e(){TS.help.issues_sorted_sig.add(S)},start:function e(){m()}});var e=false;var t=false;var n;var r;var i;var a;var o;var s;var l;var u;var c;var f=null;var d=null;var _=null;var m=function e(){var t={body_template_html:TS.templates.help_modal(),modal_class:"help_modal fs_modal_footer fs_modal_header",show_cancel_button:false,go_button_text:TS.interop.i18n.t("Contact Us","help")(),onShow:y,onGo:k,onEnd:b,clog_name:"HELP_MODAL"};TS.client&&TS.ui.a11y.saveCurrentFocus();TS.ui.fs_modal.start(t)};var v=function e(){a=$(TS.templates.help_modal_header()).appendTo(r)};var g=function e(){a&&a.remove();a=null};var p=function e(){o=$(TS.templates.help_modal_footer()).appendTo(i);s=i.find(".help_modal_status")};var h=function e(){o&&o.remove();o=null;s=null};var S=function t(){if(!e)return;T()};var T=function e(){var t={unread_count:0,open_count:0,all_count:TS.help.issues.length,is_unread:false,is_unread_many:false,is_open:false,is_open_many:false,is_old_tickets:false};for(var n=0;n<TS.help.issues.length;n+=1){var r=TS.help.issues[n];"unread"===r.state?t.unread_count+=1:"open"===r.state&&(t.open_count+=1)}t.is_unread=0!=t.unread_count;t.is_unread_many=t.unread_count>1;t.is_open=0!=t.open_count&&0==t.unread_count;t.is_open_many=t.open_count>1;t.is_old_tickets=t.all_count&&0==t.is_unread&&0==t.is_open;s.html(TS.templates.help_modal_footer_status({settings:t}))};var y=function t(){e=true;r=$("#fs_modal");i=$("#fs_modal_footer");n=$("#help_modal_container");c=n.find("#browse_all");u=n.find("#help_modal_filter");l=n.find("#help_modal_list_container");v();p();T();w();TS.api.call("helpdesk.get",{locale:TS.interop.i18n.locale.toLowerCase()}).then(function(e){var t=e.data,n=e.args,r=e.request_id;var i=true;C&&C(i,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var i=false;C&&C(i,t,n,r);return{data:t,args:n,request_id:r}})};var b=function f(){e=false;t=false;n=null;r=null;i=null;a=null;o=null;s=null;l=null;u=null;c=null;d=null;_=null;TS.kb_nav.end();g();h();TS.client&&TS.ui.a11y.restorePreviousFocus()};var w=function i(){r.find(".keyboard_shortcuts").on("click",function(e){e.preventDefault();TS.ui.fs_modal.close(true);TS.boot_data.feature_shortcuts_flexpane?TS.ui.react_keyboard_shortcuts.showShortcutsFlexpane():TS.ui.shortcuts_dialog.start()});u.on("textchange",function(){if(!e||!t)return;x()}).on("keydown",function(e){e.which===TS.utility.keymap.esc&&TS.ui.fs_modal.close()});n.on("click",".clear_filter_icon",function(){u.val("").trigger("textchange").focus()});l.on("click",".help_modal_article_row",function(e){j($(this),e)});c.on("click",function(e){e.preventDefault();var t=E();if(t){window.open(F(t));TS.interop.clog.track("HELP_MODAL_SEARCH",{search_terms:t})}else window.open($(this).attr("href"))})};var k=function t(){if(!e){TS.error("not showing?");return}TS.utility.openAuthenticatedInBrowser("/help/requests/new");TS.ui.fs_modal.close(true);TS.interop.clog.track("HELP_MODAL_ACTION",{action:"submit_new_request",trigger:"click_submit_new_request"})};var x=function e(){var t=E();if(t){u.parent().addClass("active");d=A(f,t)}else{u.parent().removeClass("active");d=O(_)}t&&d.length<7&&(d=R(d,t));l.longListView("setItems",d);l.scrollTop(0);TS.utility.rAF(function(){TS.ui.utility.updateClosestMonkeyScroller(l)});t?TS.kb_nav.highlightFirstItem():TS.kb_nav.clearHighlightedItem()};var E=function e(){return $.trim(u.val())};var C=function e(t,n){if(!t){TS.error("failed to fetch help articles");return}f=JSON.parse(n.articles).articles;d=f;_=M(f);l.empty();I();x();u.focus()};var O=function e(t){var n=[];if(t.length>0){n.push({is_divider:true,title:TS.interop.i18n.t("Popular help topics","help")()});n=n.concat(t)}return n};var R=function e(t,n){t.push({is_divider:false,title:TS.interop.i18n.t('Search for "{query}" on the Help Center',"help")({query:n}),url:F(n)});return t};var A=function e(t,n){n=TS.utility.regexpEscape(n);var r=new RegExp(n,"i");var i=-1;var a=t.filter(function(e,t){if(e.title.toLowerCase()===n.toLowerCase()){i=t;return false}return e.title.match(r)});-1!==i&&a.unshift(t[i]);return a};var I=function e(){l.longListView({items:d,approx_item_height:40,approx_divider_height:35,preserve_dom_order:true,makeElement:function e(t){var n=$(TS.templates.help_modal_article_row());t.$title=n.find(".article_title");return n},makeDivider:function e(){return $("<div>").addClass("help_modal_divider")},renderItem:function e(t,n,r){r.$title.text(n.title);t.data("url",n.url)},renderDivider:function e(t,n){t.text(n.title)},calcItemHeight:function e(t){return t.outerHeight()}});l.monkeyScroll();t=true;TS.kb_nav.start(l.find(".list_items"),".help_modal_article_row",l,{use_data_ordering:true,px_offset:0,scrollToStartImmediately:function e(){l.longListView("scrollToTop",true)},scrollToEndImmediately:function e(){l.longListView("scrollToEnd",true)}});TS.kb_nav.setAllowHighlightWithoutBlurringInput(true);TS.kb_nav.setSubmitItemHandler(function(e){j($(this),e)})};var M=function e(t){var n=[];for(var r=0;r<t.length;r+=1)t[r].popular&&n.push(t[r]);n.sort(function(e,t){if(void 0==e.order)return 1;if(void 0==t.order)return-1;return e.order-t.order});return n};var j=function e(t){var n=t.data("url");var r=E();if(n){window.open(L(n));-1==n.indexOf("hc/search?")&&TS.interop.clog.track("HELP_MODAL_ZD_HIT",{zd_article_url:n});r&&TS.interop.clog.track("HELP_MODAL_SEARCH",{search_terms:r,locale:TS.interop.i18n.locale})}};var F=function e(t){var n="https://get.slack.help/hc/"+TS.interop.i18n.zdLocale()+"/search?utf8=\u2713&commit=Search&query="+t;return L(n)};var L=function e(t){if(-1!=t.indexOf("sid"))return t;if(-1!=t.indexOf("?"))return t+"&"+TS.utility.getHCAttributionQS();return t+"?"+TS.utility.getHCAttributionQS()}})()},11301:function(e,t){(function(){TS.registerModule("ui.comments",{editing_file:null,editing_comment:null,editing:false,$edit_form:null,bound:false,onStart:function e(){TS.ui.comments.$edit_form=$("#file_edit_comment_form");TS.ui.comments.bindInput($("#file_comment"));TS.ui.comments.bindButton($(".file_comment_submit_btn"))},bindButton:function e(t){t.bind("keydown.cmd_submit",function(e){e.which===TS.utility.keymap.enter&&t.is(":focus")&&t.closest("form").submit()})},bindInput:function e(t,n){TS.utility.contenteditable.create(t,{ariaLabel:TS.interop.i18n.t("Comment","comments")(),modules:{tabcomplete:{searchOptions:{complete_member_specials:false},completers:["channels","emoji","members"],positionMenu:function e(n){TS.web&&TS.web.space?n.style.width=Math.min(t.outerWidth(),474)+"px":n.style.width=Math.min(t.outerWidth(),360)+"px";TS.tabcomplete.positionUIRelativeToInput(n,t)},no_model_ob:!TS.client}},onEnter:function e(){n?n():t.closest("form").submit();return false},onTextChange:function e(){if(!TS.client)return;if(TS.ui.fs_modal_file_viewer.is_showing&&$("#file_comment").closest("#fs_modal").length)TS.ui.fs_modal_file_viewer.storeLastCommentInput();else{TS.client.ui.files.storeLastCommentInputForPreviewedFile(TS.utility.contenteditable.value(t));TS.ui.utility.updateClosestMonkeyScroller($("#file_preview_scroller"))}},onEscape:function e(){TS.client&&TS.ui.fs_modal_file_viewer.is_showing&&TS.ui.fs_modal_file_viewer.canClose()&&TS.ui.fs_modal.close()}});t.attr("disabled")?TS.utility.contenteditable.disable(t):TS.utility.contenteditable.enable(t);t.on("keyup",function(){var e=TS.utility.contenteditable.cursorPosition(t);if(!e.length){var n=t.closest("form");var r=TS.client&&TS.client.ui.getCachedDimensionsRect("cached_msgs_scroller_rect",TS.client.ui.$msgs_scroller_div);(!TS.client||n.outerHeight()<r.height)&&n.find("button[type=submit]").scrollintoview({px_offset:-50,complete:function e(){TS.tabcomplete.positionUIRelativeToInput($(".tab_complete_ui")[0],t)}})}})},bindEditForm:function e(){TS.ui.comments.bound=true;var t=TS.ui.comments.$edit_form;$("#file_edit_comment").css("overflow","hidden").autogrow();TS.ui.comments.bindInput($("#file_edit_comment"));t.unbind("submit").bind("submit",TS.ui.comments.submitEditForm);t.find(".save").unbind("click").bind("click",function(){TS.ui.comments.submitEditForm();return false});t.find(".cancel").unbind("click").bind("click",function(){TS.ui.comments.onEndEdit();return false});t.unbind("destroyed").bind("destroyed",function(){$("#file_comment_form").after($(this)[0].outerHTML);TS.ui.comments.$edit_form=$("#file_edit_comment_form");TS.ui.comments.bound=false;if(!TS.ui.comments.editing)return;TS.ui.comments.onEndEdit()})},submitEditForm:function e(){if(TS.utility.contenteditable.isEmpty($("#file_edit_comment"),true)){TS.client&&TS.sounds.play("beep");return false}TS.ui.comments.saveEdit();return false},startEdit:function e(t,n,r){TS.ui.comments.editing&&TS.ui.comments.onEndEdit();var i=TS.files.getFileById(t);if(!i){TS.error("no file?");return null}var a=TS.files.getFileCommentById(i,n);if(!a){TS.error("no comment?");return null}var o=TS.ui.comments.$edit_form;var s;s=r?r.closest(".comment"):$("#"+a.id);if(!s.length){TS.error("no #"+a.id+"?");return}s.addClass("comment_editing").append(o);TS.utility.contenteditable.clear($("#file_edit_comment"));$("#file_edit_comment").css("height","");TS.ui.comments.bound||TS.ui.comments.bindEditForm();o.removeClass("hidden");TS.utility.contenteditable.clearHistory($("#file_edit_comment"));TS.utility.contenteditable.value($("#file_edit_comment"),TS.format.unFormatMsg(a.comment));TS.utility.contenteditable.focus($("#file_edit_comment"));TS.utility.contenteditable.setCursorAtEnd($("#file_edit_comment"));$("#file_comment_form").css("visibility","hidden");TS.ui.comments.editing=true;TS.ui.comments.editing_file=i;TS.ui.comments.editing_comment=a},saveEdit:function e(){var t=TS.ui.comments.editing_file;var n=TS.ui.comments.editing_comment;var r=$('.comment[data-comment-id="'+n.id+'"] .comment_body');var i=TS.utility.contenteditable.value($("#file_edit_comment"));i=TS.utility.contenteditable.synchronouslyReplacePotentialMentions(i,{complete_member_specials:false});i=TS.format.cleanMsg(i);if(i!=n.comment){var a=n.comment;n.comment=i;r.length&&r.html(TS.format.formatJustText(n.comment));var o=function e(t){if(!t){n.comment=a;r.length&&r.html(TS.format.formatJustText(n.comment));TS.generic_dialog.alert(TS.interop.i18n.t("Something\u2019s gone wrong, and your change didn\u2019t save. If you see this message more than once, you may want to try restarting Slack.","comments")(),TS.interop.i18n.t("Oh, crumbs!","comments")(),TS.interop.i18n.t("Got it","comments")())}};TS.api.call("files.comments.edit",{file:t.id,id:n.id,comment:i}).then(function(e){var t=e.data,n=e.args,r=e.request_id;var i=true;o(i,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var i=false;o(i,t,n,r);return{data:t,args:n,request_id:r}})}TS.ui.comments.onEndEdit()},onEndEdit:function e(){var t=TS.ui.comments.editing_comment;if(!t)return;TS.ui.comments.$edit_form.addClass("hidden");$('[data-comment-id="'+t.id+'"].comment_editing').removeClass("comment_editing");$("#file_comment_form").css("visibility","");TS.ui.comments.editing=false;TS.ui.comments.editing_file=null;TS.ui.comments.editing_comment=null},startDelete:function e(t,n){var r=TS.files.getFileById(t);if(!r){TS.error("no file?");return null}var i=TS.files.getFileCommentById(r,n);if(!i){TS.error("no comment?");return null}TS.generic_dialog.start({title:TS.interop.i18n.t("Delete a file comment","comments")(),body:TS.interop.i18n.t("<p>Are you sure you want to delete this comment? This cannot be undone.</p>","comments")()+TS.templates.builders.buildCommentHTML({comment:i,file:r,show_comment_actions:false,hide_star:true}),go_button_text:TS.interop.i18n.t("Yes, delete the comment","comments")(),go_button_class:"btn_danger",onGo:function e(){TS.ui.comments.commitDelete(t,n)}})},commitDelete:function e(t,n){var r=TS.files.getFileById(t);if(!r){TS.error("no file?");return null}var i=TS.files.getFileCommentById(r,n);if(!i){TS.error("no comment?");return null}var a=function e(t,n){t?TS.client||TS.files.deleteCommentOnFile(i.id,r):"comment_not_found"===n.error&&TS.files.deleteCommentOnFile(i.id,r)};TS.api.call("files.comments.delete",{file:t,id:n}).then(function(e){var t=e.data,n=e.args,r=e.request_id;var i=true;a(i,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var i=false;a(i,t,n,r);return{data:t,args:n,request_id:r}})},removeFileComment:function e(t,n,r){$('.comment[data-comment-id="'+n+'"]').slideUp(200,function(){var e=this.parentNode;$(this).remove();e.innerHTML.match(/^[\s\r\n]*$/)&&$(e).empty();"function"===typeof r&&r.apply(this,arguments)})}})})()},11302:function(e,t){(function(){TS.registerModule("ds.msg_handlers",{onStart:function t(){TS.ds.on_msg_sig.add(e)},hello:function e(t){TS.model.members.forEach(function(e){e.ds_active=false});if(!t.active||!t.active.length)return;var n;for(var r=0;r<t.active.length;r+=1){n=TS.interop.members.getMemberById(t.active[r]);if(!n){TS.error('unknown member: "'+t.active[r]+'"');return}n.ds_active=true}},presence_change:function e(t){var n=TS.interop.members.getMemberById(t.user);if(!n){TS.error('unknown member: "'+t.user+'"');return}if("away"!==t.presence&&"active"!==t.presence){TS.error('unknown presence: "'+t.presence+'"');return}if(n.ds_active&&"active"===t.presence)return;if(!n.ds_active&&"away"===t.presence)return;n.ds_active="active"===t.presence;TS.members.ds_presence_changed_sig.dispatch(n)}});var e=function e(t){if(t.reply_to)return;if("rocket"===t.event)return;if(!TS.ds.msg_handlers[t.type]){TS.error("non handled non rocket event received\n"+JSON.stringify(t,null,"  "));return}TS.ds.msg_handlers[t.type](t)}})()},11303:function(e,t){(function(){TS.registerModule("inline_audios",{no_scrolling:false,expand_sig:new signals.Signal,collapse_sig:new signals.Signal,onStart:function e(){},shouldExpand:function e(t,n){if(TS.model.expandable_state["aud_"+t+_.escape(n.src)])return true;if(false===TS.model.expandable_state["aud_"+t+_.escape(n.src)])return false;if(n.internal_file_id)return TS.prefs.getPref("expand_internal_inline_imgs");return TS.prefs.getPref("expand_inline_imgs")},expandAllInCurrent:function e(){var t=$(".msg_inline_media_toggler[data-media-type=audio]:not(.expanded)");if(!t.length)return;TS.inline_audios.no_scrolling=true;t.trigger("click");TS.inline_audios.no_scrolling=false;TS.client&&TS.client.ui.instaScrollMsgsToBottom(false)},collapseAllInCurrent:function e(){$(".msg_inline_media_toggler[data-media-type=audio].expanded").trigger("click")},expand:function e(t,n){TS.model.expandable_state["aud_"+t+_.escape(n)]=true;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=TS.client&&TS.client.ui.areMsgsScrolledToBottom();var o=function e(){return $(this).data("real-src")==n};var s=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(o):null;s&&s.length||(s=i.find(".msg_inline_audio_holder").filter(o));s.removeClass("hidden");i.find(".msg_inline_media_toggler[data-media-type=audio]:not(.expanded)").filter(o).addClass("expanded");TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere();s.css("opacity",0).stop().animate({opacity:1},300);if(!TS.inline_audios.no_scrolling)if(TS.client&&a){TS.client.ui.instaScrollMsgsToBottom(false);i.children().first().scrollintoview({duration:0,offset:"top",px_offset:10,direction:"y"})}else i.find(".msg_inline_audio").last().scrollintoview({duration:200,offset:"bottom",px_offset:-10,direction:"y"});TS.inline_audios.expand_sig.dispatch(t);TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere()},collapse:function e(t,n){TS.model.expandable_state["aud_"+t+_.escape(n)]=false;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=function e(){return $(this).data("real-src")==n};var o=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(a):null;o&&o.length||(o=i.find(".msg_inline_audio_holder").filter(a));o.css("visibility","hidden");i.find(".msg_inline_media_toggler[data-media-type=audio].expanded").filter(a).removeClass("expanded");o.find(".msg_inline_audio_iframe_div").html("");TS.inline_audios.collapse_sig.dispatch(t);setTimeout(function(){o.addClass("hidden");o.css("visibility","visible")},200)},checkForInlineAudioClick:function e(t){if(!t.target)return;var n=$(t.target);var r;var i=n.closest(".message");r=i.attr("id");if(!r)return;var a=n.closest(".msg_inline_media_toggler[data-media-type=audio]");if(a.length){t.preventDefault();var o=a.data("real-src");a.hasClass("expanded")?TS.inline_audios.collapse(r,o):TS.inline_audios.expand(r,o);return}var s=n.closest(".inline_audio_play_link");s.length&&t.preventDefault()},makeInternalInlineAudio:function e(t,n){if(!n.audio_html)return;n.safe_audio_html=TS.utility.setCssFromHeightAndWidthAttrs(n.audio_html);TS.model.inline_audios[t]={src:_.escape(n.audio_url||n.audio_html),attachment:n}}})})()},11304:function(e,t){(function(){TS.registerModule("privacy_policy_dialog",{div:null,is_showing:false,default_setting:{title:"",body:"BODY",body_template:null,onGo:null,onCancel:null,onEnd:null,esc_for_ok:false,onShow:null,force_small:false,enter_always_gos:false},current_setting:null,body_template_html:{},Q:[],start:function e(t){if(TS.privacy_policy_dialog.is_showing){t.unique&&TS.privacy_policy_dialog.current_setting.unique==t.unique?TS.info("redundant generic dialog not Qed: "+t.unique):TS.privacy_policy_dialog.Q.push(t);return}TS.privacy_policy_dialog.current_setting=_.defaults({},t,TS.privacy_policy_dialog.default_setting);var n=TS.privacy_policy_dialog.current_setting;TS.privacy_policy_dialog.div||TS.privacy_policy_dialog.build();var r=TS.privacy_policy_dialog.div;var i=TS.templates.privacy_policy_dialog({title:n.title,body:n.body,footer:n.footer});r.empty();r.html(i);r.find(".close").bind("click",function(){n.show_cancel_button?TS.privacy_policy_dialog.cancel():n.esc_for_ok&&TS.privacy_policy_dialog.go()});r.find(".dialog_go").click(TS.privacy_policy_dialog.go);n.go_button_text&&r.find(".dialog_go").html(n.go_button_text);n.show_go_button&&r.find(".dialog_go").removeClass("hidden").addClass(n.go_button_class);r.css("opacity",0);r.css("display","block");window.setTimeout(function(){r.css("marginLeft","0px");r.slideDown(function(){r.animate({opacity:1},{duration:500,complete:function e(){r.addClass("fading-in");r.modal({backdrop:false}).show();document.activeElement&&document.activeElement!=document.body&&document.activeElement.blur();n.onShow&&n.onShow()}})})},1)},go:function e(t){if(!TS.privacy_policy_dialog.is_showing){TS.error("not showing?");return}var n=TS.privacy_policy_dialog.current_setting;var r=TS.privacy_policy_dialog.div;function i(){r.removeClass("fading-in");r.fadeOut(750,function(){r.modal("hide")})}n.onGo?false!==n.onGo(t)&&i():i()},cancel:function e(){var t=TS.privacy_policy_dialog.current_setting;var n=TS.privacy_policy_dialog.div;n.removeClass("fading-in");n.fadeOut(750,function(){n.modal("hide")});t.onCancel&&t.onCancel()},end:function e(){var t=TS.privacy_policy_dialog.current_setting;TS.model.dialog_is_showing=false;TS.privacy_policy_dialog.is_showing=false;TS.privacy_policy_dialog.div.empty();t.onEnd&&t.onEnd();if(!TS.privacy_policy_dialog.is_showing&&TS.privacy_policy_dialog.Q.length){var n=TS.privacy_policy_dialog.Q.shift();TS.privacy_policy_dialog.start(n)}},build:function e(){$("body").append('<div id="privacy_policy_dialog" class="modal" data-keyboard="false"></div>');TS.privacy_policy_dialog.div=$("#privacy_policy_dialog");var t=TS.privacy_policy_dialog.div;t.on("hidden",function(e){if(e.target!=this)return;setTimeout(function(){TS.privacy_policy_dialog.end()},200)});t.on("show",function(e){if(e.target!=this)return;TS.model.dialog_is_showing=true;TS.privacy_policy_dialog.is_showing=true})}})})()},11305:function(e,t){(function(){TS.registerModule("inline_imgs",{no_scrolling:false,expand_sig:new signals.Signal,collapse_sig:new signals.Signal,onStart:function e(){},shouldExpand:function e(t,n,r){if(!n||!n.src)return false;if(TS.model.expandable_state["img_"+t+n.src])return true;if(false===TS.model.expandable_state["img_"+t+n.src])return false;if(true===n.should_expand)return true;if(!n.internal_file_id){if(TS.prefs.getPref("obey_inline_img_limit")&&n.bytes>TS.model.inline_img_byte_limit)return false;if(n.width&&n.height&&n.width*n.height>TS.model.inline_img_pixel_limit)return false}if(n.internal_file_id){var i=TS.inline_file_previews.expandableState(t,n.internal_file_id);if("boolean"===typeof i)return i;return TS.prefs.getPref("expand_internal_inline_imgs")}if(r&&r.is_giphy_shuffle&&!TS.prefs.getPref("expand_inline_imgs")){var a=_.pickBy(TS.model.expandable_state,function(e,n){return _.startsWith(n,"img_"+t)});if(a)return _.values(a)[0]}return TS.prefs.getPref("expand_inline_imgs")},expandAllInCurrent:function e(){TS.inline_imgs.no_scrolling=true;$(".msg_inline_img_expander").trigger("click");$(".msg_inline_img_toggler.collapsed").trigger("click");TS.inline_imgs.no_scrolling=false;TS.client&&TS.client.ui.instaScrollMsgsToBottom(false)},collapseAllInCurrent:function e(){$(".msg_inline_img_collapser").trigger("click");$(".msg_inline_img_toggler.expanded").trigger("click")},expand:function e(t,n){TS.model.expandable_state["img_"+t+n]=true;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=TS.client&&TS.client.ui.areMsgsScrolledToBottom();var o=function e(){return $(this).data("real-src")==n};var s=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(o):null;s&&s.length||(s=i.find(".msg_inline_img_holder").filter(o));s.removeClass("hidden");i.find(".msg_inline_img_expander").filter(o).addClass("hidden");i.find(".msg_inline_img_collapser").filter(o).removeClass("hidden");i.find(".msg_inline_img_toggler").removeClass("collapsed").addClass("expanded");i.find(".too_large_for_auto_expand").addClass("hidden");i.find(".inline_img_bytes").removeClass("hidden");TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere();s.css("opacity",0).stop().animate({opacity:1},300);if(!TS.inline_imgs.no_scrolling)if(TS.client&&a){TS.client.ui.instaScrollMsgsToBottom(false);s.scrollintoview({duration:0,offset:"top",px_offset:10,direction:"y"})}else s.scrollintoview({duration:200,offset:"bottom",px_offset:-10,direction:"y"});TS.inline_imgs.expand_sig.dispatch(t);TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere()},collapse:function e(t,n){TS.model.expandable_state["img_"+t+n]=false;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=function e(){return $(this).data("real-src")==n};var o=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(a):null;o&&o.length||(o=i.find(".msg_inline_img_holder").filter(a));i.find(".msg_inline_img_expander").filter(a).removeClass("hidden");i.find(".msg_inline_img_collapser").filter(a).addClass("hidden");i.find(".msg_inline_img_toggler").removeClass("expanded").addClass("collapsed");TS.inline_imgs.collapse_sig.dispatch(t);o.addClass("hidden")},checkForInlineImgClick:function e(t,n){if(!t.target)return;var r=$(t.target);var i=r.closest(".message");var a=i.attr("id");n&&(a=TS.templates.makeMSRDomId(n));if(!a)return;var o=r.closest(".too_large_but_expand_anyway");if(o.length){t.preventDefault();TS.inline_imgs.expand(a,o.data("real-src"))}var s=r.closest(".msg_inline_img_toggler");if(s.length){t.preventDefault();var l=s.next("*[data-real-src]").data("real-src");TS.inline_imgs.shouldExpand(a,TS.model.inline_imgs[l])?TS.inline_imgs.collapse(a,l):TS.inline_imgs.expand(a,l);return}var u=r.closest(".msg_inline_img_expander");if(u.length){t.preventDefault();TS.inline_imgs.expand(a,u.data("real-src"))}var c=r.closest(".msg_inline_img_collapser");if(c.length){t.preventDefault();TS.inline_imgs.collapse(a,c.data("real-src"))}},makeInternalInlineImg:function e(t,n){var r=400;var i=500;if(TS.model.inline_imgs[t]){n.internal_file_id=TS.model.inline_imgs[t].internal_file_id||n.internal_file_id;n.link_url=TS.model.inline_imgs[t].link_url||n.link_url;n.src=TS.model.inline_imgs[t].src||n.src}TS.model.inline_imgs[t]=n;n.src=n.src||t;n.bytes=parseInt(n.bytes,10);var a={};if(n.rotation){a.rotate=true;if(90==Math.abs(parseInt(n.rotation,10))){var o=n.height;n.height=n.width;n.width=o}}n.display_w=parseInt(n.width,10);n.width=n.display_w;n.display_h=parseInt(n.height,10);n.height=n.display_h;if(n.display_w>r){n.display_w=r;n.display_h=parseInt(n.height*(n.display_w/n.width),10);a.resize=true}if(n.display_h>i){n.display_h=i;n.display_w=parseInt(n.width*(n.display_h/n.height),10);a.resize=true}a.width=n.display_w;a.height=n.display_h;"image/svg+xml"===n.content_type&&(a.render_svg=true);var s=TS.utility.getImgProxyURLWithOptions(n.src,a);s!=n.src?n.proxied_src=s:delete n.proxied_src}})})()},11306:function(e,t){(function(){TS.registerModule("kb_nav",{onStart:function e(){},is_paused:false,start:function e(r,a,o,s){n=r;i=a;d.lastX=null;d.lastY=null;o||(o="#menu");t=$(o);l=s&&!!s.use_data_ordering;u={allowTabHighlightWhenEmptyInput:true,bindTo:document,allowDisabledAndHiddenItems:true,allowScrolling:true};c=_.assign(u,s);$(document).on("mousemove.keyboard_navigation",m);$(c.bindTo).on("keydown",TS.kb_nav.onKeyDown);n.on("mouseenter.keyboard_navigation",i,T)},pause:function e(t){TS.kb_nav.is_paused=t},end:function e(){S();v();n&&n.off(".keyboard_navigation");$(document).off("mousemove.keyboard_navigation",m);$(c.bindTo).off("keydown",TS.kb_nav.onKeyDown);n=null;i=null;a=null;o=false;s=null;l=false;c=u},getHighlightedItem:function e(){return a},getItemByItemId:function e(t){var r=n.children(i).filter(":not(.disabled):visible");var a=$.makeArray(r);for(var o=0,s;o<a.length;o+=1){s=$(a[o]);if(t===s.data("item-id"))return s}},clearHighlightedItem:function e(){S()},highlightFirstItem:function e(){var t=w();if(t&&t.length>0){f();h(t)}else S()},highlightItemWithKey:function e(t,n){h(t,n)},setAllowHighlightWithoutBlurringInput:function e(t){o=t},setSubmitItemHandler:function e(t){s=t},onKeyDown:function e(t){if(TS.kb_nav.is_paused)return;if(TS.ui.react_emoji_menu.is_showing)return;var n=TS.utility.keymap;var r=t.which;var i=t.metaKey||t.ctrlKey||t.shiftKey||t.altKey;if(r==n.up&&(o&&!i||!b(t.target))){t.stopPropagation();t.preventDefault();f();g(t);return}if(r==n.down&&(o&&!i||!b(t.target))){t.stopPropagation();t.preventDefault();f();p(t);return}if(r==n.left&&!b(t.target)){t.stopPropagation();t.preventDefault();f();if(c&&c.onLeftKeyDownIfSubmenuExists&&c.onLeftKeyDownIfSubmenuExists(t))return;g(t);return}if(r==n.right&&!b(t.target)){t.stopPropagation();t.preventDefault();f();if(c&&c.onRightKeyDownIfSubmenuExists&&c.onRightKeyDownIfSubmenuExists(t))return;p(t);return}if(r==n.tab){if(!c.allowTabHighlightWhenEmptyInput&&b(t.target)&&0===$(t.target).val().length)return;t.stopPropagation();t.preventDefault();f();!o&&b(t.target)&&$(t.target).blur();t.shiftKey?g(t):p(t);return}if(r==n.enter&&a){if(s){var l=a.get(0);l?s.call(l,t):s(t);return}t.stopPropagation();t.preventDefault();y()}}});var e={keyboard_active:"keyboard_active",no_pointer_events:"no_pointer_events"};var t=null;var n=null;var r=false;var i=null;var a=null;var o=false;var s=null;var l=false;var u={};var c=u;var f=function n(){if(r)return;t.addClass(e.keyboard_active);t.addClass(e.no_pointer_events);r=true};var d={lastX:null,lastY:null};var m=function e(t){if(!r){d.lastX=t.clientX;d.lastY=t.clientY;return}if(null===d.lastX){d.lastX=t.clientX;d.lastY=t.clientY}else{t.clientX===d.lastX&&t.clientY===d.lastY||v();d.lastX=t.clientX;d.lastY=t.clientY}};var v=function n(){if(!r)return;S();t.removeClass(e.keyboard_active);t.removeClass(e.no_pointer_events);r=false};var g=function e(t){var r;var o=i;r=a?E(a):k();if(r&&r.length>0){h(r);c&&c.onMoveHighlight&&c.onMoveHighlight()}else if(0!==n.children(o).filter(":not(.disabled):visible").length){S();e(t)}};var p=function e(t){var r;var o=i;r=a?x(a):w();if(r&&r.length>0){h(r);c&&c.onMoveHighlight&&c.onMoveHighlight()}else if(0!==n.children(o).filter(":not(.disabled):visible").length){S();e(t)}};var h=function e(t,n){S();a=t;var r=0;c&&c.px_offset&&(r=c.px_offset);t.addClass("highlighted");!n&&c.allowScrolling&&t.scrollintoview({offset:"top",px_offset:r,duration:0});c&&c.no_blur||t.find("a:first").focus();a.trigger("highlighted")};var S=function e(){if(a){a.trigger("unhighlighted");a.removeClass("highlighted");a=null}};var T=function e(t){S();a=$(t.target).closest(i);a.trigger("highlighted")};var y=function e(){a&&a.find("a:first").click()};var b=function e(t){return $(t).is("input, textarea")||TS.utility.contenteditable.isContenteditable(t)};var w=function e(){if(l){c.scrollToStartImmediately&&c.scrollToStartImmediately();var t=C();if(0===t.length)return null;return $(t[0])}if(c.allowDisabledAndHiddenItems)return n.children(i).filter(":not(.disabled):visible:first");return n.children(i).eq(0)};var k=function e(){if(l){c.scrollToEndImmediately&&c.scrollToEndImmediately();var t=C();if(0===t.length)return null;return $(t[t.length-1])}return n.children(i).filter(":not(.disabled):visible:last")};var x=function e(t){if(l){var r=C();var a=t.data("order-index");for(var o=0;o<r.length;o+=1)if($(r[o]).data("order-index")==a){if(o+1<r.length)return $(r[o+1]);break}return null}var s=n.children(i).filter(":not(.disabled):visible");var u=s.index(t);return s.eq(u+1)};var E=function e(t){if(l){var r=C();var a=t.data("order-index");for(var o=0;o<r.length;o+=1)if($(r[o]).data("order-index")==a){if(o-1>=0)return $(r[o-1]);break}return null}var s=n.children(i).filter(":not(.disabled):visible");var u=s.index(t);return s.eq(u-1)};var C=function e(){var t=n.children(i).filter(":not(.disabled):visible");var r=$.makeArray(t);r.sort(function(e,t){var n=$(e).data("order-index");var r=$(t).data("order-index");return n-r});return r}})()},11307:function(e,t){(function(){TS.registerModule("sounds",{onStart:function n(){var r=TS.boot_data.abs_root_url;var i=[].concat(TS.boot_data.notification_sounds||[]).concat(TS.boot_data.alert_sounds||[]).concat(TS.boot_data.call_sounds||[]);var a=[];TS.has_pri[t]&&TS.log(t,"adding all_sounds: "+i.length);i.forEach(function(n){if(!n.url)return;0!==n.url.indexOf("http")&&(n.url=r+n.url.replace("/",""));n.url_ogg&&0!==n.url_ogg.indexOf("http")&&(n.url_ogg=r+n.url_ogg.replace("/",""));TS.has_pri[t]&&TS.log(t,"adding sound: "+n.value);e[n.value]={url:n.url,url_ogg:n.url_ogg};TS.has_pri[t]&&TS.log(t,"_sounds["+n.value+"] = "+e[n.value]);a.push(n.url)});window.Audio&&soundManager.onready(function(){$.each(e,function(t,n){n.url_ogg&&(n.url=[n.url,n.url_ogg]);e[t]=soundManager.createSound(n)})});try{TSSSB.call("preloadSounds",a)?TS.has_pri[t]&&TS.log(t,"called TSSSB.call('preloadSounds', '"+a+"')"):TS.has_pri[t]&&TS.log(t,"NOT CALLED TSSSB.call('preloadSounds', '"+a+"')")}catch(e){TS.warn("error calling TSSSB.preloadSounds "+e+" "+a)}},shouldMuteSounds:function e(t){t=t||{};t.ignore_mute=t.ignore_mute||false;var n=TS.model&&TS.prefs.prefs_loaded&&TS.prefs.getPref("mute_sounds");n=n||TSSSB.call("shouldMuteAudio");n=n&&!t.ignore_mute;return n},filenameForSoundName:function n(r,i){if("new_message"===r){r=TS.prefs.getPref("new_msg_snd");TS.has_pri[t]&&TS.log(t,"filenameForSoundName('"+arguments[0]+"'): using prefs.new_msg_sound of \""+r+'"')}if("none"===r){TS.has_pri[t]&&TS.log(t,'filenameForSoundName: "which" === "none". Returning undefined.');return}if("beep"===r){TS.has_pri[t]&&TS.log(t,'filenameForSoundName: "beep" -> "frog.mp3"');r="frog.mp3"}if(!(r in e)){TS.warn("filenameForSoundName('"+arguments[0]+"'): unknown sound: "+r);return}if(TS.sounds.shouldMuteSounds(i)){TS.has_pri[t]&&TS.log(t,"filenameForSoundName: sounds are muted. Returning undefined.");return}return r},soundForName:function n(r,i){r=TS.sounds.filenameForSoundName(r,i);if(!r){TS.has_pri[t]&&TS.log(t,"soundForName: TS.sounds.filenameForSoundName('"+arguments[0]+"') returned undefined.");return}if(TS.sounds.shouldMuteSounds(i)){TS.has_pri[t]&&TS.log(t,"soundForName: ignoring "+r+" because it is muted in prefs.");return}e[r]||TS.warn(t,'soundForName: could not find sound for "'+r+'".');return e[r]},play:function n(r,i){i=i||{};i.should_loop=i.should_loop||false;i.ignore_mute=i.ignore_mute||false;var a=TS.sounds.soundForName(r,i);if(a){var o={url:a.url,should_loop:i.should_loop};if(TSSSB.call("playRemoteSound",o))TS.has_pri[t]&&TS.log(t,"called TSSSB.call('playRemoteSound', '"+JSON.stringify(o)+"'})");else if(_.isFunction(a.play)){TS.has_pri[t]&&TS.log(t,"calling sound.play()");a.play({loops:i.should_loop?999999:0})}else TS.has_pri[t]&&TS.log(t,"wanted to call sound.play() but it is not a function")}else if(soundManager){TS.warn("sound is null: "+r+" window.Audio: "+window.Audio+" window.winssb: "+window.winssb+" soundManager.ok(): "+soundManager.ok()+" 'audio/mp3' support: "+soundManager.canPlayMIME("audio/mp3"));var s=_.keys(e);s&&s.length?TS.warn("Known sound objects by name: "+s.join(", ")):TS.warn("TS.sounds.play('"+r+"'): No _sounds defined??")}},stop:function e(n,r){r=r||{};r.ignore_mute=r.ignore_mute||false;var i=TS.sounds.soundForName(n,r);if(i)if(TSSSB.call("stopRemoteSound",i.url))TS.has_pri[t]&&TS.log(t,"called TSSSB.call('stopRemoteSound', '"+i.url+"')");else{TS.has_pri[t]&&TS.log(t,"calling sound.stop()");i.stop()}else soundManager&&TS.warn("sound is null: "+n+" window.Audio: "+window.Audio+" window.winssb: "+window.winssb+" soundManager.ok(): "+soundManager.ok()+" soundManager.html5Only: "+soundManager.html5Only+" soundManager.canPlayMIME('audio/mp3'): "+soundManager.canPlayMIME("audio/mp3"))},getNotificationSoundNameFromFilename:function e(t){var n=_.find(TS.boot_data.notification_sounds,{value:t});if(!n){TS.error("No notification sound found matching "+t);return}return n.label}});var e={};var t=37})()},11308:function(e,t){(function(){TS.registerComponent("PresenceList",{_constructor:function e(t){this._list=[];this.added_sig=new signals.Signal;this.removed_sig=new signals.Signal;TS.presence_manager.addPresenceList(this);t&&this.add(t)},add:function e(t){_.isArray(t)||(t=[t]);var n=_.difference(t,this._list);if(n.length){this._list=this._list.concat(n);this.added_sig.dispatch(n)}},remove:function e(t){_.isArray(t)||(t=[t]);var n=_.intersection(t,this._list);if(n.length){this._list=_.difference(this._list,n);this.removed_sig.dispatch(n)}},clear:function e(){this.removed_sig.dispatch(this._list);this._list=[]},destroy:function e(){this.removed_sig.dispatch(this._list);this._list=null}})})()},11309:function(e,t){(function(){TS.registerComponent("PromiseQueue",{_constructor:function e(){this.queue=[];this.current_job=null},destroy:function e(){this.clear()},clear:function e(){this.queue=[];this.current_job&&this.current_job.isPending()&&this.current_job.cancel();this.current_job=null},addToQ:function e(t){return new Promise(function(e,n){this.queue.push(function(){var r=t();r&&r.then||(r=Promise.resolve());r.then(e,n);return r});if(1===this.queue.length&&!this.current_job)return this._nextFromQ()}.bind(this))},_nextFromQ:function e(){if(this.current_job)return;if(!this.queue.length)return;var t=this.queue.shift();var n=t();this.current_job=n;n.finally(function(){this.current_job=null;this._nextFromQ();return null}.bind(this));return null}})})()},11310:function(e,t){(function(){TS.registerModule("permissions",{})})()},11311:function(e,t){(function(){TS.registerModule("permissions.channels",{canMemberJoinChannel:function e(t,n){if(!t||!n)return false;if(t.is_im||t.is_mpim)return true;if(n._is_local)return true;var r=TS.interop.rules.channels.isOrgShared(t);var i=TS.interop.rules.channels.isExternallySharedChannel(t);if(r||i){var a=t.shared_team_ids;if(r){if(TS.interop.members.isExternal(n))return false;if(t.is_global_shared)return true;var o=_.get(n,"enterprise_user.teams")||[];var s=_.intersection(o,a);if(s.length)return true}if(i){if(n._is_from_org)return false;var l=n.team_id;if(a.indexOf(l)>-1)return true}}return false},canMemberBeInvitedToChannel:function e(t,n){if(TS.interop.members.isExternal(n)&&!t.is_im&&!t.is_mpim)return false;return TS.permissions.channels.canMemberJoinChannel(t,n)},canMemberLeaveChannel:function e(t,n){if(!t||!n)return false;if(TS.interop.rules.channels.isRequired(t)||n.is_restricted)return false;return true},canMemberBeRemovedFromChannel:function e(t,n){n=_.isString(n)?TS.interop.members.getMemberById(n):n;if(!t||!n)return false;if(TS.interop.rules.channels.isRequired(t)&&!n.is_restricted)return false;if(t.is_mpim||t.is_im)return false;if(TS.interop.members.isExternal(n))return false;if(n.id===TS.model.user.id)return false;if((t.is_group||t.is_private)&&!TS.permissions.members.canKickFromGroups())return false;if(t.is_channel&&!TS.permissions.members.canKickFromChannels())return false;return true},canSeeShareChannelOption:function e(t){var n=TS.interop.rules.channels.isPendingExternallySharedChannel(t);return(!TS.interop.rules.channels.isExternallySharedChannel(t)||n)&&!t.is_general&&TS.permissions.members.canRequestSharedChannel()},canSeeDisconnectChannelOption:function e(t){var n=TS.interop.rules.channels.isExternallySharedChannel(t);var r=TS.interop.rules.channels.isPendingExternallySharedChannel(t);return n&&!r&&!t.is_general},canSeeConvertToPrivateOption:function e(t){return!t.is_private&&!t.is_group&&!t.is_general&&!t.is_im&&!t.is_org_default&&TS.model.user.is_admin&&TS.permissions.members.canCreateGroups()},canSeeArchiveChannelOption:function e(t){if(TS.interop.rules.channels.isRequired(t))return false;if(TS.interop.rules.channels.isExternallySharedChannel(t)||TS.interop.rules.channels.isPendingExternallySharedChannel(t))return false;if(TS.boot_data.page_needs_enterprise&&t.is_org_shared){if(!TS.permissions.members.canManageOrgSharedChannels())return false;if(TS.interop.rules.channels.isOrgDefaultChannel(t)){if(TS.model.user.enterprise_user.is_admin)return true;return false}}return TS.permissions.members.canArchiveChannels()&&(t.is_channel||t.is_group&&!TS.model.user.is_restricted)},canSeeDeleteChannelOption:function e(t){if(TS.interop.rules.channels.isExternallySharedChannel(t)||TS.interop.rules.channels.isPendingExternallySharedChannel(t))return false;return!TS.interop.rules.channels.isRequired(t)&&!t.is_org_default&&!!(TS.interop.rules.channels.isPublicChannel(t)||TS.interop.rules.channels.isPrivateChannel(t))&&TS.model.user.is_admin},canSeeRenameChannelOption:function e(t){if(t.is_im)return false;if(TS.boot_data.page_needs_enterprise&&t.is_org_shared&&TS.permissions.members.canManageOrgSharedChannels())return true;return TS.model.user.is_admin||t.creator===TS.model.user.id},canSeePurposeChannelOption:function e(t){return!TS.model.user.is_ultra_restricted&&!t.is_im&&(!t.is_general||TS.permissions.members.canPostInGeneral(TS.model.user))&&TS.permissions.members.canPostInModelOb(TS.model.user,t)},canSeeDataRetentionChannelOption:function e(t){return""!==TS.model.team.plan&&(TS.model.user.is_owner||!TS.interop.rules.channels.isPublicChannel(t))&&!TS.model.user.is_restricted&&!TS.model.user.is_ultra_restricted&&TS.prefs.getTeamPref("allow_retention_override")&&!TS.interop.rules.channels.isExternallySharedChannel(t)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(t)},canSeeManagePostingPermissionsChannelOption:function e(t){return TS.boot_data.page_needs_enterprise&&t.is_org_shared&&!t.is_im&&TS.permissions.members.canManageOrgSharedChannels()&&!TS.interop.rules.channels.isExternallySharedChannel(t)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(t)},canSeeManageTeamAccessToChannelOption:function e(t){return TS.boot_data.page_needs_enterprise&&!TS.interop.rules.channels.isRequired(t)&&!TS.interop.rules.channels.isOrgDefaultChannel(t)&&!TS.interop.rules.channels.isExternallySharedChannel(t)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(t)&&TS.permissions.members.canCreateConvertOrgSharedChannels()&&(!TS.boot_data.feature_default_shared_channels||!t.is_org_default)}})})()},11312:function(e,t){(function(){TS.registerModule("permissions.enterprise",{canUserLeaveTeam:function e(t,n){if(!TS.boot_data.page_needs_enterprise)return false;if(t.is_restricted)return false;var r=_.get(t,"enterprise_user.teams",[]);if(!_.includes(r,_.get(n,"id")))return false;if(1===r.length)return false;return!!n.can_leave}})})()},11313:function(e,t){(function(){TS.registerModule("ui.unsaved_form_warning",{onStart:function e(){$("form[data-unsaved-form-warning]").each(function(e,t){var n=$(t).serializeArray();var r=false;t.hasAttribute("data-validation-form")?TS.ui.validation.completed_sig.add(function(e,n){n.passed&&e[0]===t&&(r=true)}):$(t).on("submit",function(){r=true});$(window).on("beforeunload",function(){if(!r&&!_.isEqual(n,$(t).serializeArray()))return TS.interop.i18n.t("Changes you made may not be saved.","unsaved_warning")()})})}})})()},11314:function(e,t){(function(){TS.registerModule("utility.welcome_post",{WELCOME_POST_NAME:"Getting_started_with_Slack__team_creator_welcome_post_identifier",clogWelcomePostExpand:function e(t){t&&t.name===TS.utility.welcome_post.WELCOME_POST_NAME&&(TS.model.user.is_primary_owner?TS.interop.clog.track("WEBSITE_CLICK",{click_target:"expand_post_button",trigger:"welcome_post_team_creator",action:"open_post"}):TS.interop.clog.track("WEBSITE_CLICK",{click_target:"expand_post_button",trigger:"welcome_post_team_joiner",action:"open_post"}))},clogWelcomePostOpen:function e(t){var n=t.data("file-id");var r=TS.files.getFileById(n);r&&r.name===TS.utility.welcome_post.WELCOME_POST_NAME&&(TS.model.user.is_primary_owner?t.hasClass("welcome_post_slackbot_message")?TS.interop.clog.track("WEBSITE_CLICK",{click_target:"edit_post_link",trigger:"welcome_post_team_creator",action:"open_post"}):TS.interop.clog.track("WEBSITE_CLICK",{click_target:"edit_in_new_window_button",trigger:"welcome_post_team_creator",action:"open_post"}):TS.interop.clog.track("WEBSITE_CLICK",{click_target:"open_in_new_window_button",trigger:"welcome_post_team_joiner",action:"open_post"}))},clogWelcomePostSetting:function e(t){t?TS.interop.clog.track("WEBSITE_CLICK",{click_target:"save_welcome_post_setting",trigger:"button_click",action:"enable"}):TS.interop.clog.track("WEBSITE_CLICK",{click_target:"save_welcome_post_setting",trigger:"button_click",action:"disable"})}})})()},11315:function(e,t){(function(){TS.registerModule("utility.slackbot",{getWithFeels:function n(r){var i=e();if(!i||!i.profile)return;t(i,r);return i}});function e(){return _.cloneDeep(TS.interop.members.getMemberById("USLACKBOT"))}function t(e,t){switch(t){case"sad_surprise":e.profile.image_20=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_20.png";e.profile.image_24=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_24.png";e.profile.image_32=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_32.png";e.profile.image_36=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_36.png";e.profile.image_48=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_48.png";e.profile.image_72=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_72.png";e.profile.image_192=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_192.png";e.profile.image_512=cdn_url+"/c6db/img/slackbot/slackbot_sad_surprise_512.png";break;case"fancy":e.profile.image_20=cdn_url+"/c6db/img/slackbot/slackbot_fancy_20.png";e.profile.image_24=cdn_url+"/c6db/img/slackbot/slackbot_fancy_24.png";e.profile.image_32=cdn_url+"/c6db/img/slackbot/slackbot_fancy_32.png";e.profile.image_36=cdn_url+"/c6db/img/slackbot/slackbot_fancy_36.png";e.profile.image_48=cdn_url+"/c6db/img/slackbot/slackbot_fancy_48.png";e.profile.image_72=cdn_url+"/c6db/img/slackbot/slackbot_fancy_72.png";e.profile.image_192=cdn_url+"/c6db/img/slackbot/slackbot_fancy_192.png";e.profile.image_512=cdn_url+"/c6db/img/slackbot/slackbot_fancy_512.png";break;default:TS.warn("Slackbot doesn't have an avatar for that feeling.");break}}})()},11316:function(e,t){(function(){TS.registerModule("fuzzy",{onStart:function e(){},score:function e(t,n,r){r||(r={});var i=TS.fuzzy.makeFuzzyMatcher(n,r);return i.score(t)},makeFuzzyMatcher:function e(r,a){var o=s(r);null==a.fuzzy_limit&&(a.fuzzy_limit=Infinity);return{score:function e(r){var s=u(r,o);if(!s)return Infinity;if(!o)return Infinity;var l=i(r);if(!l)return Infinity;var c=n(l,o,a);if(!c)return Infinity;var f=t(c);if(f>a.fuzzy_limit)return Infinity;return f}}},test:function e(){return{lettersToGraph:i,queryToLinkedList:s}}});var e=" -_'.\u2019\u200b()";var t=function e(t){if(!t)return 0;return t.count+e(t.next)};var n=function e(t,n,i){var a=r(t,n,0,i);a||(a=_.reduce(t.jumps,function(e,a){if(e||a===t)return e;return r(a,n,1,i)},null));return a};var r=function e(t,n,r,i){if(!t)return null;var a;!t.visited&&(t.letter===n.letter||t.ignored&&n.is_separator)&&(a={node:t,count:r});if(!a)return null;if(!n.next)return a;t.visited=true;var o=e(t.next,n.next,0,i);var s=n.next;s.is_space&&s.next&&(s=s.next);o||(o=_.reduce(t.jumps,function(n,r){if(n)return n;if(r.visited||r===t)return n;if((i.search_forward_only||i.substrings_only)&&r.index<t.index)return n;if(i.substrings_only&&r.index>t.index+2)return n;return e(r,s,1,i)},null));t.visited=false;if(o){a.next=o;return a}return null};var i=function e(t){var n=t.split("");var r=n.shift();return a(r,null,n,[],0)};var a=function e(t,n,r,i,a){if(!t)return null;var s=o(t,n,i,a);(!n||n.ignored&&!s.ignored)&&i.length<5&&i.push(s);var l=e(r.shift(),s,r,i,a+1);l&&(s.next=l);return s};var o=function t(n,r,i,a){return{letter:n,ignored:-1!==e.indexOf(n),next:null,prev:r,jumps:i,visited:false,index:a}};var s=function e(t){if(!t)return null;var n=t.split("");return l(n,0)};var l=function t(n,r){if(r>=n.length)return null;var i=n[r];var a=-1!==e.indexOf(i)&&(0!==r||n.length>1);var o=" "===i;return{letter:i,is_separator:a,is_space:o,next:t(n,r+1),index:r}};var u=function e(t,n){if(!n)return true;if(TS.boot_data.feature_tinyspeck&&(_.isUndefined(t)||null===t)){TS.warn("_containsAllLetters: str passed in was not defined: ",t);return false}var r=n.is_separator||-1!==t.indexOf(n.letter);if(!r)return false;return e(t,n.next)}})()},11317:function(e,t){(function(){TS.registerModule("ui.frecency",{onStart:function e(){TS.client&&TS.client.before_login_sig.addOnce(n);TS.web&&TS.web.before_login_sig.addOnce(n);TS.prefs.frecency_jumper_changed_sig.add(r)},record:function t(){e.record.apply(this,arguments)},query:function t(){return e.query.apply(this,arguments)},clearCache:function t(){e._clearCache.apply(this)},getMostCommonWithPrefix:function t(){return e.getMostCommonWithPrefix.apply(this,arguments)},isEnterprise:function e(){return TS.enterprise.isCrossWorkspacePrototypeEnabled()},bonus_points:{starred_channel:10,member_of_this_channel:25,archived_channel_or_group:-50,foreign_channel_or_group:-15,not_in_channel:-25,usergroup_or_keyword:-25,fuzzy_match:50,emoji_match:150,exact_match:100,matches_previous_name:-50}});var e;var t=6e4;var n=function n(){e=TS.frecency.construct("jumper",{onStart:function e(){i=TS.utility.throttleFunc(i,t,true);return TS.model.frecency_jumper},recordFunc:function e(t){TS.model.frecency_jumper=t;i()},onClearCache:function e(){TS.prefs.setPrefByAPI({name:TS.ui.frecency.isEnterprise()?"frecency_ent_jumper":"frecency_jumper",value:"{}"})}})};var r=function t(){e._setCache(TS.model.frecency_jumper)};var i=function e(){TS.prefs.setPrefByAPI({name:TS.ui.frecency.isEnterprise()?"frecency_ent_jumper":"frecency_jumper",value:JSON.stringify(TS.model.frecency_jumper)})}})()},11318:function(e,t){(function(){TS.registerModule("ui.inline_saver",{show:function t(n){n=n||{};var i=$(n.target);if(!i.length){TS.warn("TS.ui.inline_saver called without a valid target.");return}var a=i.data("inline-saver");if(a&&a.length){a.remove();clearTimeout(i.data("inline-saver-spin-timeout"))}var o=$(TS.templates.inline_saver({custom_text:n.custom_text,hide_text:n.hide_text}));o.insertAfter(i);i.data("inline-saver",o);if(n.promise)n.promise.then(function(){r(n)}).catch(function(){r(n,true)});else{var s=setTimeout(function(){r(n)},e);i.data("inline-saver-spin-timeout",s)}}});var e=500;var t=2e3;var n=3e3;var r=function e(r,i){r=r||{};var a=$(r.target);clearTimeout(a.data("inline-saver-hide-timeout"));var o=a.data("inline-saver");if(!o||!o.length)return;var s=i?"failed":"saved";TS.utility.rAF(function(){o.removeClass("saving").addClass(s)});var l=i?n:t;var u=setTimeout(function(){o.remove()},l);a.data("inline-saver-hide-timeout",u)}})()},11319:function(e,t){(function(){TS.registerModule("ui.toast",{show:function t(n){g();var r=$.extend({},e,n);["success","warning","error"].indexOf(r.type)<0&&(r.type=e.type);["top","bottom"].indexOf(r.position)<0&&(r.position=e.position);r.message=new Handlebars.SafeString(r.message);r.retry_message=new Handlebars.SafeString(r.retry_message);n.retry_action&&(r._retryable=true);h(r);return r}});var e={dismissable:false,message:TS.interop.i18n.t("Success","toast")(),position:"bottom",retry_action:_.noop,retry_message:TS.interop.i18n.t("Something went wrong. Try again?","toast")(),type:"success",_retryable:false};var t=".dismiss_toast";var n=".retry_toast";var r=[];var i=false;var a;var o;var s=3e3;var l;var u=function e(){a.on("click",t,c);a.on("click",n,T)};var c=function e(){o&&clearTimeout(o);m()};var f=function e(){S()&&p()};var d=function e(){return r.shift()};var m=function e(){if(S())p();else{a.removeClass("toast_in").addClass("toast_out");i=false;f()}};var v=function e(){o&&clearTimeout(o);o=setTimeout(function(){m()},s)};var g=function e(){if(!a){a=$('<div id="toast" class="hidden">');var t=TS.templates.toast({});a.html(t);a.appendTo("body");u()}};var p=function e(){var t=d();t&&h(t,true)};var h=function e(t,n){if(i&&!n)r.push(t);else{l=t;var o=TS.templates.toast({instance:t,already_exists:!!n});a.html(o);y()}};var S=function e(){return r.length>0};var T=function e(){if(!l._retryable||"error"!==l.type)return;l.retry_action();c()};var y=function e(){if(!i){a.removeClass("hidden").removeClass("toast_out").addClass("toast_in");i=true}v()}})()},11320:function(e,t){(function(){TS.registerModule("ui.toggle",{onStart:function e(){$('input[type="checkbox"][data-style="toggle"]').each(function(){$(this).togglify()})},togglify:function n(r,i){if(i)i=_.defaults({},i,e);else{i={};i.initial_state=r.data("initial_state")?r.data("initial_state"):e.initial_state;i.label=r.data("label")?r.data("label"):e.label;i.on_class=r.data("on-class")?r.data("on-class"):e.on_class;i.on_text=r.data("on-text")?r.data("on-text"):e.on_text;i.off_text=r.data("off-text")?r.data("off-text"):e.off_text;i.off_class=r.data("off-class")?r.data("off-class"):e.off_class;i.off_label=r.data("off-label")?r.data("off-label"):e.off_label;i.disabled=r.data("disabled")?r.data("disabled"):e.disabled;i.cls=r.data("cls")?r.data("cls"):e.cls}null===i.initial_state&&(i.initial_state=!!r.is(":checked"));null===i.disabled&&(i.disabled=!!r.is(":disabled"));t(r,i);return r}});var e={cls:"",initial_state:null,label:"",on_text:TS.interop.i18n.t("On","toggle")(),on_class:"",off_text:TS.interop.i18n.t("Off","toggle")(),off_class:"",off_label:"",disabled:null};var t=function t(r,i){var a=r;var o=r.closest("label");if(o.length){a=o;var s=$.trim(o.text());s&&i.label===e.label&&i.off_label===e.off_label&&(i.label=s)}var l=n(i);var u=$(l);a.addClass("hidden").after(u);u.on("click",function(){$(this).toggleClass("checked");r.prop("checked",$(this).hasClass("checked")).trigger("change");if(i.on_class!==i.off_class){$(this).toggleClass(i.on_class,$(this).hasClass("checked"));$(this).toggleClass(i.off_class,!$(this).hasClass("checked"))}else""!==i.on_class&&TS.warn("TS.ui.toggle: on & off classes are the same. You may want to use the `cls` option instead")})};var n=function e(t){var n=TS.templates.toggle({settings:t});return n}})();$.fn.togglify=function(e){return TS.ui.toggle.togglify($(this),e)}},11321:function(e,t){(function(){TS.registerModule("selection",{isAnyTextSelected:function e(){return""!=window.getSelection().toString().trim()},selectNodeContents:function e(t){if(!t)return;if(!document.body.contains(t)){TS.warn("TS.selection.selectNodeContents: node is not in DOM");return}var n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges();r.addRange(n);return r},selectCharacters:function e(t,n,r){if(!t)return;if(!document.body.contains(t)){TS.warn("TS.selection.selectCharacters: node is not in DOM");return}_.isNumber(n)||(n=0);_.isNumber(r)||(r=n);if("setSelectionRange"in t){t.focus();t.setSelectionRange(n,r);return}if(!t.childNodes.length)return;var i=0;var a;var o=0;var s;var l=0;var u=TS.utility.getChildTextNodes(t);_.each(u,function(e){var t=e.textContent.length;if(!a&&i+t>=n){a=e;o=n-i}if(!s&&i+t>=r){s=e;l=r-i}if(a&&s)return false;i+=t});if(!a||!s){TS.warn("TS.selection.selectCharacters: could not find start and end nodes");return}var c=document.createRange();c.setStart(a,o);c.setEnd(s,l);var f=window.getSelection();f.removeAllRanges();f.addRange(c)},snapshot:function e(){var t=window.getSelection();var n;t.rangeCount&&(n=t.getRangeAt(0).cloneRange());return function(){var e=window.getSelection();e.removeAllRanges();n&&e.addRange(n)}},combineRanges:function e(t){if(!t)return null;var n=t.getRangeAt(0);if(t.rangeCount>1){var r=t.getRangeAt(t.rangeCount-1);n.setEnd(r.endContainer,r.endOffset)}return n}})})()},11322:function(e,t){(function(){TS.registerModule("utility.ui",{onStart:function e(){},isElementVisible:function i(a,o,s){var l=window.getComputedStyle(a);if(!n(o,s).all)return false;if(!r(o))return false;if(!t(l))return false;if(!e(a))return false;return true}});var e=function e(n){while(n.parentNode&&"HTML"!==n.tagName){var r=window.getComputedStyle(n);if(!t(r))return false;n=n.parentNode}return true};var t=function e(t){return"none"!==t.display&&"hidden"!==t.visibility&&0!=t.opacity&&0!=t.maxHeight&&0!=t.maxWidth};var n=function e(t,n){n=n||0;var r=(window.innerHeight||document.documentElement.clientHeight)+n;var i=(window.innerWidth||document.documentElement.clientWidth)+n;var a=t.top>-n;var o=t.left>-n;var s=t.right<=i;var l=t.bottom<=r;var u={all:a&&s&&l&&o,top:a,right:s,bottom:l,left:o};return u};var r=function e(t){return t.height>0&&t.width>0}})()},11323:function(e,t){(function(){TS.registerModule("utility.invites",{onStart:function e(){},hideFullMemberInviteOption:function e(){var t=TS.boot_data.page_needs_enterprise;var n="saml"===TS.prefs.getTeamPref("auth_mode");var r=0===TS.prefs.getTeamPref("sso_auth_restrictions")||1===TS.prefs.getTeamPref("sso_auth_restrictions");if(t&&(TS.model.user.is_admin||TS.model.user.enterprise_user&&TS.model.user.enterprise_user.is_admin))return false;return t||n&&r}})})()},11324:function(e,t){(function(){TS.registerModule("utility.process_nicely",{process:function e(t,n,r,i,a,o){_.isUndefined(a)&&(a=o?t.length-1:0);var s=o?-1:t.length;var l=o?-1:1;return new Promise(function(e,u){var c;var f=10;var d=performance.now();try{n();for(c=a;c!==s;c+=l){r(t[c]);var _=performance.now()-d;var m=_>f;if(m)break}}catch(e){u(e);return}finally{i()}var v=c+1<s;if(!v){e();return}setTimeout(function(){TS.utility.process_nicely.process(t,n,r,i,c+1,o).then(e).catch(u)},0)})},processRight:function e(t,n,r,i,a){var o=true;return TS.utility.process_nicely.process(t,n,r,i,a,o)}})})()},11325:function(e,t){(function(){TS.registerModule("pending_users",{sanitizeNameFields:function e(t){if(!t.invite_prefs||t.invite_prefs.real_name)return;var n=t.invite_prefs;n.first_name&&n.last_name?n.real_name=[n.first_name,n.last_name].join(" ").trim():n.first_name?n.real_name=n.first_name:n.last_name&&(n.real_name=n.last_name)},getUserNameForSort:function e(t){if(t.invite_prefs&&t.invite_prefs.real_name)return t.invite_prefs.real_name.toLowerCase();return t.email},filterOutURAs:function e(t){return t.filter(function(e){if(e.invite_prefs&&"ultra_restricted"===e.invite_prefs.type)return false;return true})},checkUserMatch:function e(t,n){return t.invite_prefs&&t.invite_prefs.real_name&&t.invite_prefs.real_name.match(n)||t.email.match(n)},invitePendingUsersToChannel:function e(t,n){if(!n||!t||!t.length)return;var r=t.map(function(e){return e.email});while(r.length){var i=r.splice(0,30).join(",");TS.api.call("channels.invitePendingUsers",{channel:n,emails:i})}},usersSorterByName:function e(t,n){var r=t.member?TS.members.getPrefCompliantMemberNameLowerCase(t.member):TS.pending_users.getUserNameForSort(t);var i=n.member?TS.members.getPrefCompliantMemberNameLowerCase(n.member):TS.pending_users.getUserNameForSort(n);if(r<i)return-1;if(r>i)return 1;return 0}})})()},11326:function(e,t){(function(){TS.registerModule("utility.channels",{getPermissibleChannelName:function e(t){if("@"===t.charAt(0)||"#"===t.charAt(0)&&1===t.length||t.indexOf(",")>-1)return null;if(!(t&&/^.+$/.test(t)&&TS.permissions.members.canCreateChannels()))return null;var n=TS.utility.cleanChannelName(t.substring(0,21));if(!n||TS.redux.channels.getPublicOrPrivateChannelByName(n)||TS.interop.members.memberExistsWithName(n))return null;return n}})})()},11327:function(e,t){TS.registerModule("constants",{onStart:_.noop,avatar_size_map:{20:{standard:"image_24",retina:"image_48"},24:{standard:"image_24",retina:"image_48"},32:{standard:"image_32",retina:"image_72"},36:{standard:"image_48",retina:"image_72"},48:{standard:"image_48",retina:"image_72"},64:{standard:"image_64",retina:"image_64"},72:{standard:"image_72",retina:"image_192"},192:{standard:"image_192",retina:"image_192"}}})},11328:function(e,t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("utility.number",{onStart:function e(){},formatNumberWithAbbreviation:function e(t,r){if(isNaN(t)){TS.error("Expected input to be a string, got: "+("undefined"===typeof t?"undefined":n(t)));return}if(t<999)return String(t);r=r||{};var i=TS.interop.i18n.locale;var a=TS.interop.i18n.number_abbreviations[i]||TS.interop.i18n.number_abbreviations["en-US"];var o;var s=_.get(r,"abbreviation");var l=_.get(r,"precision",4);if(l>21||l<1||isNaN(l)){TS.warn("Precision must be a value between 1 and 21. Formatting with default precision (4) instead.");l=4}var u=t.toPrecision(l);switch(s){case"K":o=3;break;case"M":o=6;break;case"B":o=9;break;case"T":o=12;break;default:var c=Math.floor(parseFloat((Math.log(u)/Math.LN10).toPrecision(12)));"ja-JP"===i?o=c>=12?12:c>=8?8:c>=4?4:0:"ja-JP"!==i&&(o=c>=12?12:c>=9?9:c>=6?6:c>=3?3:0)}var f=u/Math.pow(10,o);var d="";if(a[o]){d=a[o];_.get(r,"lowercase")&&(d=d.toLowerCase())}if(_.includes(String(f),".")){f=parseFloat(f.toPrecision(l));var m=_.get(r,"decimal_places");if(m){var v=Math.pow(10,m);f=Math.floor(f*v)/v}var g=TS.interop.i18n.locales_number_formatting[i]?TS.interop.i18n.locales_number_formatting[i].decimal_symbol:TS.interop.i18n.locales_number_formatting.default.decimal_symbol;f=String(f).replace(".",g)}return f+d}})})()},11329:function(e,t){(function(){TS.registerModule("channels.backfills",{onStart:function t(){e={}},updateBackfillingList:function t(n){var r={id:n.id};if(false===n.is_org_default){r.is_org_default=false;r.is_org_mandatory=false}else if(false===n.is_org_mandatory)r.is_org_mandatory=false;else if(n.is_org_mandatory){r.is_org_default=true;r.is_org_mandatory=true}else n.is_org_default&&(r.is_org_default=true);TS.interop.channels.upsertChannel(r);var i=e[n.id];if(n.backfill_ends){if(!i)return;"remove_default"!==n.backfill_ends&&i.backfill_starts!==n.backfill_ends||delete e[n.id]}else if(n.backfill_starts){if(i)return;e[n.id]=n}},isBackfilling:function t(n){if(!TS.boot_data.feature_default_shared_channels)return false;return!!e[n]}});var e})()},11330:function(e,t){(function(){TS.registerModule("incoming_call",{div:null,is_showing:false,default_setting:{onAccept:null,onReject:null,onTimeout:null,onShow:null,onEnd:null},current_setting:null,Q:[],onKeydown:function e(t){if(t.which==TS.utility.keymap.enter){if("BODY"===TS.utility.getActiveElementProp("NODENAME")){TS.incoming_call.accept();t.preventDefault()}}else t.which==TS.utility.keymap.esc&&"BODY"===TS.utility.getActiveElementProp("NODENAME")&&TS.incoming_call.reject()},start:function e(t){if(TS.incoming_call.is_showing){t.unique&&TS.incoming_call.current_setting.unique==t.unique?TS.info("redundant generic dialog not Qed: "+t.unique):TS.incoming_call.Q.push(t);return}TS.incoming_call.current_setting=_.defaults({},t,TS.incoming_call.default_setting);var n=TS.incoming_call.current_setting;TS.incoming_call.div||TS.incoming_call.build();var r=TS.incoming_call.div;var i=TS.templates.calls_incoming_call({caller:t.caller,name:t.name,is_video_call:t.is_video_call,team:TS.model.team.name});r.empty();r.html(i);r.find(".accept_audio").click(function(){TS.incoming_call.accept(false)});r.find(".accept_video").click(function(){TS.incoming_call.accept(true)});r.find(".reject").click(TS.incoming_call.reject);r.modal("show");document.activeElement&&document.activeElement!=document.body&&document.activeElement.blur();n.onShow&&n.onShow()},accept:function e(t){if(!TS.incoming_call.is_showing){TS.error("incoming call not showing?");return}var n=TS.incoming_call.current_setting;var r=TS.incoming_call.div;r.modal("hide");n.onAccept(t)},reject:function e(){var t=TS.incoming_call.current_setting;TS.incoming_call.div.modal("hide");t.onReject&&t.onReject()},timeout:function e(){var t=TS.incoming_call.current_setting;TS.incoming_call.div.modal("hide");t.onTimeout&&t.onTimeout()},end:function e(){var t=TS.incoming_call.current_setting;TS.model.dialog_is_showing=false;TS.incoming_call.is_showing=false;$(window.document).unbind("keydown",TS.incoming_call.onKeydown);TS.incoming_call.div.empty();t.onEnd&&t.onEnd();if(!TS.incoming_call.is_showing&&TS.incoming_call.Q.length){var n=TS.incoming_call.Q.shift();TS.incoming_call.start(n)}},build:function e(){$("body").append('<div id="incoming_call" class="modal hide" data-keyboard="false" data-backdrop="static"></div>');TS.incoming_call.div=$("#incoming_call");var t=TS.incoming_call.div;t.on("hidden",function(e){if(e.target!=this)return;TS.incoming_call.end()});t.on("show",function(e){if(e.target!=this)return;TS.model.dialog_is_showing=true;TS.incoming_call.is_showing=true});t.on("shown",function(e){if(e.target!=this)return;setTimeout(function(){if(!TS.incoming_call.is_showing)return;t.find(".title_input").select();$(window.document).bind("keydown",TS.incoming_call.onKeydown)},100)})}})})()},11331:function(e,t){(function(){TS.registerModule("ui.pins",{onStart:function e(){TS.pins.pins_fetched_sig.add(TS.ui.pins.rebuildPinnedMessagesUI);TS.pins.pinned_status_changed_sig.add(TS.ui.pins.updatePinUI)},updatePinUI:function r(i,a,o){if(!i||!a)return;"file"===a.type?t(i,a.file,o):"file_comment"===a.type&&n(i,a.comment,o);"message"===a.type&&e(i,a.message,o)},rebuildPinnedMessagesUI:function e(t,n){if(!n||0===n.length)return;n.forEach(function(e){TS.ui.pins.updatePinUI(t,e,true)})},clearUnreadPinState:function e(){TS.client.channel_header.clearUnreadPinState();TS.client.channel_page.clearUnreadPinState()}});var e=function e(t,n,r){if(!t||!n||!n.ts)return;var i=TS.templates.makeMsgDomId(n.ts);var a=$("#messages_container #"+i+', #messages_container .message_unfurl[data-attachment-ts="'+n.ts+'"]');var o=a.find(".is_pinned_holder:first");if(0===a.length||0===o.length)return;if(r){a.addClass("is_pinned");o.html(TS.templates.builders.buildPinInfoHtml(n).string)}else{a.removeClass("is_pinned");o.empty()}};var t=function e(t,n,i){if(!t||!n)return;var a=$('.message_body[data-file-id="'+n.id+'"]');var o=a.closest("ts-message");r(t,o,i)};var n=function e(t,n,i){if(!t||!n)return;var a=$(".rxns_key_"+n._rxn_key);var o=a.closest("ts-message");r(t,o,i)};var r=function t(n,r,i){if(!n||0===r.length)return;_.forEach(r,function(t){var r=$(t).data("ts");if(!r)return;t=TS.utility.msgs.getMsg(r,n.msgs);if(!t)return;e(n,t,i)})}})()},11332:function(e,t){(function(){TS.registerModule("menu.enterprise_team_signin",{start:function n(r,i,a){if(TS.menu.isRedundantClick(r))return;if(TS.model.menu_is_showing)return;a=_.merge({},a);e=a.team_id;t=a.list;TS.menu.buildIfNeeded();TS.menu.enterprise_team_signin.clean();TS.menu.$menu.addClass("enterprise_team_signin_menu");TS.menu.$menu_header.addClass("hidden").empty();var o=TS.templates.enterprise_team_signin_menu_items({should_show_leave_team:a.should_show_leave_team,team_site_url:a.team_site_url||""});TS.menu.$menu_items.html(o);TS.menu.$menu_items.on("click.menu","li",TS.menu.enterprise_team_signin.onMenuItemClick);TS.kb_nav.setSubmitItemHandler(TS.menu.enterprise_team_signin.onMenuItemClick);TS.menu.start(r,false);TS.menu.$menu.attr("data-qa","enterprise_team_signin_menu");TS.menu.positionAt(i,i.width()-TS.menu.$menu.width(),i.outerHeight()+10)},onMenuItemClick:function e(t){var r=$(this).closest("[data-which]");r.length||(r=$(t.target).closest("[data-which]"));var i=r.data("which");if("visit_team_site"===i);else if("leave_team"===i){t.preventDefault();n()}else{t.preventDefault();TS.warn("not sure what to do with clicked element:"+i)}TS.menu.enterprise_team_signin.end()},clean:function e(){TS.menu.clean()},end:function e(){TS.menu.end()}});var e;var t;var n=function n(){TS.ui.leave_team_dialog.start(e,t);var r;var i;if("teams_on"===t||"workspaces_on"===t){r="your_workspaces";i="your_workspaces_list"}else{r="find_workspaces";i="workspaces_you_can_join_list"}TS.enterprise.workspaces.recordTeamLeave(e,r,i)}})()},11333:function(e,t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("utility.calls_log",{enableDevLogging:function e(){if("dev"===TS.boot_data.version_ts){TS.pri="123,"+TS.pri;TS.interop&&TS.interop.console&&TS.interop.console.setLogLevel("info")}},enableBuffering:function e(n){t.enable_buffering=n},logInfo:function e(){var t=a.apply(null,arguments);TS.info(t);i(t,"INF")},logWarn:function e(){var t=a.apply(null,arguments);TS.warn(t);i(t,"WRN")},logError:function e(){var t=a.apply(null,arguments);TS.error(t);i(t,"ERR")},logEvent:function e(t){o(t,"EDBG",true)},logEventInfo:function e(t){o(t,"EINF",true)},logEventWarn:function e(t){o(t,"EWRN",false)},logEventError:function e(t){o(t,"EERR",false)},getAndClearBuffer:function e(){var n=r.buffer.join("\n");r.buffer_overflow&&(n+=t.excess);r.buffer=[];r.buffer_length=0;r.buffer_overflow=false;return n},postLogs:function t(){if(!e){var n=TS.calls.getCallState().room_id;var r=TS.utility.calls_log.getAndClearBuffer();if(!r.length)return Promise.reject(new Error("Could not post empty logs."));if(!n)return Promise.reject(new Error("Could not post logs without room id."));e=Promise.all([s(n,r),l(n,r)])}return e}});var e=void 0;var t={enable_buffering:false,MAX_LENGTH:3e4,excess:"... log is too long"};var r={buffer:[],buffer_length:0,buffer_overflow:false};var i=function e(n,i){var a;if(false===t.enable_buffering)return;a="["+i+"|"+TS.makeLogDate()+"]:";a.length+n.length+r.buffer_length+t.excess.length<t.MAX_LENGTH?r.buffer.push(a+n):r.buffer_overflow=true};var a=function e(){var t=[];for(var r=0;r<arguments.length;r+=1){if(!arguments[r])continue;"object"===n(arguments[r])?t.push(JSON.stringify(arguments[r])):t.push(arguments[r].toString())}return t.join(" ")};var o=function e(t,n,r){var o=a(t.value);var s=t.event+": "+o;switch(n){case"EDBG":break;case"EINF":TS.info(s);break;case"EWRN":TS.warn(s);break;case"EERR":TS.error(s);break;default:break}r||TS.utility.calls_analytics.logEvent($.extend(t,{level:n}));i(s,n)};var s=function e(t,n){return TS.api.call("screenhero.rooms.userEvent",{room:t,event_type:"vo-logs",event_metadata:JSON.stringify({logs:n})}).catch(function(){TS.error("Posting logs to userEvent failed")})};var l=function e(t,n){if("enabled"!=TS.experiment.getGroup("logstash_calls_js_logs"))return Promise.resolve();return TS.api.call("screenhero.rooms.proxyLogs",{data:JSON.stringify({room_id:t,user_id:TS.model.user.id,team_id:TS.model.team.id,event_type:"calls_js_logs",encoding:"none",logs:n})}).catch(function(){TS.error("Posting logs to proxyLogs failed.")})}})()},11334:function(e,t){(function(){TS.registerModule("debug_widget",{onStart:function t(){if(!TS.client)return;if(!TS.client.ui)return;if(!TS.members)return;e=$("#debug_widget");if(!e.length)return;TS.client.ui.did_rebuild_all_sig.add(v);TS.client.ui.did_rebuild_all_but_msgs_sig.add(d);TS.client.msg_pane.did_rebuild_msgs_sig.add(m);TS.members.member_was_upserted_sig.add(f);e.click(function(e){e.preventDefault();if(e.altKey){r=0;i=0;a=0;o=0;n=0;p()}});window.localStorage&&window.localStorage.show_debug_widget&&TS.debug_widget.toggle()},toggle:function n(){if(!TS.client||!e)return;e.toggleClass("hidden");if(e.hasClass("hidden")){t=false;window.localStorage&&delete window.localStorage.show_debug_widget;e.empty()}else{t=true;window.localStorage&&(window.localStorage.show_debug_widget=1);p()}},isVisible:function e(){return!!t},setFrameRate:function e(t){s=t}});var e;var t=false;var n=0;var r=0;var i=0;var a=0;var o=0;var s=0;var l=500;var u;var c=Handlebars.compile('Rt={{rebuild_all_count}} Rb={{rebuild_all_but_messages_count}} Rm={{rebuild_messages_count}}<br>Um={{upsert_member_count}} <span class="{{color_class}}"><ts-icon class="ts_icon_add_user"></ts-icon> {{time_since_readable}}</span><br>Members={{total_member_count}} <ts-icon class="ts_icon_user"></ts-icon><br>FPS={{average_frame_rate}}');var f=function e(){o+=1;n=Date.now();h()};var d=function e(){i+=1;h()};var m=function e(){a+=1;h()};var v=function e(){r+=1;h()};var g=function e(){var t=Date.now()-n;var l="";t<2e3?l="candy_red":t<1e4?l="star_yellow":t<2e4&&(l="ocean_teal");var u="";t<1e3?u="<1s":t<2e4&&(u=Math.floor(t/1e3)+"s");return{has_recent_member_upsert:!!l,color_class:l,rebuild_all_count:r,rebuild_all_but_messages_count:i,rebuild_messages_count:a,time_since_readable:u,upsert_member_count:o,total_member_count:_.get(TS,"model.members.length",0),average_frame_rate:s||"..."}};var p=function t(){clearTimeout(u);u=void 0;var n=g();var r=c(n);e.html(r);n.has_recent_member_upsert&&h()};var h=function n(){if(!e)return;if(!t)return;if(u)return;u=setTimeout(p,l)}})()},11335:function(e,t){(function(){TS.registerModule("utility.calls_analytics",{onStart:function e(){if(TS.calls){TS.calls.room_id_sig.add(s);TS.web.login_sig.add(l)}if(TS.client){TS.utility.calls.room_id_sig.add(s);TS.client.login_sig.add(l)}},teardown:function e(){clearTimeout(t);i.room_id&&delete i.room_id},isStateClean:function e(){return _.isEmpty(i)},record:function e(i,a){var s=i.slice(0,i.indexOf("."));var l="video_send_stats"===s||"video_recv_stats"===s||"network_stats"===s;!l&&_.find(r,function(e){return e.measurement===i})||r.push(o(i,a));t||(t=setTimeout(TS.utility.calls_analytics.flush,n))},promiseToRecordImmediately:function e(t,n){var r={database:a(),points:[o(t,n)]};return TS.api.call("screenhero.rooms.proxyAnalytics",{data:JSON.stringify(r)},null,true).catch(_.noop)},flush:function e(){if(r.length){var n=Date.now();r=r.map(function(e){e.fields.posted_time=n;return e});TS.api.call("screenhero.rooms.proxyAnalytics",{data:JSON.stringify({database:a(),points:r})},null,true).catch(_.noop);r=[]}clearTimeout(t);t=void 0},logEvent:function t(n){var r;if(!(TS.model&&TS.model.user&&TS.model.user.id||i.room_id)){TS.warn("calls analytics module not ready: "+JSON.stringify(n));return}r=["user_event_logs"];i.room_id?r.push(i.room_id):r.push(TS.model.user.id);$.extend(n||{},{user_id:TS.model.user.id,os:e.os,ssb_version:e.ssb_version,webapp_version:e.webapp_version});TS.utility.calls_analytics.record(r.join("."),n)}});var e={};var t;var n=5e3;var r=[];var i={};var a=function e(){return"dev"===TS.boot_data.version_ts?"calls_dev":"calls"};var o=function e(t,n){"string"!==typeof n&&"number"!==typeof n||(n={value:n});n.value=JSON.stringify(n.value);n.client_time=Date.now();return{measurement:t,fields:n}};var s=function e(t){i.room_id=t.room_id};var l=function t(){TS.model.is_mac?e.os="mac":TS.model.is_win?e.os="win":TS.model.is_lin?e.os="lin":e.os=navigator.userAgent;e.webapp_version=TS.boot_data.min_sh_version_ts;TS.model.mac_ssb_version?e.ssb_version=TS.model.mac_ssb_version+"."+TS.model.mac_ssb_version_minor:TS.model.win_ssb_version?e.ssb_version=TS.model.win_ssb_version+"."+TS.model.win_ssb_version_minor:TS.model.lin_ssb_version?e.ssb_version=TS.model.lin_ssb_version+"."+TS.model.win_lin_version_minor:e.ssb_version="N/A"}})()},11336:function(e,t){(function(){TS.registerModule("inline_videos",{no_scrolling:false,expand_sig:new signals.Signal,collapse_sig:new signals.Signal,onStart:function e(){$("#messages_container").on("keydown",".msg_inline_media_toggler",function(){13!=event.which&&32!=event.which||event.target.click()})},shouldExpand:function e(t,n){if(TS.model.expandable_state["vid_"+t+n.src])return true;if(false===TS.model.expandable_state["vid_"+t+n.src])return false;if(n.internal_file_id)return TS.prefs.getPref("expand_internal_inline_imgs");return TS.prefs.getPref("expand_inline_imgs")},expandAllInCurrent:function e(){var t=$(".msg_inline_media_toggler[data-media-type=video]:not(.expanded)");if(!t.length)return;TS.inline_videos.no_scrolling=true;t.trigger("click");TS.inline_videos.no_scrolling=false;TS.client&&TS.client.ui.instaScrollMsgsToBottom(false)},collapseAllInCurrent:function e(){$(".msg_inline_media_toggler[data-media-type=video].expanded").trigger("click")},expand:function e(t,n){TS.model.expandable_state["vid_"+t+n]=true;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=TS.client&&TS.client.ui.areMsgsScrolledToBottom();var o=function e(){return $(this).data("real-src")==n};var s=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(o):null;s&&s.length||(s=i.find(".msg_inline_video_holder").filter(o));s.find(".msg_inline_video_thumb_div").removeClass("hidden");s.removeClass("hidden");i.find(".msg_inline_media_toggler[data-media-type=video]:not(.expanded)").filter(o).attr("aria-expanded","true");i.find(".msg_inline_media_toggler[data-media-type=video]:not(.expanded)").filter(o).addClass("expanded");TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere();s.css("opacity",0).stop().animate({opacity:1},300);if(!TS.inline_videos.no_scrolling)if(TS.client&&a){TS.client.ui.instaScrollMsgsToBottom(false);i.children().first().scrollintoview({duration:0,offset:"top",px_offset:10,direction:"y"})}else i.find(".msg_inline_video").last().scrollintoview({duration:200,offset:"bottom",px_offset:-10,direction:"y"});TS.inline_videos.expand_sig.dispatch(t);TS.client&&TS.client.ui.checkInlineImgsAndIframesEverywhere()},collapse:function e(t,n){TS.model.expandable_state["vid_"+t+n]=false;TS.storage.storeExpandableState(TS.model.expandable_state);var r="#"+TS.utility.makeSafeForDomId(t);var i=$(r);if(!i.length)return;var a=function e(){return $(this).data("real-src")==n};var o=TS.boot_data.feature_attachments_inline?i.find(".inline_attachment").filter(a):null;o&&o.length||(o=i.find(".msg_inline_video_holder").filter(a));o.css("visibility","hidden");i.find(".msg_inline_media_toggler[data-media-type=video].expanded").filter(a).attr("aria-expanded","false");i.find(".msg_inline_media_toggler[data-media-type=video].expanded").filter(a).removeClass("expanded");o.find(".msg_inline_video_iframe_div").html("");TS.inline_videos.collapse_sig.dispatch(t);setTimeout(function(){o.addClass("hidden");o.css("visibility","visible")},200)},enCommentHTML:function e(t){if(!t)return"";var n=new DOMParser;var r="<body>"+t+"</body>";var i=n.parseFromString(r,"text/html")||n.parseFromString(r,"text/xml");if(!i||!i.body)return"";if(0===i.body.childNodes.length)return"";if(1==i.body.childNodes.length&&i.body.childNodes[0].nodeType==Node.COMMENT_NODE)return i.body.innerHTML;var a=document.createComment(t);return $("<div>").append(a).html()},unCommentHTML:function e(t){if(!t)return"";var n=new DOMParser;var r=n.parseFromString("<body>"+t+"</body>","text/html");if(!r||!r.body)return"";if(1!=r.body.childNodes.length)return"";var i=r.body.childNodes[0];if(i.nodeType!=Node.COMMENT_NODE)return"";return i.textContent},maybeStopInlineVideoPlayback:function e(){var t=$("#msgs_scroller_div");var n=t.find("video").toArray();var r=t.find("iframe").length;if(r){var i=t.find(".msg_inline_video_iframe_div").toArray();i.forEach(function(e){var t=$(e);var n=t.next(".msg_inline_video_thumb_div");var r=t.parent();t.html("").addClass("hidden");r.html(t).append(n);n.removeClass("hidden")})}n.forEach(function(e){e.load()})},checkForInlineVideoClick:function e(t){if(!t.target)return;var n=$(t.target);var r;var i=n.closest(".message");r=i.attr("id");if(!r)return;var a=n.closest(".msg_inline_media_toggler[data-media-type=video]");if(a.length){t.preventDefault();var o=a.data("real-src");a.hasClass("expanded")?TS.inline_videos.collapse(r,o):TS.inline_videos.expand(r,o);return}var s=n.closest(".msg_inline_video_play_button");if(s.length){var l=s.closest(".msg_inline_video_holder");var u=l.find(".msg_inline_video_iframe_div");u.removeClass("hidden");l.find(".msg_inline_video_thumb_div").addClass("hidden");var c=u.data("url");var f=TS.model.inline_videos[c];if(!f){var d=c.replace(/&/g,"&amp;");f=TS.model.inline_videos[d]}if(f){u.html(TS.inline_videos.unCommentHTML(f.html));if(c.indexOf(true)){var m=u.find("video");m.length&&m[0].play()}}else{var v=TS.interop.i18n.t('<div style="padding:10px; color:white">Error: unable to find "{url}" in TS.model.inline_videos</div>',"inline_videos")({url:TS.interop.i18n.safeString(_.escape(c))});u.html(v)}}},makeInternalInlineVideo:function e(n,r){var i=400;var a=500;TS.model.inline_videos[n]=r;r.src=r.thumbnail.url||n;r.display_w=parseInt(r.thumbnail.width,10);r.width=r.display_w;r.display_h=parseInt(r.thumbnail.height,10);r.height=r.display_h;if(r.display_w>i){r.display_w=i;r.display_h=parseInt(r.height*(r.display_w/r.width),10)}if(r.display_h>a){r.display_h=a;r.display_w=parseInt(r.width*(r.display_h/r.height),10)}r.html||(r.html="MISSING video.html");r.html.indexOf("gfycat.com/ifr")>-1&&(r.html=t(r.html));r.html=r.html.replace("http://","//");if(-1==r.html.indexOf("oldwidth")){r.html=r.html.replace(" width=",' width="'+r.display_w+'" oldwidth=');r.html=r.html.replace(" height=",' height="'+r.display_h+'" oldheight=')}r.html=TS.inline_videos.enCommentHTML(r.html);r.html=TS.utility.swapInRedirUrlForIframe(r.html);var o=TS.utility.getImgProxyURL(r.src,r.display_w,r.display_h);o!=r.src?r.proxied_src=o:delete r.proxied_src},test:function e(){return{maybeRewriteGfyCatHtml:t}}});var e=/^[a-zA-Z0-9]+$/;var t=function t(n){var r=TS.utility.getAttributesFromHTMLString(n);var i=r.src;if(!i)return n;var a=i.split("ifr/")[1]||"";if(!a.match(e))return n;var o=parseInt(r.width,10);var s=parseInt(r.height,10);if(!o||!s)return n;r.src="https://"+document.location.host+"/gfycat_iframe?key="+a+"&w="+o+"&h="+s+"&"+Date.now();var l=$("<iframe>").attr(r);return l[0].outerHTML}})()},11337:function(e,t){(function(){TS.registerComponent("ui.ContextualDropDown",{_constructor:function f(d,_){_=_||{};this._show_description=_.show_description;this.updated_sig=new signals.Signal;var m=Array.prototype.slice.call(d.querySelectorAll("select option"));d.innerHTML=TS.templates.contextual_dropdown({show_description:_.show_description});this._dropdown=d.querySelector(".contextual_dropdown");this._dropdown_label=d.querySelector(".contextual_dropdown_label");this._dropdown_container=d.querySelector(".contextual_dropdown_container");_.show_description&&(this._dropdown_desc=d.querySelector(".contextual_dropdown_desc"));this._onOpen=i.bind(this);this._onClose=a.bind(this);this._onItemClicked=s.bind(this);this._onItemMouseOver=l.bind(this);this._onItemMouseOut=u.bind(this);this._onItemPress=c.bind(this);this._onFocus=e.bind(this);this._onBlur=t.bind(this);this._onEnterPress=n.bind(this);this._onArrowPress=r.bind(this);this._dropdown_label.addEventListener("click",this._onOpen);this._dropdown_label.addEventListener("focus",this._onFocus);this._dropdown_label.addEventListener("blur",this._onBlur);var v=/(<([^>]+)>)/gi;var g="";var p;var h;var S;m.forEach(function(e){p=e.getAttribute("data-desc")||"";h=e.getAttribute("data-desc-disabled")||"";S=!!e.getAttribute("disabled");g+=TS.templates.contextual_dropdown_item({label:e.label,value:e.value,desc:p,desc_disabled:h,disabled:S,aria_label:(p||e.label).replace(v,"")})});var T=d.querySelector(".contextual_dropdown_items");T.innerHTML=g;this._items=Array.prototype.slice.call(T.querySelectorAll(".contextual_dropdown_item"));this._items.forEach(function(e){e.addEventListener("click",this._onItemClicked);e.addEventListener("keydown",this._onItemPress);if(_.show_description){e.addEventListener("mousemove",this._onItemMouseOver);e.addEventListener("focus",this._onItemMouseOver);e.addEventListener("mouseout",this._onItemMouseOut)}}.bind(this));this._items.length&&(_.start_value?o.call(this,T.querySelector('[data-value="'+_.start_value+'"]')):_.select_first&&o.call(this,this._items[0]))},getSelectedItem:function e(){return this._current_item||null},getSelectedValue:function e(){if(!this._current_item)return null;return this._current_item.getAttribute("data-value")},destroy:function e(){this._onClose();this._dropdown_label.removeEventListener("click",this._onOpen);this._dropdown_label.removeEventListener("focus",this._onFocus);this._dropdown_label.removeEventListener("blur",this._onBlur);this._items.forEach(function(e){e.removeEventListener("click",this._onItemClicked);e.removeEventListener("keydown",this._onItemPress);if(this._show_description){e.removeEventListener("mousemove",this._onItemMouseOver);e.removeEventListener("focus",this._onItemMouseOver);e.removeEventListener("mouseout",this._onItemMouseOut)}}.bind(this))}});var e=function e(){document.addEventListener("keydown",this._onEnterPress)};var t=function e(){document.removeEventListener("keydown",this._onEnterPress)};var n=function e(t){if("Enter"===t.key)this._is_open?this._onClose():this._onOpen();else if(!this._is_open&&"ArrowDown"===t.key){this._onOpen();this._onArrowPress(t)}};var r=function e(t){var n;if("ArrowDown"===t.key){n=this._items.indexOf(this._focused_item);n<this._items.length-1?n+=1:n=0}else if("ArrowUp"===t.key){n=this._items.indexOf(this._focused_item);n>0?n-=1:n=this._items.length-1}void 0!==n&&this._items[n].focus()};var i=function e(t){t&&t.stopPropagation();this._dropdown_label.removeEventListener("click",this._onOpen);document.body.addEventListener("click",this._onClose);document.addEventListener("keydown",this._onArrowPress);if(this._current_item){var n=this._current_item.getAttribute("data-desc");this._dropdown_desc.innerHTML=n}this._dropdown.classList.add("is_open");this._is_open=true;this._focused_item=null;this._dropdown_container.setAttribute("aria-hidden",false)};var a=function e(){document.body.removeEventListener("click",this._onClose);document.removeEventListener("keydown",this._onArrowPress);this._dropdown_label.addEventListener("click",this._onOpen);this._dropdown.classList.remove("is_open");this._is_open=false;this._dropdown_container.setAttribute("aria-hidden",true)};var o=function e(t,n){if(this._current_item&&this._current_item===t||!t)return;if(t.getAttribute("disabled")){n&&n.stopPropagation();return}this._current_item&&this._current_item.classList.remove("is_selected");this._current_item=t;this._current_item.classList.add("is_selected");this._dropdown_label.innerHTML=this._current_item.getAttribute("data-label");var r=this._current_item.getAttribute("data-desc");this._dropdown_desc&&(this._dropdown_desc.innerHTML=r);this.updated_sig.dispatch(this.getSelectedValue())};var s=function e(t){o.call(this,t.target,t)};var l=function e(t){if(this._focused_item===t.target)return;var n=t.target.getAttribute("disabled")?t.target.getAttribute("data-desc-disabled"):t.target.getAttribute("data-desc");this._dropdown_desc.innerHTML=n;this._focused_item&&this._focused_item.blur();this._focused_item=t.target;this._focused_item.focus()};var u=function e(t){if(this._focused_item===t.target){this._focused_item.blur();this._focused_item=null}};var c=function e(t){if("Enter"===t.key){o.call(this,t.target,t);this._dropdown_label.focus();this._onClose();t.stopPropagation()}}})()},11338:function(e,t){(function(){TS.registerModule("ui.token_input",{onStart:function e(){},make:function e(t,i){if(!(t&&t.length))return;var a=t.find("input");if(!(a&&a.length))return;a.val().trim()&&n(a);t.on("click",function(){t.addClass("active");a.focus()});a.on("paste",function(){setTimeout(function(){var e=a.val().trim();if(!/,/.test(e))return true;e&&n(a,i)},0)}).on("keydown",function(e){var t=a.val().length;t||e.which!==TS.utility.keymap.del?1!==t||a.prev(".token").length||r(a,i):r(a,i);t&&e.which===TS.utility.keymap.enter&&n(a,i)}).on("keyup",function(e){var t=a.val().length;!t||e.which!==TS.utility.keymap.comma&&e.which!==TS.utility.keymap.space||n(a,i)}).on("focusout",function(){n(a,i);t.removeClass("active")}).on("focusin",function(){t.addClass("active")});a.data("placeholder",a.attr("placeholder"));t.find(".token").length&&a.attr("placeholder","");i&&i.remove_on_click&&t.on("click",".token",function(){$(this).remove()})},value:function n(r,i){if(i)return t(r,i);return e(r)}});var e=function e(t){var n=[];t.find(".token").each(function(){var e=$(this).text().trim();n.push(e)});return n.join(", ")};var t=function e(t,r){var i=t.find("input");t.find(".token").remove();i.val(r);n(i)};var n=function e(t,n){var r=t.val().trim();var i=r.split(/\s*[,\s]\s*/);var a=false;i.forEach(function(e){if(e){var r=$("<span />").addClass("token").text(e);r.toggleClass("remove_on_click",n&&n.remove_on_click);t.before(r);a=true;n&&n.onTokenChange&&n.onTokenChange(t,r)}});a&&t.attr("placeholder","").val("")};var r=function e(t,n){var r=t.prev(".token");if(r.length){var i=r.text();r.remove();t.val(i+" ")}else t.attr("placeholder",t.data("placeholder"));n&&n.onTokenChange&&n.onTokenChange(t)}})()},11339:function(e,t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){TS.registerModule("rooms",{added_sig:new signals.Signal,changed_name_sig:new signals.Signal,changed_participants_sig:new signals.Signal,changed_date_end_sig:new signals.Signal,changed_channels_sig:new signals.Signal,onStart:function e(){},getRoomById:function e(t){return TS.rooms.getRoomByProp("id",t)},getRoomByProp:function e(n,r){if(!n)return null;var i=null;_.forOwn(t,function(e){if(e[n]===r){i=e;return false}});return i},upsertAndSignal:function e(t){var n=TS.rooms.upsertRoom(t);if("CHANGED"===n.status){-1!=n.what_changed.indexOf("name")&&TS.rooms.changed_name_sig.dispatch(n.room);-1!=n.what_changed.indexOf("participants")&&TS.rooms.changed_participants_sig.dispatch(n.room);-1!=n.what_changed.indexOf("date_end")&&TS.rooms.changed_date_end_sig.dispatch(n.room);-1!=n.what_changed.indexOf("channels")&&TS.rooms.changed_channels_sig.dispatch(n.room)}else"ADDED"===n.status&&TS.rooms.added_sig.dispatch(n.room);return n},upsertRoom:function r(i){var a=TS.rooms.getRoomById(i.id);var o="NOOP";var s=[];var l;i.date_start&&(i.date_start=Number(i.date_start));i.date_end&&(i.date_end=Number(i.date_end));i.was_rejected&&(i.was_rejected=Boolean(i.was_rejected));i.is_dm_call&&(i.is_dm_call=Boolean(i.is_dm_call));i.was_missed&&(i.was_missed=Boolean(i.was_missed));if(a){TS.log(4,'updating existing room "'+i.id+'"');l=a.channels||[];_.forOwn(i,function(t,r){if(-1!==e.indexOf(r)){if(t&&!TS.utility.areSimpleObjectsEqual(t,a[r])){s.push(r);a[r]=t;o="CHANGED";"channels"===r&&(l=l.concat(t||[]))}}else if(a[r]!=t)if(t&&!TS.utility.isScalar(t)){a[r]=t;TS.warn(r+" is not scalar! it needs to be handled by upsertRoom specifically to test if it has changed! "+n(i[r]))}else if("boolean"!==typeof t||!t!=!a[r]){s.push(r);a[r]=t;o="CHANGED"}});TS.useReactMessages()&&TS.redux.dispatch(TS.interop.redux.models.calls.bulkAddCalls([a]));i=a}else if(i.id){o="ADDED";TS.log(4,'adding room "'+i.id);t.push(i);TS.useReactMessages()&&TS.redux.dispatch(TS.interop.redux.models.calls.bulkAddCalls([i]))}else TS.error("bad error, no room.id");return{status:o,room:i,what_changed:s}}});var e=["participants","channels","participant_history","participants_camera_on","participants_camera_off","participants_screenshare_on","participants_screenshare_off"];var t=[]})()},11340:function(e,t){(function(){TS.registerModule("ui.share_message_dialog",{start:function a(s,l,u){var c=TS.utility.msgs.findMsg(s,l.id);if(!c){TS.error("wtf no msg?");return}TS.tips.hideAll();if(TS.boot_data.feature_file_threads){TS.redux.dispatch(TS.interop.redux.actions.openShareDialog({ts:s,channelId:l.id}));return}e=s;_.isString(s)||(e=s.toString());t=l;n=false;var f=TS.templates.builders.formatMessageAsAttachment(c,l);var d=TS.interop.i18n.t("Copy a link to this message.<br>To share, paste it anywhere.","share_message")();var m;if(!o()){d=TS.interop.i18n.t("Copy a link to this message.<br>It\u2019s private, so sharing is limited.","share_message")();m=TS.templates.share_message_dialog_same_channel({from_private_channel:(l.is_private||l.is_group)&&!l.is_mpim});m=new Handlebars.SafeString(m)}TS.ui.basic_share_dialog.start({title:TS.interop.i18n.t("Share message","share_message")(),go_button_text:TS.interop.i18n.t("Share","share_message")(),initial_message:u,attachment_html:f,author:TS.interop.members.getMemberById(c.user),same_channel:m,copy_link:TS.utility.msgs.constructAbsoluteMsgPermalink(t,e,c.thread_ts),copy_text:new Handlebars.SafeString(d),onGo:i,onEnd:r,src_model_ob:t})},maybeToggleSharedChannelsWarning:function e(t,n){TS.interop.utility.looksLikeMemberId(n.id)&&(n=TS.redux.channels.getImByMemberId(n.id)||n);if(!_.isObject(n))return;var r="";if(TS.interop.utility.isModelObjectExternal(n)&&!TS.interop.rules.channels.isPendingExternallySharedChannel(n)){var i=TS.interop.i18n.listify(_.map(n.shared_team_ids,TS.teams.getTeamNameById)).join("");if(n.is_im||n.is_mpim){n.is_im&&(i=_.escape(TS.teams.getTeamNameByMember(TS.interop.members.getMemberById(n.user))));r=TS.interop.i18n.t("<strong>This conversation includes people from another workspace.</strong> Messages and files sent here will be seen by members of {shared_teams_list}.","shared_channels")({shared_teams_list:TS.interop.i18n.safeString(i)})}else r=TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of {shared_teams_list}.","shared_channels")({shared_teams_list:TS.interop.i18n.safeString(i)})}else t&&TS.interop.members.isExternal(t)&&(r=TS.interop.i18n.t("<strong>This message is from a member of {team_name}</strong>. You may want to check with them before sharing it.","shared_channels")({team_name:TS.interop.i18n.safeString(_.escape(TS.teams.getTeamNameByMember(t)))}));$("#share_dialog_warning_msg").html(r);$("#share_dialog_warning").toggleClass("hidden",!r)}});var e;var t;var n;var r=function n(){e=null;t=null;TS.interop.clog.track("PFP_ACTION",{contexts:{growth:{action:"close",trigger:"share_message_dialog"}}});TS.tips.unhideAll()};var i=function r(){if(n)return;var i=e;var o=t;var s=TS.utility.contenteditable.value($(".basic_share_dialog .message_input"));s=TS.utility.contenteditable.synchronouslyReplacePotentialMentions(s);var l=TS.format.cleanMsg(s);l=_.trim(l);var u=$(".basic_share_dialog #select_share_channels");var c=u.lazyFilterSelect("value")[0];if(c&&c.model_ob&&c.model_ob.create_channel){var f=e;var d=t;TS.ui.new_channel_modal.start(c.model_ob.name).then(function(e){t=d;a(f,l,d,e);return null}).catch(function(){TS.ui.share_message_dialog.start(f,d,l);return null});TS.generic_dialog.cancel();return false}if(!c){u.find(".lfs_input_container").addClass("error");return false}TS.useReactMessages()&&TS.redux.dispatch(TS.interop.redux.features.messageEdit.stopEditingMessagesInChannel({channelId:o.id}));a(i,l,o,c.model_ob)};var a=function e(t,r,i,a){if(TS.ui.file_share.shouldBlockUploadDialogSubmission())return false;var l=TS.utility.contenteditable.value($(".basic_share_dialog .message_input"));var u=$(".basic_share_dialog #select_share_channels");s(i.id,t);var c={channel:i.id,timestamp:t,text:r};if(o())if(a)c.share_channel=a.presence?"@"+a.name:a.id;else if(i.is_archived){$("#select_share_pick_channel_note").removeClass("hidden");_.defer(function(){u.find(".lfs_input_container").click()});return false}n=true;a||(a=i);var f;f=a&&a.is_channel&&!a.is_member?TS.redux.dispatch(TS.interop.channels.joinConversationApi({channelId:a.id})):Promise.resolve();f.then(function(){return TS.api.call("chat.shareMessage",c).then(function(){if(!TS.client)return;var e=TS.shared.legacyGetActiveModelOb();if(a&&e&&e.id===a.id&&!TS.model.threads_view_is_showing&&!TS.model.unread_view_is_showing)TS.useReactMessages()||TS.client.ui.instaScrollMsgsToBottom();else if(c.share_channel&&a)return TS.client.displayModelOb(a)})}).catch(function(e){var n=e||"unknown error";e&&e.data&&e.data.error&&(n=e.data.error);TS.error("chat.shareMessage error: "+n);TS.generic_dialog.start({title:TS.interop.i18n.t("Message could not be shared","share_message")(),body:TS.interop.i18n.t("Sorry! Something went wrong.","share_message")(),go_button_text:TS.interop.i18n.t("Try again","share_message")(),onGo:function e(){TS.ui.share_message_dialog.start(t,i,l)}})})};var o=function e(){return t.is_channel&&!t.is_private};var s=function e(t,n){if(!t||!n)return;var r={channel_id:t,message_id:n};var i="MSG_SHARED_CLICKED";var a=$("ts-message[data-model-ob-id='"+t+"'][data-ts='"+n+"']");_.merge(r,TS.ui.thread.getTrackingPayloadForEl(a));"threads_view"===TS.ui.thread.getContextForEl(a)&&TS.client.ui.threads.incrementTrackingSeqId();TS.interop.clog.track(i,r)}})()},11341:function(e,t){(function(){TS.registerModule("frecency",{onStart:function e(){},construct:function e(t,n){return s(t,n)},getExisting:function e(t){return o(t)},test:function e(){return{_clearInstance:function e(t){delete l[t]}}}});var e=864e5;var t=[144e5,e,3*e,7*e,30*e,90*e];var n=[100,80,60,40,20,10];var r=.5;var i=t[t.length-1];var a=100;function o(e){return l[e]}function s(e,o){if(l[e]){TS.error('namespace "'+e+'" already exists');return null}var s={};"jumper"===e&&TS.boot_data.feature_no_frecency_storage||(s=TS.storage.fetchFrecency(e)||{});o&&o.onStart&&(s=o.onStart(e));function u(e,t,n,r){var i=_.keys(s);n||(n=function e(){return 0});var a={};_.each(i,function(e){if(e.indexOf(t)>-1||t.indexOf(e)>-1)if(Array.isArray(s[e]))_.each(s[e],function(e){if(a[e.id]){var t=p(a[e.id]);var n=p(e);n>t&&(a[e.id]=e)}else a[e.id]=e});else if(a[s[e].id]){var n=p(a[s[e].id]);var r=p(s[e]);r>n&&(a[s[e].id]=s[e])}else a[s[e].id]=s[e]});var o=[];_.each(e,function(e,t){var i=0;s[e.id]&&(i=p(s[e.id]));r&&r.normalize||(i+=n(e,r));o.push({id:e.id,score:p(a[e.id])+i,original_index:t})});if(r&&r.normalize){o=f(o);o=_.map(o,function(t,i){t.score+=n(e[i],r);return t})}o.sort(function(e,t){if(e.score===t.score)return e.original_index-t.original_index;return t.score-e.score});return o}function c(t,n){if(s[n]&&!Array.isArray(s[n]))s[n].id===t.id?d(s[n]):s[n]=[s[n],m(t.id)];else if(Array.isArray(s[n])){var r=false;for(var i=0;i<s[n].length;i+=1)if(s[n][i].id===t.id){d(s[n][i]);r=true;break}r||s[n].push(m(t.id))}else s[n]={id:t.id,count:1,visits:[Date.now()]};if(s[t.id]){d(s[t.id]);s[t.id]._reduced=true}else{s[t.id]=m(t.id);s[t.id]._reduced=true}o&&o.recordFunc?o.recordFunc(s):TS.storage.storeFrecency(e,s)}function f(e){var t=_.get(_.maxBy(e,"score"),"score")||0;return _.map(e,function(e){e.score>0&&(e.score=e.score/t*100);return e})}function d(e){e.count+=1;Array.isArray(e.visits)||(e.visits=[]);10===e.visits.length&&e.visits.shift();e.visits.push(Date.now())}function m(e){return{id:e,count:1,visits:[Date.now()]}}function v(e,t){var n={};var r=[];k(false,function(e){n[e.id]?n[e.id].score+=p(e):n[e.id]={id:e.id,score:p(e)+s[e.id]?p(s[e.id]):0}});r=_.toArray(n);r.sort(function(e,t){return t.score-e.score});e&&(r=r.slice(0,e));t&&(r=f(r));return r}function g(e,t,n){var r={};var i=[];k(false,function(t){if(!t||!t.id||0!==t.id.indexOf(e))return;r[t.id]?r[t.id].score+=p(t):r[t.id]={id:t.id,score:p(t)+s[t.id]?p(s[t.id]):0}});i=_.toArray(r);i.sort(function(e,t){return t.score-e.score});t&&(i=i.slice(0,t));n&&(i=f(i));return i}function p(e){if(!e||!e.visits)return 0;var t=0;var n=e.visits.length-1;var i=Date.now();for(n;n>=0;n-=1)t+=h(i-e.visits[n]);e._reduced&&(t*=r);return e.count*t/e.visits.length}function h(e){var r=0;var i=t.length;for(r;r<i;r+=1)if(e<t[r])return n[r];return 0}function S(e){if(e)return s[e];return s}function T(e){s=e}function y(){s={};TS.storage.clearFrecency(e);o&&o.onClearCache&&o.onClearCache()}function b(){var e=Object.keys(s);_.each(e,function(e){if(_.isArray(s[e])){for(var t=s[e].length;t>-1;t-=1)w(s[e][t])&&s[e].splice(t,1);if(!s[e].length){s[e]=null;delete s[e]}}else if(w(s[e])){s[e]=null;delete s[e]}})}function w(e){if(!e||_.isEmpty(e.visits))return true;if(Date.now()-e.visits[e.visits.length-1]>i&&e.count<a)return true}function k(e,t){_.each(s,function(n){if(!e&&n._reduced)return;Array.isArray(n)?_.each(n,function(e){t(e)}):t(n)})}var x={query:u,record:c,getMostCommon:v,getMostCommonWithPrefix:g,_getCache:S,_setCache:T,_clearCache:y,_pruneCache:b,_test:{_REDUCED_MULTIPLIER:r,_PRUNE_BELOW_COUNT:a,_traverseCache:k}};l[e]=x;return x}var l={}})()},11342:function(e,t){(function(){TS.registerModule("inline_room_previews",{onStart:function e(){},toggle_sig:new signals.Signal,checkForInlineRoomPreviewClick:function e(t){var n=$(t.target);var r=n.closest(".message");if(!r.length)return;if(n.closest(".msg_inline_room_preview_expander, .msg_inline_room_preview_collapser").length){t.preventDefault();TS.inline_room_previews.toggle(r);return}n.closest(".screenhero_attachment").length&&!n.hasClass("screenhero_room_link")&&r.find(".screenhero_room_link").click()},shouldExpand:function e(t){var n=TS.model.expandable_state["inline_room_"+t];var r=TS.prefs.getPref("expand_internal_inline_imgs");return void 0===n?r:!!n},toggle:function e(t){var n=t.find(".sh_call_container");var r=n.hasClass("sh_call_collapsed");var i=TS.client&&TS.client.ui.areMsgsScrolledToBottom();TS.model.expandable_state["inline_room_"+n.data("room-id")]=r;TS.storage.storeExpandableState(TS.model.expandable_state);n.toggleClass("sh_call_collapsed");TS.inline_room_previews.toggleIcons(t);TS.inline_room_previews.toggle_sig.dispatch(t);TS.client&&i&&TS.client.ui.instaScrollMsgsToBottom(false)},expand:function e(){},collapse:function e(){},toggleIcons:function e(t){t.find(".msg_inline_room_preview_collapser, .msg_inline_room_preview_expander").toggleClass("hidden")},expandAllInCurrent:function e(){$(".msg_inline_room_preview_expander").trigger("click");TS.client&&TS.client.ui.instaScrollMsgsToBottom(false)},collapseAllInCurrent:function e(){$(".msg_inline_room_preview_collapser").trigger("click")}})})()},11343:function(e,t){(function(){TS.registerModule("ui.basic_share_dialog",{start:function n(r){e=r;var a=TS.templates.basic_share_dialog({attachment_html:new Handlebars.SafeString(r.attachment_html),same_channel:r.same_channel,show_copy_link:!!r.copy_link&&TS.clipboard.canWriteText(),copy_text:r.copy_text});var o="basic_share_dialog";var s=TS.interop.i18n.t("Share","basic_share_dialog")();r.dialog_class&&(o+=" "+r.dialog_class);TS.generic_dialog.start({title:r.title||s,go_button_text:r.go_button_text||s,dialog_class:o,body:a,onShow:t,onEnd:i,onGo:r.onGo})}});var e;var t=function t(){var i=$("#generic_dialog.basic_share_dialog");i.css("display","");var o=i.find("#share_dialog_input_container");var s=["channels","emoji","members"];TS.ui.inline_msg_input.make(o,{aria_label:TS.interop.i18n.t("Add optional comment before sharing.","basic_share_dialog")(),no_emo:false,placeholder:TS.interop.i18n.t("Add a message, if you\u2019d like.","basic_share_dialog")(),onEnter:TS.generic_dialog.go,onEscape:TS.generic_dialog.cancel,onTextChange:n,onTab:r,completers:s});var l=o.find(".message_input");l.attr("id","file_comment_textarea");var u=e.initial_message||"";TS.utility.contenteditable.value(l,u);var c=i.find("#file_sharing_div");c.prependTo(i.find(".modal-footer"));TS.ui.file_share.bindFileShareDropdowns(e.author,e.src_model_ob,void 0,true);c.find("#select_share_channels").css({width:""});var f=$("#share_dialog_same_channel");if(f.length){c.addClass("hidden");f.prependTo(i.find(".modal-footer"))}var d=i.find('[data-action="copy_link"]');if(d.length){i.find(".dialog_cancel").before(d);d.removeClass("hidden");d.click(a)}var _=i.find("#share_dialog_warning");_.appendTo(i.find(".modal-footer"));TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);TS.utility.contenteditable.focus(l)});i.find(".share_dialog_attachment_container").find("a[href]","button").attr("tabindex","-1");e.onShow&&e.onShow()};var n=function e(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()};var r=function e(){$("#file_sharing_div").find(".lfs_input_container").click();return true};var i=function t(){e.onEnd&&e.onEnd();e=null};var a=function t(){if(!e.copy_link||!TS.clipboard.canWriteText())return;TS.tips.updateFloater({title:TS.interop.i18n.t("Copied!","basic_share_dialog")(),classes_to_add:["success"]});TS.clipboard.writeText(e.copy_link)}})()},11344:function(e,t){(function(){TS.registerModule("signup",{ERROR_BAD_EMAIL_DOMAIN:"bad_email_domain",ERROR_DOMAIN_NOT_FOUND:"domain_not_found",ERROR_INVALID_CODE:"invalid_code",ERROR_MISC:"misc",ERROR_MISSING_ARGS:"missing_args",ERROR_MISSING_USERNAME:"missing_username",ERROR_NO_EMAIL:"no_email",ERROR_NO_EMAIL_MISC:"no_email_misc",ERROR_NO_TEAM_NAME:"no_team_name",ERROR_NO_URL:"no_url",ERROR_NO_USERNAME:"no_username",ERROR_RATELIMITED:"ratelimited",ERROR_URL_BAD:"url_bad",ERROR_URL_LONG:"url_long",ERROR_URL_NO_LETTER:"url_no_letter",ERROR_URL_START_END_DASH:"url_start_end_dash",ERROR_URL_TAKEN:"url_taken",ERROR_USERNAME_BAD:"username_bad",ERROR_USERNAME_LONG:"username_long",ERROR_USERNAME_NOT_ALLOWED:"username_not_allowed",ERROR_USERNAME_START:"username_start",ERROR_USERNAME_TAKEN:"username_taken",ERROR_NAME_IS_SLACKBOT:"name_is_slackbot",onStart:function e(){t();var n=!!(TS.api&&TS.api.call);u=n?TS.boot_data&&TS.boot_data.feature_modern_api_q?TS.interop.api.callWithDeprecatedHandler:TS.api.call:window.callSlackAPIUnauthed},isBadSignupDomain:function e(t){if(void 0!==c[t])return Promise.resolve(c[t]);return new Promise(function(e){u("signup.checkEmailDomain",{domain:t},function(n,r){c[t]=!r.ok;e(!r.ok)})})},checkEmail:function e(t,n){var r=TS.utility.email.validateEmail(t,1);if(!r.is_valid)return Promise.resolve({is_valid:false,error_key:r.error_key,error_message:r.error_message});n=n||{};var i=n.timeout||2e3;var a=t.split("@")[1];n.get_info=n.get_info&&void 0===f[a];var o=n.get_info;if(o&&i){var s;var l;var u;m(t,a,n).then(function(e){if(!l){l=true;s(e);clearInterval(u)}});u=setTimeout(function(){l||m(t,a).then(function(e){if(!l){l=true;s(e)}})},i);return new Promise(function(e){s=e})}return m(t,a,{get_info:o})},verifyEmailConfirmationCode:function e(t,n){var r={email:t,code:n};return new Promise(function(e){u("signup.confirmCode",r,function(t,n){if(t)return e({is_valid:true,api_response:n});var r=n.error;"failed"===r&&(r=TS.signup.ERROR_INVALID_CODE);return e({is_valid:false,error_key:r,error_message:TS.signup.getErrorMessage(r)})})})},checkUsernameSyntax:function e(t){var n;t&&t.length?t.length>r?n=TS.signup.ERROR_USERNAME_LONG:s.test(t)?l.test(t)||(n=TS.signup.ERROR_USERNAME_START):n=TS.signup.ERROR_USERNAME_BAD:n=TS.signup.ERROR_MISSING_USERNAME;if(n)return{is_valid:false,error_key:n,error_message:TS.signup.getErrorMessage(n)};return{is_valid:true}},checkUsernameAvailability:function t(n,r){var i=TS.signup.checkUsernameSyntax(n);if(!i.is_valid)return Promise.resolve({is_valid:false,error_key:i.error_key,error_message:i.error_message});var a={username:n};r=r||{};r.team_id&&(a.team_id=r.team_id);r.lead_id&&(a.lead_id=r.lead_id);return new Promise(function(t){u("signup.checkUsername",a,function(i,a){if(i)return t({is_valid:true});var o=a.error;var s;a.error===TS.signup.ERROR_USERNAME_NOT_ALLOWED?s=e[o]({username:_.escape(n)}):"taken"===a.error&&(o=TS.signup.ERROR_USERNAME_TAKEN);var l={is_valid:false,error_key:o,error_message:s||TS.signup.getErrorMessage(o)};if(!r.get_suggestions)return t(l);if(!r.email){TS.warn("TS.signup.checkUsernameAvailability can only try to get username suggestions when options.email is set");return t(l)}TS.signup.suggestUsernameFromEmail(r.email).then(function(e){if(e.has_suggestion){l.has_suggestion=true;l.suggestion=e.username}return t(l)})})})},suggestUsernameFromEmail:function e(t,n){var i=t.toLocaleLowerCase().match(/^[a-z0-9]+/gi);i&&(i=i[0]);if(!i||i.length>r)return Promise.resolve({has_suggestion:false});return new Promise(function(e){n=n||{};var t={lead_id:n.lead_id,get_suggestions:false};TS.signup.checkUsernameAvailability(i,t).then(function(t){if(t.is_valid)return e({has_suggestion:true,username:i});return e({has_suggestion:false})})})},checkNameSyntax:function e(t){if(t&&"slackbot"===t.toLocaleLowerCase()){var n=TS.signup.ERROR_NAME_IS_SLACKBOT;return{is_valid:false,error_key:n,error_message:TS.signup.getErrorMessage(n)}}return{is_valid:true}},checkURLSyntax:function e(t){var r;t.length>n?r=TS.signup.ERROR_URL_LONG:i.test(t)?o.test(t)?r=TS.signup.ERROR_URL_START_END_DASH:a.test(t)||(r=TS.signup.ERROR_URL_NO_LETTER):r=TS.signup.ERROR_URL_BAD;if(r)return{is_valid:false,error_key:r,error_message:TS.signup.getErrorMessage(r)};return{is_valid:true}},checkURLAvailability:function e(t,n,r){if(!t||!n){TS.error("TS.signup.checkURLAvailability missing arguments");return Promise.resolve({is_valid:false,error_key:TS.signup.ERROR_MISSING_ARGS,error_message:TS.signup.getErrorMessage(TS.signup.ERROR_MISSING_ARGS)})}var i=TS.signup.checkURLSyntax(t);if(!i.is_valid)return Promise.resolve({is_valid:false,error_key:i.error_key,error_message:i.error_message});var a={email:n,url:t};r=r||{};r.lead_id&&(a.lead_id=r.lead_id);return new Promise(function(e){u("signup.checkURL",a,function(i,a){if(i)return e({is_available:true});if("ratelimited"===a.error)return e({error_key:TS.signup.ERROR_RATELIMITED,error_message:TS.signup.getErrorMessage(TS.signup.ERROR_RATELIMITED)});"bad"===a.error&&(a.error=TS.signup.ERROR_URL_BAD);"taken"===a.error&&(a.error=TS.signup.ERROR_URL_TAKEN);var o={is_available:false,error_key:a.error,error_message:TS.signup.getErrorMessage(a.error)};if(!r.get_suggestions)return e(o);TS.signup.suggestURL(t,n).then(function(t){o.available=t.available;o.unavailable=t.unavailable;return e(o)})})})},suggestURL:function e(t,n){if(!t||!n){TS.error("TS.signup.suggestURL missing arguments");return Promise.resolve({error_key:TS.signup.ERROR_MISSING_ARGS,error_message:TS.signup.getErrorMessage(TS.signup.ERROR_MISSING_ARGS)})}var r={email:n,url:t};return new Promise(function(e){u("signup.suggestURL",r,function(t,n){if(t)return e({available:n.available,unavailable:n.unavailable});return e({error_key:n.error})})})},createTeam:function t(n){if(d)return Promise.resolve(false);d=true;return new Promise(function(t){u("signup.createTeam",n,function(r,i){d=false;if(r)return t({team_created:true,signin_url:i.url,user_id:i.user_id,team_id:i.team_id,team_id_raw:i.team_id_raw,api_token:i.api_token,valid_signup_domain:i.valid_signup_domain});var a;if(i.error===TS.signup.ERROR_BAD_EMAIL_DOMAIN&&TS.utility.email_regex.test(n.email)){var o=_.escape(n.email.split("@")[1]);a=e[i.error]({email_domain:o})}return t({team_created:false,error_key:i.error,error_message:a||TS.signup.getErrorMessage(i.error)})})})},getErrorMessage:function t(n,r){return(e[n]||e[TS.signup.ERROR_MISC])(r||{})},test:function t(){return{error_messages:e}}});var e={};var t=function t(){e={bad_email_domain:TS.interop.i18n.t("Sorry, but we do not allow signups from @{email_domain}. Please pick a different email address!","signup"),domain_not_found:TS.interop.i18n.t("Are you sure that address is typed correctly? If there are no mistakes, carry on!","signup"),invalid_code:TS.interop.i18n.t("That code wasn\u2019t valid. Give it another go!","signup"),missing_username:TS.interop.i18n.t("Please fill in a username.","signup"),name_is_slackbot:TS.interop.i18n.t("Sorry, slackbot is a reserved word. Try something else!","signup"),misc:TS.interop.i18n.t("For some weird reason, that didn\u2019t work. Please try again to continue.","signup"),no_email:TS.interop.i18n.t("For some really weird reason, we\u2019re having trouble with your email. Please try again.","signup"),no_email_misc:TS.interop.i18n.t("For some really weird reason, we\u2019re having trouble with your email preferences. Please try again.","signup"),no_team_name:TS.interop.i18n.t("For some really weird reason, we\u2019re having trouble with your workspace name. Please try again.","signup"),no_url:TS.interop.i18n.t("For some reason, we\u2019re having trouble with your workspace URL. Please try again.","signup"),no_username:TS.interop.i18n.t("For some really weird reason, we\u2019re having trouble with your username. Please try again.","signup"),ratelimited:TS.interop.i18n.t("Sorry, you\u2019ve hit the rate limit. You\u2019ll be able to try again soon.","signup"),url_bad:TS.interop.i18n.t("Workspace URLs can only have letters, numbers, and dashes.","signup"),url_long:TS.interop.i18n.t("Please enter up to 21 characters for your Workspace URL.","signup"),url_no_letter:TS.interop.i18n.t("Please enter at least one letter for your Workspace URL.","signup"),url_start_end_dash:TS.interop.i18n.t("Workspace URLs can\u2019t start or end with a dash. Sorry!","signup"),url_taken:TS.interop.i18n.t("This URL is not available. Sorry!","signup"),username_bad:TS.interop.i18n.t("Sorry, usernames can only contain letters, numbers, periods, hyphens, and underscores, with no spaces!","signup"),username_long:TS.interop.i18n.t("Usernames cannot be longer than 21 characters.","signup"),username_not_allowed:TS.interop.i18n.t("Oops, sorry! Your username can\u2019t be {username}, as it\u2019s reserved for other uses.","signup"),username_start:TS.interop.i18n.t("Sorry, usernames must begin with a letter or number!","signup"),username_taken:TS.interop.i18n.t("Sorry, but this username is not available! Please pick another one.","signup")}};var n=21;var r=21;var i=new RegExp("^[a-z0-9-]+$","i");var a=new RegExp("[a-z]","i");var o=new RegExp("(^[-])|(.*[-])$","i");var s=new RegExp("^[a-z0-9-._]+$","i");var l=new RegExp("^[a-z0-9][a-z0-9-._]*$","i");var u;var c={};var f={};var d=false;var m=function t(n,r,i){var a=i&&i.get_info;var o={email:n,get_info:a};return new Promise(function(t){u("signup.checkEmail",o,function(n,i){if(n)return t({is_ok:true,api_response:i});var o;i.error===TS.signup.ERROR_BAD_EMAIL_DOMAIN?o=e[i.error]({email_domain:r}):i.error===TS.signup.ERROR_DOMAIN_NOT_FOUND?f[r]=false:a&&(f[r]=true);return t({is_ok:false,error_key:i.error,error_message:o||TS.signup.getErrorMessage(i.error)})})})}})()},11345:function(e,t){(function(){TS.registerModule("google_auth",{isAuthed:function e(n){return t[n]},pollForAuthStatus:function e(t,n,i,a){a=a||{};var o=a.interval||1e3;var s=a.max_attempts||Infinity;var l=0;var u;var c;var f=false;var d=function e(){l+=1;c=TS.google_auth.isAuthed(t);if(c||i&&i.closed){u=null;n(!!c)}else if(!f&&l<s){r(t);u=setTimeout(e,o)}};d();return{cancel:function e(){u&&clearTimeout(u);f=true}}},getAuthLink:function e(t){if(n[t])return Promise.resolve(n[t]);return new Promise(function(e){TS.api.call("services.googlecontacts.oauth.init",{instance_id:t}).then(function(r){n[t]=r.data.auth_url;e(r.data.auth_url)})})},getContactList:function e(t,n){if(!TS.google_auth.isAuthed(t))return Promise.resolve([]);return new Promise(function(e){var r=[];TS.google_auth.getContactsFromAPI(t,n,r,function(t){e(t||[])})})},getContactsFromAPI:function e(t,n,r,i){TS.api.call("services.googlecontacts.list",{instance_id:t,page:n.page,count:n.count}).then(function(e){r.push.apply(r,e.data.contacts);if(false===e.data.all_items_fetched){n.page+=1;TS.google_auth.getContactsFromAPI(t,n,r,i)}else{var a={items:r,all_items_fetched:e.data.all_items_fetched};i(a)}})},getContactListFromQuery:function e(t,n){if(!TS.google_auth.isAuthed(t))return Promise.resolve([]);return new Promise(function(e){TS.api.call("services.googlecontacts.search",{instance_id:t,query:n.query,page:n.page,count:n.count}).then(function(t){var n={items:t.data.contacts,all_items_fetched:t.data.all_items_fetched};e(n||[])})})},isAppsEmail:function t(n,r){if(!TS.utility.email.validateEmail(n).is_valid)return Promise.resolve({error_key:"invalid_email"});var i=n.split("@")[1];if(void 0!==e[i])return Promise.resolve(e[i]);var a;var o;var s={email:n,get_info:true};return new Promise(function(t){var n=function n(r,s){if(a){clearTimeout(a);a=null}r&&(e[i]={is_google:"google_apps"===s.type,auth_url:s.auth_url});if(!o)return t(e[i])};window.callSlackAPIUnauthed?window.callSlackAPIUnauthed("signup.checkEmail",s,function(e,t){n(e,t)}):TS.api.call("signup.checkEmail",s).then(function(e){var t=e.data;var r=true;n(r,t)}).catch(function(e){var t=e.data;var r=false;n(r,t)});r&&(a=setTimeout(function(){TS.log(99,"TS.google_auth.isAppsEmail timed out after "+r/1e3+" seconds");a=null;o=true;return t({error_key:"timed_out"})},r))})}});var e={};var t={};var n={};var r=function e(n){return new Promise(function(e){TS.api.call("services.googlecontacts.oauth.hasAuth",{instance_id:n}).then(function(r){var i=r.data.has_auth;t[n]=i;e(i)})})}})()},11346:function(e,t){(function(){TS.registerModule("ui.workspaces",{start:function e(){if(!TS.boot_data.page_needs_enterprise)return;if(TS.model.user.is_restricted)return;var t=TS.experiment.getGroup("ibm_workspace_directory_redesign");if("redesigned_workspace_directory"===t||TS.boot_data.feature_find_your_workspace){var n=TS.boot_data.enterprise_prefs,r=n.unlocked_prefs,i=n.locked_prefs,a=n.org_prefs;TS.redux.prefs.setEnterprisePrefs({unlocked_prefs:r,locked_prefs:i,org_prefs:a});var s=document.getElementById("directory_mount_point");TS.interop.setAppElementForReactModal("#directory_mount_point");TS.interop.mountWorkspaceDirectory(TS.boot_data.team_id,s,{userId:TS.boot_data.user_id,showRequestDialog:function e(t){TS.enterprise.workspaces.showRequestDialog(t)},launchTeamId:TS.boot_data.launch_page_team,onClose:function e(){TS.interop.unmountWorkspaceDirectory(s)}})}else{l=TS.redux.enterprise.getEnterpriseOrgName();TS.boot_data.feature_invite_only_workspaces&&d(l);TS.boot_data.feature_single_user_workspace_pagination&&(o.response_key="items");m(o)}}});var e=true;var t="[data-workspace-list-container]";var n="[data-workspace-empty-state]";var r=1e3;var i;var a=[];var o={query:"",additional_args:{workspaces:"all",sort_by:"name"},sort_dir:"asc",endpoint:"enterprise.teams.directory",response_key:"teams",max_api_results:100};var s;var l;var u=function e(){y();TS.boot_data.feature_invite_only_workspaces&&f()};var c=function e(){};var f=function e(){TS.boot_data.feature_invite_only_workspaces||_.workspace_searcher.items.length||$("[data-workspaces-list-controls]").addClass("hidden");var n=110;i=$(".workspaces_modal .contents_container");$(t).longListView({items:[],approx_item_height:n,preserve_dom_order:true,scrollable:i,makeElement:function e(){return $('<div class="full_width"></div>')},renderItem:function e(t,n){var r={team:n,user:TS.model.user};t.html(TS.templates.enterprise_teams_launch_card_wrapper(r))},calcItemHeight:function e(t,r){if(_.isEmpty(_.get(r,"description","")))return n;return t.height()}});h(t)};var d=function e(t){if(TS.ui.fs_modal.is_showing)return;var n={teams:TS.boot_data.feature_invite_only_workspaces?a.length:a,org_prefs_ws_request_admin_enabled:_.get(TS.boot_data,"enterprise_prefs.org_prefs.enterprise_team_creation_request.is_enabled")&&!TS.model.user.is_restricted};var r={title:TS.interop.i18n.t("Join {enterprise_name} Workspaces","enterprise_workspaces")({enterprise_name:t}),body_template_html:TS.templates.workspaces_dialog(n),onShow:u,onCancel:c,modal_class:"fs_modal_header workspaces_modal"};TS.ui.fs_modal.start(r)};var m=function r(i){o=TS.enterprise.workspaces.buildWorkspaceSearcher(o,i);return TS.enterprise.workspaces.promiseToSearchWorkspaces(o).then(function(r){var i="workspaces_not_on";var a="name";var s="";var l=TS.enterprise.workspaces.getList(i,a,s,e,r.items);var u=TS.boot_data.logout_url;l=l.map(function(e){if(e.lfs_id)return e;var t=TS.enterprise.workspaces.createURL(e,u);e.launch_url=t+"messages";e.site_url=t+"home";e.signout_url=TS.enterprise.workspaces.createLogoutURL(e.id,u);e.lfs_id=String(e.id);return e});p(l);TS.boot_data.feature_invite_only_workspaces&&(l.length?T(n,t):_.get(o,"additional_args.search")&&S(n,t));$(t).longListView("setItems",l,true)}).then(function(){TS.boot_data.feature_invite_only_workspaces||d(l)})};var v=function e(t){var n=t.target.value;var r=_.assign({},o.additional_args,{search:n});var i=_.assign({},o,{additional_args:r});m(i)};var g=function e(t){var n=$(t.target).scrollTop();var i=s-n;i<=r&&n>0&&m(o)};var p=function e(t){a=t};var h=function e(t){s=$(t).find(".list_items").height()};var S=function e(t,n){$(n).addClass("hidden");$(t).html(TS.templates.no_workspace_results()).removeClass("hidden")};var T=function e(t,n){$(t).html("").addClass("hidden");$(n).removeClass("hidden")};var y=function t(){var n=$(".workspaces_modal");var r=n.find(".workspaces");var a=n.find(".workspace_info");var s=n.find(".title_bar");var l=n.find(".sort_by_container select");var u=n.find('[data-qa="teams_search"]');var c=i||$(".workspaces_modal .contents_container");var f=TS.boot_data.logout_url;n.off();u.off();l.off();a.off();c.off();var d=function e(t){return TS.enterprise.workspaces.joinTeam(t).then(function(e){if(e){var r=_.merge({},TS.model.user);r.enterprise_user.teams=_.uniq(r.enterprise_user.teams.concat(t));TS.members.legacyUpsertMember(r);var i=TS.teams.getTeamById(t);n.find('[data-id="'+t+'"]').html(TS.enterprise.workspaces.getTeamCardHTML(i,f));var a="workspace_detail";var o="find_workspaces";TS.enterprise.workspaces.recordTeamJoin(i.id,o,a)}return e})};u.on("input",function(n){if(TS.boot_data.feature_invite_only_workspaces)v(n);else{var i=$(this).val();var a=l.val();var o;o="workspaces_not_on";var s=TS.enterprise.workspaces.getList(o,a,i,e);var u="";s.length?s.forEach(function(e){u+=TS.enterprise.workspaces.getTeamCardHTML(e,f,true)}):u+=TS.templates.no_workspace_results();r.html(u);t()}});l.on("change",function(){var n=$(this).val();var i=u.val();var a="workspaces_not_on";var o=TS.enterprise.workspaces.getList(a,n,i,e);var s="";o.forEach(function(e){s+=TS.enterprise.workspaces.getTeamCardHTML(e,f,true)});r.html(s);t()});n.on("click",".enterprise_team_card",function(){var e=$(this).data("id");r.addClass("hidden");s.addClass("hidden");u.addClass("hidden").attr("disabled","disabled");a.html(TS.templates.team_info({list:"workspaces_not_on"})).removeClass("hidden");var t={top_combined_channels:5,include_admins:true};return TS.redux.teams.ensureEnterpriseTeamIsKnown(e,t).then(function(e){if(!e)return;var t=TS.enterprise.workspaces.createURL(e,f);e.launch_url=t+"messages";e.site_url=t+"home";a.html(TS.templates.team_info({list:"teams_not_on",team:e,user:TS.model.user}));var n="find_workspaces";var r="workspaces_you_can_join_list";TS.enterprise.workspaces.recordTeamView(e.id,n,r)})});a.on("click",".back_to_teams",function(e){e.preventDefault();r.removeClass("hidden");s.removeClass("hidden");u.removeClass("hidden").removeAttr("disabled");a.addClass("hidden")});a.on("click",'button[data-qa="join-btn"]',function(){var e=Ladda.create(this);e.start();var t=$(this).data("id");var n=TS.teams.getTeamById(t);d(t).then(function(t){e.stop();if(t){var r=TS.enterprise.workspaces.createURL(n,f);n.launch_url=r+"messages";n.site_url=r+"home";a.html(TS.templates.team_info({list:"teams_not_on",team:n,user:TS.model.user}));var i="find_workspaces";var o="workspace_detail";TS.enterprise.workspaces.recordTeamJoin(n.id,i,o)}return t})});a.on("click",'[data-qa="leave-btn"]',function(e){e.preventDefault();var t=$(this).data("id");TS.ui.leave_team_dialog.start(t)});a.on("click",'button[data-qa="request-to-join-btn"]',function(e){e.preventDefault();var t=Ladda.create(this);t.start();var r=$(this).data("id");TS.enterprise.workspaces.requestToJoinTeam(r).then(function(){var e=TS.teams.getTeamById(r);n.find('[data-id="'+r+'"]').html(TS.enterprise.workspaces.getTeamCardHTML(e,f));t.stop();var i=TS.enterprise.workspaces.createURL(e,f);e.launch_url=i+"messages";e.site_url=i+"home";a.html(TS.templates.team_info({list:"teams_not_on",team:e,user:TS.model.user}));var o="find_workspaces";var s="workspace_detail";TS.enterprise.workspaces.recordTeamRequestToJoin(e.id,o,s)}).catch(function(){t.stop()})});n.on("click",".enterprise_team_menu",function(e){e.stopPropagation();var t=$(this).val();var n=$(this).data("id");var r=TS.teams.getTeamById(n);TS.menu.enterprise_team_signin.start(e,$(this),{list:"teams_not_on",team_id:n,team_site_url:t,should_show_leave_team:TS.permissions.enterprise.canUserLeaveTeam(TS.model.user,r)})});n.on("click",".enterprise_team_join",function(e){e.stopPropagation();var t=Ladda.create(this);t.start();var n=$(this).data("id");d(n).then(t.stop)});n.on("click",".enterprise_team_request",function(e){e.stopPropagation();var t=Ladda.create(this);t.start();var r=$(this).data("id");TS.enterprise.workspaces.requestToJoinTeam(r).then(function(){var e=TS.teams.getTeamById(r);t.stop();n.find('[data-id="'+r+'"]').html(TS.enterprise.workspaces.getTeamCardHTML(e,f));var i="find_workspaces";var a="workspaces_you_can_join_list";TS.enterprise.workspaces.recordTeamJoin(r,i,a)}).catch(function(){t.stop()})});var m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.stopPropagation();var r=$(t.target).data("id");if(TS.model.is_our_app){t.preventDefault();var i=TSSSB.call("getSignedInTeamIds");if(_.includes(i,r))if(TS.interop.environment.isSSBAndAtLeastVersion("2.8"))TSSSB.call("displayTeamById",r);else{var a=document.createElement("iframe");var o="slack://open?team="+r;a.src=o;document.body.appendChild(a);setTimeout(function(){return a.remove()},1e3)}else{var s=TS.teams.getTeamById(r);var l={name:TS.model.user.name,id:TS.model.user.id,team_id:r,team_name:s.name,team_url:TS.utility.enterprise.buildTeamUrl(s.domain)};TSSSB.call("didSignIn",l)}TS.prefs.removeTeamFromEnterpriseExcluedTeamPref(r)}TS.enterprise.workspaces.recordTeamLaunch(r,"find_workspaces",n)};n.on("click",'.enterprise_team_card [data-name="launch_team_button"]',function(e){return m(e,"workspaces_list")});a.on("click",'[data-name="launch_team_button"]',function(e){return m(e,"workspace_detail")});n.on("click",'[data-qa="ws-request-new-team"]',function(e){e.stopPropagation();var t=_.get(TS.boot_data,"enterprise_prefs.org_prefs.enterprise_team_creation_request.is_enabled")&&!TS.model.user.is_restricted;t&&TS.enterprise.workspaces.showRequestDialog()});c.on("scroll",_.debounce(function(e){o.num_remaining&&g(e)},60))}})()},11347:function(e,t){(function(){TS.registerModule("mentions",{mention_changed_sig:new signals.Signal,mention_removed_sig:new signals.Signal,mentions_fetched_sig:new signals.Signal,mentions_being_fetched_sig:new signals.Signal,mentions_being_fetched:false,mentions_needs_fetched:false,has_more:false,after_ts:null,fetched_once:false,active_tab:"all",test:function t(){var t={};Object.defineProperty(t,"mentions",{get:function t(){return e},set:function t(n){e=n}});return t},onStart:function e(){TS.prefs.mentions_exclude_at_channels_changed_sig.add(r);TS.prefs.mentions_exclude_at_user_groups_changed_sig.add(i)},maybeUpdateMentions:function e(t){if("client"!==TS.boot_data.app)return;if(!TS.model.team)return;if(TS.mentions.mentions_being_fetched||!TS.mentions.fetched_once||"mentions"!==TS.model.ui_state.flex_name){TS.mentions.mentions_needs_fetched=true;return}TS.mentions.updateMentions(t)},updateMentions:function e(n){TS.mentions.mentions_being_fetched=true;TS.mentions.mentions_needs_fetched=false;TS.mentions.mentions_being_fetched_sig.dispatch(n);var r=true;TS.api.call("activity.mentions",t(),null,r).then(function(e){var t=e.data,n=e.args,r=e.request_id;var i=true;TS.mentions.onFetchMentions&&TS.mentions.onFetchMentions(i,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var i=false;TS.mentions.onFetchMentions&&TS.mentions.onFetchMentions(i,t,n,r);return{data:t,args:n,request_id:r}})},fetchMoreMentions:function e(){TS.mentions.fetchMentions(TS.mentions.after_ts)},fetchMentions:function e(n){TS.mentions.mentions_needs_fetched=false;TS.mentions.fetched_once=true;var r=t();n=n||"";r.after_ts=n;TS.api.call("activity.mentions",r).then(function(e){var t=e.data,n=e.args,r=e.request_id;var i=true;TS.mentions.onFetchMentions&&TS.mentions.onFetchMentions(i,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var i=false;TS.mentions.onFetchMentions&&TS.mentions.onFetchMentions(i,t,n,r);return{data:t,args:n,request_id:r}})},getAllMentions:function t(){return e},getMentionByMsgId:function t(n,r,i){var a;var o;var s;function l(e,t){return _.find(e,function(n,r){if(n.message&&n.message.ts===t){o=e;s=r;return true}return false})}a=l(e,n);if(!a)return null;r&&a.message?a.message=r:i&&_.isArray(o)&&_.isNumber(s)&&o.splice(s,1);return a},onFetchMentions:function t(n,r){TS.mentions.mentions_being_fetched=false;TS.mentions.mentions_needs_fetched&&setTimeout(TS.mentions.maybeUpdateMentions,100);if(!n){TS.error("failed fetchMentions");return}var i;var a=[];var o;for(var s=0;s<r.mentions.length;s+=1){i=r.mentions[s];if("reaction"===i.type)if("message"===i.item.type){i.rxn_ts=i.ts;i.channel=i.item.channel;i.message=i.item.message;i.item.message._rxn_key=TS.rxns.getRxnKey("message",i.item.message.ts,i.item.channel);delete i.item}else{if("file"!==i.item.type)continue;i.rxn_ts=i.ts;i.channel=_.first(i.item.file.channels)||_.first(i.item.file.groups)||_.first(i.item.file.ims);i.message={file:i.item.file,subtype:"file_reaction",ts:i.ts};delete i.item}var l=i.message;if(!l)continue;var u=l.file;var c=l.comment;if("file_share"===l.subtype||"file_mention"===l.subtype||"file_comment"===l.subtype||"file_reaction"===l.subtype){if(!u)continue;if("file_comment"===l.subtype&&!c)continue}if("0000000000.000000"==l.ts){TS.warn("bad mention! msg.ts == 0000000000.000000");continue}if("file_share"===l.subtype||"file_mention"===l.subtype||"file_comment"===l.subtype||"file_reaction"===l.subtype){u._rxn_key=TS.rxns.getRxnKey("file",u.id);o=TS.rxns.getExistingRxnsByKey(u._rxn_key);o&&!u.reactions?TS.warn("file:"+u.id+" has reactions in local model, but we got an object in mentions that does NOT have reactions, which seems suspicious"):TS.rxns.upsertRxnsFromDataAndUpdateUI(u._rxn_key,u.reactions);if("file_comment"===l.subtype){c._rxn_key=TS.rxns.getRxnKey("file_comment",c.id);o=TS.rxns.getExistingRxnsByKey(c._rxn_key);o&&!c.reactions?TS.warn("comment:"+c.id+" has reactions in local model, but we got an object in mentions that does NOT have reactions, which seems suspicious"):TS.rxns.upsertRxnsFromDataAndUpdateUI(c._rxn_key,c.reactions)}}else{l._rxn_key=TS.rxns.getRxnKey("message",l.ts,i.channel);o=TS.rxns.getExistingRxnsByKey(l._rxn_key);o&&!l.reactions?TS.warn("msg:"+l.ts+" has reactions in local model, but we got an object in mentions that does NOT have reactions, which seems suspicious"):TS.rxns.upsertRxnsFromDataAndUpdateUI(l._rxn_key,l.reactions);var f=TS.redux.channels.getEntityById(i.channel);var d=f&&TS.utility.msgs.getMsg(l.ts,f.msgs);d&&(l.is_starred=d.is_starred)}if(TS.mentions.getMentionByMsgId(l.ts,l))continue;a.push(i)}e=e.concat(a);TS.mentions.sortMentions();TS.mentions.has_more=r.has_more;if(e.length){i=e[e.length-1];TS.mentions.after_ts="reaction"===i.type?i.rxn_ts:i.message.ts}TS.mentions.mentions_fetched_sig.dispatch()},sortMentions:function t(){var n;var r;function i(e,t){n=e.rxn_ts||e.message.ts;r=t.rxn_ts||t.message.ts;if(n<r)return 1;if(n>r)return-1;return 0}e.sort(i)},replaceMsg:function e(t){var n=TS.mentions.getMentionByMsgId(t.ts,t);n&&TS.mentions.mention_changed_sig.dispatch(n)},legacyRemoveMsg:function e(t){var n=TS.mentions.getMentionByMsgId(t,null,true);n&&TS.mentions.mention_removed_sig.dispatch(t)},setExcludeAtChannelsPref:function e(t){t=!!t;TS.prefs.setPrefLocal("mentions_exclude_at_channels",t);TS.prefs.setPrefByAPI({name:"mentions_exclude_at_channels",value:t});r()},setExcludeAtUserGroupsPref:function e(t){t=!!t;TS.prefs.setPrefLocal("mentions_exclude_at_user_groups",t);TS.prefs.setPrefByAPI({name:"mentions_exclude_at_user_groups",value:t});i()},weaveInRxnRecords:function t(){var n=TS.rxns.getRxnRecords();var r;var i;var a;var o;e=e.filter(function(e){return"rxn"!==e.type});for(var s=0;s<n.length;s+=1){i=n[s].rxn_key;r=TS.rxns.getRxnKeyParts(i);if("message"!==r.type){if("file"===r.type)continue;if("file_comment"===r.type)continue;continue}o=TS.utility.msgs.findMsg(r.id,r.c_id);if(!o)continue;TS.mentions.getMentionByMsgId(r.id,null,true);a={channel:r.c_id,type:"reaction",rxn_ts:n[s].last_update,message:_.cloneDeep(o)};a.message._rxn_key=i;e.push(a)}TS.mentions.sortMentions()}});var e=[];var t=function e(){return n()};var n=function e(){var t={count:20,reactions:1};var n=["thread"];if(TS.prefs.getPref("mentions_exclude_at_channels")){n.push("everyone");n.push("channel")}TS.prefs.getPref("mentions_exclude_at_user_groups")&&n.push("user_group");n.length>0&&(t.exclude=n.join(","));return t};var r=function e(){var t=TS.prefs.getPref("mentions_exclude_at_channels");if(t){a(["everyone","channel"]);TS.mentions.mentions_fetched_sig.dispatch()}else TS.mentions.maybeUpdateMentions()};var i=function e(){var t=TS.prefs.getPref("mentions_exclude_at_user_groups");if(t){a(["user_group"]);TS.mentions.mentions_fetched_sig.dispatch()}else TS.mentions.maybeUpdateMentions()};var a=function t(n){var r;for(var i=e.length-1;i>=0;i-=1){r=e[i];-1!==n.indexOf(r.type)&&e.splice(i,1)}}})()},11348:function(e,t){(function(){TS.registerModule("ui.leave_team_dialog",{team_id:null,ladda:null,list:null,start:function n(r,a){TS.ui.leave_team_dialog.team_id=r;TS.ui.leave_team_dialog.list=a;var o=TS.teams.getTeamById(TS.ui.leave_team_dialog.team_id);var s={team:o};if(TS.boot_data.feature_leave_workspace_improvements){var l=TS.templates.team_icon({team:o,size:20,classes:"small_right_margin"});var u=TS.interop.i18n.t("Are you sure you want to leave {team_name}?","archives")({team_name:_.escape(_.get(o,"name"))});var c=_.get(o,"is_unlisted")?TS.interop.i18n.t("<p>This workspace is unlisted, which means you\u2019ll have to be invited back to regain access. Are you sure you want to leave?</p>","enterprise_workspaces")():"";var f={title:'<div class="display_flex margin_right_200"><div class="p-workspaces__workspace_icon">'+l+"</div><div>"+u+"</div></div>",body:c,show_cancel_button:true,esc_for_ok:false,go_button_text:TS.interop.i18n.t("Leave This Workspace","enterprise_workspaces")({team_name:_.escape(o.name)}),onGo:t,ladda_go:true};TS.generic_dialog.start(f)}else{var d={title:TS.interop.i18n.t("Leave Workspace","enterprise_workspaces")(),body_template_html:TS.templates.leave_workspace_dialog(s),onShow:e,onCancel:i,modal_class:"leave_team_modal"};TS.ui.fs_modal.start(d)}}});var e=function e(){var n=$(".leave_team_modal .leave_team_modal_contents");n.find(".buttons").on("click","button",function(){var e=$(this).data("qa");if("cancel_leave_team"===e)TS.ui.fs_modal.close();else if("confirm_leave_team"===e){var n=Ladda.create(this);n.start();t()}})};var t=function e(){var t={team:TS.ui.leave_team_dialog.team_id};TS.model.enterprise_api_token&&(t.enterprise_token=TS.model.enterprise_api_token);var i=function e(t,i,a){var o=TS.teams.getTeamById(a.team);var s=emoji.replace_colons(":sparkles:");s+=TS.interop.i18n.t(" You\u2019ve successfully left <strong>{team_name}</strong>","enterprise_workspaces")({team_name:_.escape(o.name)});if(t){n(a.team);if(!TS.boot_data.feature_leave_workspace_improvements){r("success",s);TS.ui.fs_modal.close()}TS.boot_data.feature_leave_workspace_improvements&&TS.client&&TS.model.team.id===a.team&&TS.client.reloadOrRemoveTeam(a.team)}else{var l;if("disable_denied_due_to_idpgroup_membership"===i.error){var u=TS.redux.enterprise.getEnterprise();l=TS.interop.i18n.t('You can\u2019t leave this workspace.<br>Because you\u2019re in an IdP group assigned to this workspace, you can\u2019t leave it here. <a href="mailto:{primary_owner_email}" target="_blank">Contact an Org Admin</a> for help leaving the workspace.',"enterprise_workspaces")({primary_owner_email:u.primary_owner.email});r("error",l)}else if("user_deleted_already"===i.error){n(a.team);r("success",s);TS.ui.fs_modal.close()}else if("failed_to_convert_org_user_to_team_user"===i.error){n(a.team);r("success",s);TS.ui.fs_modal.close()}else{l=TS.interop.i18n.t('Leaving workspace failed with error "{error}"',"enterprise_workspaces")({error:i.error});r("error",l)}}};TS.api.call("enterprise.teams.leave",t).then(function(e){var t=e.data,n=e.args,r=e.request_id;var a=true;i(a,t,n,r);return{data:t,args:n,request_id:r}}).catch(function(e){var t=e.data,n=e.args,r=e.request_id;var a=false;i(a,t,n,r);return{data:t,args:n,request_id:r}});var a;var o;if("teams_on"===TS.ui.leave_team_dialog.list||"workspaces_on"===TS.ui.leave_team_dialog.list){a="your_workspaces";o="your_workspaces_list"}else{a="find_workspaces";o="workspaces_you_can_join_list"}TS.enterprise.workspaces.recordTeamLeaveConfirm(TS.ui.leave_team_dialog.team_id,a,o)};var n=function e(t){var n=_.merge({},TS.model.user);n.enterprise_user.teams=n.enterprise_user.teams.filter(function(e){return e!==t});"web"===TS.boot_data.app?TS.model.user=n:TS.members.legacyUpsertMember(n);var r=TS.teams.getTeamById(t);var i=$('[data-id="'+t+'"]');r.is_unlisted?i.remove():i.html(TS.enterprise.workspaces.getTeamCardHTML(r));var a=$('.workspace_info[data-team-id="'+t+'"]');if(a.length){var o=$(".workspaces").attr("data-list");a.html(TS.templates.team_info({list:o,team:r,user:TS.model.user}))}};var r=function e(t,n){TS.ui.toast.show({type:t,message:n})};var i=function e(){}})()},11349:function(e,t){(function(){TS.registerModule("api.connection",{onStart:function e(){u=TS.qs_args.api_timings||TS.utility.enableFeatureForUser(l)},test:function e(){var t={};Object.defineProperty(t,"_should_send_timing_data",{get:function e(){return u},set:function e(t){u=t}});Object.defineProperty(t,"_internet_connected_p",{get:function e(){return o},set:function e(t){o=t}});Object.defineProperty(t,"_ms_reconnected_p",{get:function e(){return s},set:function e(t){s=t}});return t},waitForAPIConnection:function e(r){var s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(o)return o;var l=0;var d=function e(){return false===window.navigator.onLine?t:Math.min(n+(s&&c()),i)};var m=function e(){a=0};var v=function e(t){if("number"===typeof r&&l>r){var n="Unable to reconnect to the API after "+l+" retry attempts";TS.warn(n);S.dispatch(new Error(n));return}if(l>0){var i=t?"unable to reach API":"browser says it is still offline";TS.warn("Internet connection still offline after "+l+" attempts ("+i+")")}l+=1;a+=1;setTimeout(p,d())};var g=function e(){if(l>0){if(u)var t=TS.metrics.measureAndClear("api_offline_duration","api_connectivity_lost");var n=_.round(t/1e3,2);var r=l?"Internet connection has been re-established after "+l+" retry attempts;":"Internet connection has been re-established";var i=[r,"offline for "+n+" seconds"];TS.info(i.join(" "))}m();window.removeEventListener("online",m);h.dispatch()};var p=function e(){if(false===window.navigator.onLine){var t=a%100===99;if(!t){var n=false;v(n);return}}f(function(e){if(e)g();else{var t=true;v(t)}})};var h=new signals.Signal;var S=new signals.Signal;u&&TS.metrics.mark("api_connectivity_lost");window.addEventListener("online",m);o=new Promise(function(e,t){h.addOnce(function(){o=void 0;e()});S.addOnce(function(e){o=void 0;t(e)});p()});return o},promiseToTestAPIConnection:function e(){return new Promise(function(e){f(function(t){e(t)})})},waitForMSToReconnect:function e(){if(TS.redux.socket.isConnected())return Promise.resolve();s||(s=new Promise(function(e){TS.redux.socket.connectedSig.addOnce(function(){s=void 0;e()})}));return s}});var e=1e3;var t=e;var n=20*e;var r=5*e;var i=300*e;var a=0;var o;var s;var l=0;var u;var c=function e(){if(!a)return 0;return r*(1+Math.random())*Math.pow(1.25,a)};var f=function e(t){var n=6e4;$.ajax({url:TS.model.api_url+"api.test",timeout:n,cache:false,data:{user_id:TS.boot_data.user_id,team_id:TS.boot_data.team_id,version_ts:TS.boot_data.version_ts},method:"POST"}).then(function(e){var n=!!(e&&e.ok);t(n)}).fail(function(){t(false)})}})()},11350:function(e,t){(function(){TS.registerModule("permissions.teams",{canLeaveTeam:function e(t){if(!_.get(t,"enterprise_id"))return false;return!!(false===t.can_leave&&t.cannot_leave_reasons&&1===t.cannot_leave_reasons.length&&"not_team_member"===t.cannot_leave_reasons[0]&&!t.is_assigned)}})})()},11351:function(e,t){(function(){TS.registerModule("ui.utility",{onStart:_.noop,preventElementFromScrolling:function e(n,r,i){n=$(n);if(!n.length||t){r();return}var a=n.offset();try{t=true;r()}finally{t=false}if(_.isFunction(i)){n=i();if(!n.length)return}var o=n.offset().top;var s=o-a.top;var l=n.closest(".monkey_scroller");l.length||(l=n.closest(":scrollable(vertical)"));l.is("html")&&(l=$("body"));if(0!==s){var u=l.scrollTop()+s;l.scrollTop(Math.round(u))}TS.client&&TS.ui.utility.updateClosestMonkeyScroller(n)},updateClosestMonkeyScroller:function e(t,n){if(!t)return;var r=t.closest(".monkey_scroller");var i=r.data("monkeyScroll");if(!i)return;if(!r.data("monkeyScrollBeingCalled")){r.data("monkeyScrollBeingCalled",true);TS.utility.setImmediate(function(){i.updateFunc(n);r.data("monkeyScrollBeingCalled",false)})}},nextWithClass:function e(t,n){var r=t.next();return r.hasClass(n)||!r.length?r:TS.ui.utility.nextWithClass(r,n)},prevWithClass:function e(t,n){var r=t.prev();return r.hasClass(n)||!r.length?r:TS.ui.utility.prevWithClass(r,n)},findNodeInRegion:function e(t,n,r,i,a){var o=5;var s=o;var l=(r-a)/(n-i/o)+o;var u=function e(n,r){var a=document.elementFromPoint(n,r);var o=$(a).closest(t);if(o.length)return o;if(n<=i)return;var u=n-s;var c=r-l;return e(u,c)};return u(n,r)},isTextInput:function t(n){return n.is(e)}});var e=["input:not([type])","input[type=text]","input[type=search]","input[type=url]","input[type=tel]","input[type=email]","input[type=password]","input[type=number]","input[type=date]","input[type=month]","input[type=week]","input[type=time]","input[type=datetime]","input[type=datetime-local]","textarea","[role=textbox]"].join(",");var t=false})()},11352:function(e,t){(function(){TS.registerModule("validation",{onStart:function e(){l()},firstalphanumeric:u,isurl:c,lowercase:f,maxlength:d,minlength:m,nospace:v,required:g,reservedwords:p,keywords:h,username:S,username_with_errors:T,display_or_realname:x,display_or_realname_with_errors:E,team_name:y,team_name_with_errors:b,channel_name:C,channel_name_with_errors:O,is_email:k,pattern:w});var e=80;var t=21;var n=21;var r=/[`~!@#$%^&*+=\\:"<>?|]/;var i=/[ .,;'`~!@#$%^&*+=\\:"<>?|]/;var a=/^[-_.'\u2018\u2019",(){}[\]/;]+$/;var o=/^(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;var s={};var l=function e(){s={empty:TS.interop.i18n.t("Please fill in your workspace name.","ui_validation")(),too_long:TS.interop.i18n.t("Sorry, your workspace name must be 255 characters or fewer!","ui_validation")()}};function u(e){return/^[^\W_]/.test(e)}function c(e){if(!e)return true;var t=e.match(o);if(t&&1===t.length&&t[0]===e)return true;return false}function f(e){return e===e.toLocaleLowerCase()}function d(e,t){return e.length<=t}function m(e,t){return e.length>=t}function v(e){return!/\s/.test(e)}function g(e){return e.trim().length>0}function p(e,t){var n=e.trim().toLowerCase();return-1===t.indexOf(n)}function h(e){var t=e.trim().toLowerCase();return-1===TS.model.RESERVED_KEYWORDS.indexOf(t)}function S(e){return g(e)&&d(e,n)&&v(e)&&w(e,/^[\w._-]+$/)&&u(e)&&f(e)&&p(e,TS.model.RESERVED_USERNAMES)}function T(e){if(!g(e))return"empty";if(!d(e,n))return"too_long";if(!v(e))return"contains_spaces";if(!w(e,/^[\w._-]+$/))return"contains_special_characters";if(!u(e))return"bad_first_character";if(!f(e))return"contains_uppercase";if(!p(e,TS.model.RESERVED_USERNAMES))return"contains_reserved_words";return true}function y(e){return g(e)&&d(e,255)}function b(e){if(!g(e))return{error_key:"empty",error_message:s.empty};if(!d(e,21))return{error_key:"too_long",error_message:s.too_long};return true}function w(e,t){return t.test(e)}function k(e){var t=e.match(TS.utility.email.EMAIL_REGEX);return t&&1===t.length&&t[0]===e||false}function x(t){return g(t)&&d(t,e)&&p(t,TS.model.RESERVED_USERNAMES)&&!w(t,/^@/)&&!w(t,a)&&!w(t,r)&&!TS.emoji.hasUnifiedEmoji(t)}function E(t){if(!g(t))return{error_key:"name_invalid_name_required",error_message:TS.ui.validation.getErrorMessage("name_invalid_name_required")};if(!d(t,e))return{error_key:"too_long",error_message:TS.ui.validation.getErrorMessage("too_long",{maxlength:e})};if(!p(t,TS.model.RESERVED_USERNAMES))return{error_key:"invalid_reserved_word",error_message:TS.ui.validation.getErrorMessage("invalid_reserved_word")};if(w(t,/^@/))return{error_key:"invalid_starts_with_at",error_message:TS.ui.validation.getErrorMessage("invalid_starts_with_at")};if(w(t,a))return{error_key:"invalid_name_punctuation",error_message:TS.ui.validation.getErrorMessage("invalid_name_punctuation")};if(w(t,r))return{error_key:"name_invalid_name_specials",error_message:TS.ui.validation.getErrorMessage("name_invalid_name_specials")};if(TS.emoji.hasUnifiedEmoji(t))return{error_key:"invalid_emoji_not_allowed",error_message:TS.ui.validation.getErrorMessage("invalid_emoji_not_allowed",{name:_.escape(t)})};return true}function C(e){return g(e)&&d(e,t)&&!w(e,a)&&!w(e,i)&&!TS.redux.channels.getPublicOrPrivateChannelByName(e)&&!TS.interop.members.memberExistsWithName(e)}function O(e){if(!g(e))return{error_key:"invalid_name_required",error_message:TS.ui.validation.getErrorMessage("invalid_name_required")};if(!d(e,t))return{error_key:"invalid_name_maxlength",error_message:TS.ui.validation.getErrorMessage("invalid_name_maxlength",{maxlength:t})};if(w(e,a))return{error_key:"invalid_name_punctuation",error_message:TS.ui.validation.getErrorMessage("invalid_name_punctuation")};if(w(e,i))return{error_key:"invalid_name_specials",error_message:TS.ui.validation.getErrorMessage("invalid_name_specials")};if(TS.emoji.hasUnifiedEmoji(e))return{error_key:"invalid_emoji_not_allowed",error_message:TS.ui.validation.getErrorMessage("invalid_emoji_not_allowed",{name:_.escape(e)})};if(TS.redux.channels.getPublicOrPrivateChannelByName(e)||TS.interop.members.memberExistsWithName(e))return{error_key:"name_taken",error_message:TS.ui.validation.getErrorMessage("name_taken",{name:_.escape(e)})};return true}})()},11353:function(e,t){(function(){TS.registerModule("ui.team_picker",{STYLES:{normal:"normal",small:"small"},onStart:function e(){},make:function t(r,i,a){i=i||{};var o;var s;var l;i.append||TS.useReactLFS()&&a||r.addClass("hidden");i.style=_.get(TS.ui.team_picker.STYLES,i.style,TS.ui.team_picker.STYLES.normal);var u={append:!!i.append,approx_item_height:38,per_page:50,placeholder_text:TS.interop.i18n.t("Add workspaces","team_picker")(),classes:"team_picker",restrict_preselected_item_removal:i.restrict_preselected_item_removal||false,single:!!i.single,style:i.style,template:function e(t){if(TS.useReactLFS()&&a)return TS.interop.lazyFilterSelect.teamPickerListItem(t);var n=TS.templates.invite_team_small({team:t.team});return new Handlebars.SafeString(n)},tokenTemplate:function e(t){if(TS.useReactLFS()&&a)return TS.interop.lazyFilterSelect.teamPickerToken(t);var n=TS.templates.invite_team_token({team:t.team});return new Handlebars.SafeString(n)},filter:function e(t,r){var i=t.team;if(o!==r){s=new RegExp("^"+TS.utility.regexpEscape(r),"i");l=new RegExp("(-|_|\\+|\\s|\\.|@)"+TS.utility.regexpEscape(r),"i");o=r}return n(i,s)||n(i,l)},noResultsTemplate:function e(t){if(!t)return TS.interop.i18n.t("No workspaces found","team_picker")();return TS.interop.i18n.t("No workspaces found matching <strong>{query}</strong>","team_picker")({query:TS.interop.i18n.safeString(_.escape(t))})}};if(TS.useReactLFS()&&a){u=_.assign({},u,{approxItemHeight:u.approx_item_height,onValueChange:i.onValueChange,placeholderText:u.placeholder_text,restrictPreselectedItemRemoval:u.restrict_preselected_item_removal,onListShown:function e(){TS.ui.lazy_filter_select.is_list_open=true;TS.kb_nav.pause(true)},onListHidden:function e(){TS.ui.lazy_filter_select.is_list_open=false;TS.kb_nav.pause(false)}});u.dataPromise=e(i);TS.interop.mountLazyFilterSelect(TS.boot_data.team_id,r,u)}else{u.data_promise=e(i);r.lazyFilterSelect(u)}},value:function e(t){return t.lazyFilterSelect("value")},createFilterFunction:function t(n){return e(n)}});var e=function e(n){var r={};return function(e){r.query=e;r.included_ids=_.get(n,"included_ids",[]);r.omitted_ids=_.get(n,"omitted_ids",[]);var i="TS.ui.team_picker._createFilterFunction:preselected_ids";return TS.teams.ensureTeamsArePresent(n.preselected_ids||[],i).then(function(){return t(r,n)})}};var t=function e(t,n){var r=_.keyBy(n.preselected_ids,_.identity);var i=_.get(n,"preselect_all");var a=_.keyBy(n.disabled_ids,_.identity);var o=_.get(n,"disable_all");return Promise.resolve().then(function(){var e=_.reject(r,TS.teams.getTeamById);var t="TS.ui.team_picker._getSearchPromise:unknown_team_ids";if(e.length)return TS.teams.ensureTeamsArePresent(e,t).catch(_.noop);return Promise.resolve()}).then(function(){return TS.teams.promiseToSearchTeams(t)}).tap(function(e){var t=[];if(""===e.query){var s=_.keyBy(n.omitted_ids,_.identity);t=_.filter(TS.teams.getAllEnterpriseTeams(),function(e){return!s[e.id]})}else t=e.items;if(n.sort_items_function){t=t.sort(n.sort_items_function);n.secondary_sort_items_function&&(t=t.sort(n.secondary_sort_items_function))}e.items=_.map(t,function(e){if(e.team&&"undefined"!==typeof e.preselected)return e;return{id:String(e.id),lfs_id:String(e.id),team:e,disabled:!!a[e.id]||o,preselected:!!r[e.id]||i}})})};var n=function e(t,n){return t.name&&t.name.match(n)}})()},11846:function(e,t,n){"use strict";var r=n(9935);n.d(t,"a",function(){return r["d"]})},13455:function(e,t,n){"use strict";t["a"]=i;t["b"]=a;t["d"]=o;t["c"]=s;function r(e){return"string"===typeof e||e instanceof String}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";if(0===Object.keys(e).length)return"";var n=Object.keys(e).map(function(n){if(t){var i=e[n];if(r(i)){var a=i.split("+");if(a.length>1){var o=a.map(function(e){return encodeURIComponent(e)});return encodeURIComponent(n)+"="+o.join("+")}}}return encodeURIComponent(n)+"="+encodeURIComponent(e[n])});return"?"+n.join("&")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";if("string"!==typeof e)return{};if("?"===e[0])return a(e.slice(1),t);var n={};var r=e.split(t);for(var i=0;i<r.length;i+=1){var o=r[i].indexOf("=");if(-1!==o){var s=r[i].substring(0,o);var l=r[i].substring(o+1);n[s]=unescape(l)}else r[i].length&&(n[r[i]]="")}return n}function o(e,t,n,r){var o=a(e);o[t]=n;return i(o,r)}function s(e,t){var n=a(e);if(!Object.prototype.hasOwnProperty.call(n,t))return e;delete n[t];return i(n)}},194:function(e,t,n){(function(t){e.exports=t["bowser"]=n(337)}).call(t,n(7))},337:function(e,t,n){var r,i;!function(a,o){if("undefined"!=typeof e&&e.exports)e.exports=o();else{true;!(r=o,i="function"===typeof r?r.call(t,n,t,e):r,void 0!==i&&(e.exports=i))}}("bowser",function(){var e=true;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=/like android/i.test(t),o=!a&&/android/i.test(t),s=/CrOS/.test(t),l=/silk/i.test(t),u=/sailfish/i.test(t),c=/tizen/i.test(t),f=/(web|hpw)os/i.test(t),d=/windows phone/i.test(t),_=!d&&/windows/i.test(t),m=!i&&!l&&/macintosh/i.test(t),v=!o&&!u&&!c&&!f&&/linux/i.test(t),g=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),p=n(/version\/(\d+(\.\d+)?)/i),h=/tablet/i.test(t)&&!/tablet pc/i.test(t),S=!h&&/[^-]mobi/i.test(t),T=/xbox/i.test(t),y;if(/opera|opr/i.test(t))y={name:"Opera",opera:e,version:p||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)};else if(/yabrowser/i.test(t))y={name:"Yandex Browser",yandexbrowser:e,version:p||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)};else if(/windows phone/i.test(t)){y={name:"Windows Phone",windowsphone:e};if(g){y.msedge=e;y.version=g}else{y.msie=e;y.version=n(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(t))y={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)};else if(s)y={name:"Chrome",chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(/chrome.+? edge/i.test(t))y={name:"Microsoft Edge",msedge:e,version:g};else if(/chrome|crios|crmo/i.test(t))y={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)};else if(i){y={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"};p&&(y.version=p)}else if(/sailfish/i.test(t))y={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)};else if(/seamonkey\//i.test(t))y={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)};else if(/waterfox\//i.test(t))y={name:"Waterfox",waterfox:e,version:n(/waterfox\/(\d+(\.\d+)?)/i)};else if(/firefox|iceweasel/i.test(t)){y={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(y.firefoxos=e)}else if(/silk/i.test(t))y={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)};else if(o)y={name:"Android",version:p};else if(/phantom/i.test(t))y={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)};else if(/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t))y={name:"BlackBerry",blackberry:e,version:p||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)};else if(/(web|hpw)os/i.test(t)){y={name:"WebOS",webos:e,version:p||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(t)&&(y.touchpad=e)}else y=/bada/i.test(t)?{name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||p}:/safari/i.test(t)?{name:"Safari",safari:e,version:p}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)};if(!y.msedge&&/(apple)?webkit/i.test(t)){y.name=y.name||"Webkit";y.webkit=e;!y.version&&p&&(y.version=p)}else if(!y.opera&&/gecko\//i.test(t)){y.name=y.name||"Gecko";y.gecko=e;y.version=y.version||n(/gecko\/(\d+(\.\d+)?)/i)}if(y.windowsphone||!o&&!y.silk){if(!y.windowsphone&&i){y[i]=e;y.ios=e;y.osname="iOS"}else if(m){y.mac=e;y.osname="macOS"}else if(T){y.xbox=e;y.osname="Xbox"}else if(_){y.windows=e;y.osname="Windows"}else if(v){y.linux=e;y.osname="Linux"}}else{y.android=e;y.osname="Android"}function b(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var w="";if(y.windows)w=b(n(/Windows ((NT|XP)( \d\d?.\d)?)/i));else if(y.windowsphone)w=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);else if(y.mac){w=n(/Mac OS X (\d+([_\.\s]\d+)*)/i);w=w.replace(/[_\s]/g,".")}else if(i){w=n(/os (\d+([_\s]\d+)*) like mac os x/i);w=w.replace(/[_\s]/g,".")}else o?w=n(/android[ \/-](\d+(\.\d+)*)/i):y.webos?w=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):y.blackberry?w=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):y.bada?w=n(/bada\/(\d+(\.\d+)*)/i):y.tizen&&(w=n(/tizen[\/\s](\d+(\.\d+)*)/i));w&&(y.osversion=w);var k=!y.windows&&w.split(".")[0];h||"ipad"==i||o&&(3==k||k>=4&&!S)||y.silk?y.tablet=e:(S||"iphone"==i||"ipod"==i||o||y.blackberry||y.webos||y.bada)&&(y.mobile=e);y.msedge||y.msie&&y.version>=10||y.yandexbrowser&&y.version>=15||y.chrome&&y.version>=20||y.firefox&&y.version>=20||y.safari&&y.version>=6||y.opera&&y.version>=10||y.ios&&y.osversion&&y.osversion.split(".")[0]>=6||y.blackberry&&y.version>=10.1?y.a=e:y.msie&&y.version<10||y.chrome&&y.version<20||y.firefox&&y.version<20||y.safari&&y.version<6||y.opera&&y.version<10||y.ios&&y.osversion&&y.osversion.split(".")[0]<6?y.c=e:y.x=e;return y}var n=t("undefined"!==typeof navigator?navigator.userAgent:"");n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"===typeof r&&r in n)return true}return false};n._detect=t;return n})},57:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children||(e.children=[]);Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});e.webpackPolyfill=1}return e}},7:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},7410:function(e,t){e.exports={paths:["TS.shared.legacyCalcUnreadCnts","TS.shared.legacyGetControllerForModelOb","TS.shared.getModelObBy"],prefixes:["TS.channels.getChannelBy","TS.groups.getGroupBy","TS.members.getMemberBy","TS.bots.getBotBy","TS.ims.getImBy","TS.mpims.getMpimBy"]}},87:function(e,t,n){(function(e,r){var i;(function(){var a;var o="4.17.4";var s=200;var l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function";var c="__lodash_hash_undefined__";var f=500;var d="__lodash_placeholder__";var _=1,m=2,v=4;var g=1,p=2;var h=1,S=2,T=4,y=8,b=16,w=32,k=64,x=128,E=256,C=512;var O=30,R="...";var A=800,I=16;var M=1,j=2,F=3;var L=1/0,P=9007199254740991,$=1.7976931348623157e308,D=NaN;var N=4294967295,B=N-1,U=N>>>1;var q=[["ary",x],["bind",h],["bindKey",S],["curry",y],["curryRight",b],["flip",C],["partial",w],["partialRight",k],["rearg",E]];var W="[object Arguments]",z="[object Array]",H="[object AsyncFunction]",G="[object Boolean]",K="[object Date]",V="[object DOMException]",Q="[object Error]",J="[object Function]",Y="[object GeneratorFunction]",X="[object Map]",Z="[object Number]",ee="[object Null]",te="[object Object]",ne="[object Promise]",re="[object Proxy]",ie="[object RegExp]",ae="[object Set]",oe="[object String]",se="[object Symbol]",le="[object Undefined]",ue="[object WeakMap]",ce="[object WeakSet]";var fe="[object ArrayBuffer]",de="[object DataView]",_e="[object Float32Array]",me="[object Float64Array]",ve="[object Int8Array]",ge="[object Int16Array]",pe="[object Int32Array]",he="[object Uint8Array]",Se="[object Uint8ClampedArray]",Te="[object Uint16Array]",ye="[object Uint32Array]";var be=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,ke=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var xe=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Ce=RegExp(xe.source),Oe=RegExp(Ee.source);var Re=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Ie=/<%=([\s\S]+?)%>/g;var Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,je=/^\w*$/,Fe=/^\./,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Pe=/[\\^$.*+?()[\]{}|]/g,$e=RegExp(Pe.source);var De=/^\s+|\s+$/g,Ne=/^\s+/,Be=/\s+$/;var Ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qe=/\{\n\/\* \[wrapped with (.+)\] \*/,We=/,? & /;var ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var He=/\\(\\)?/g;var Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var Ke=/\w*$/;var Ve=/^[-+]0x[0-9a-f]+$/i;var Qe=/^0b[01]+$/i;var Je=/^\[object .+?Constructor\]$/;var Ye=/^0o[0-7]+$/i;var Xe=/^(?:0|[1-9]\d*)$/;var Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var et=/($^)/;var tt=/['\n\r\u2028\u2029\\]/g;var nt="\\ud800-\\udfff",rt="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",at="\\u20d0-\\u20ff",ot=rt+it+at,st="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",ut="\\xac\\xb1\\xd7\\xf7",ct="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ft="\\u2000-\\u206f",dt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_t="A-Z\\xc0-\\xd6\\xd8-\\xde",mt="\\ufe0e\\ufe0f",vt=ut+ct+ft+dt;var gt="['\u2019]",pt="["+nt+"]",ht="["+vt+"]",St="["+ot+"]",Tt="\\d+",yt="["+st+"]",bt="["+lt+"]",wt="[^"+nt+vt+Tt+st+lt+_t+"]",kt="\\ud83c[\\udffb-\\udfff]",xt="(?:"+St+"|"+kt+")",Et="[^"+nt+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",Ot="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+_t+"]",At="\\u200d";var It="(?:"+bt+"|"+wt+")",Mt="(?:"+Rt+"|"+wt+")",jt="(?:"+gt+"(?:d|ll|m|re|s|t|ve))?",Ft="(?:"+gt+"(?:D|LL|M|RE|S|T|VE))?",Lt=xt+"?",Pt="["+mt+"]?",$t="(?:"+At+"(?:"+[Et,Ct,Ot].join("|")+")"+Pt+Lt+")*",Dt="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Nt="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Bt=Pt+Lt+$t,Ut="(?:"+[yt,Ct,Ot].join("|")+")"+Bt,qt="(?:"+[Et+St+"?",St,Ct,Ot,pt].join("|")+")";var Wt=RegExp(gt,"g");var zt=RegExp(St,"g");var Ht=RegExp(kt+"(?="+kt+")|"+qt+Bt,"g");var Gt=RegExp([Rt+"?"+bt+"+"+jt+"(?="+[ht,Rt,"$"].join("|")+")",Mt+"+"+Ft+"(?="+[ht,Rt+It,"$"].join("|")+")",Rt+"?"+It+"+"+jt,Rt+"+"+Ft,Nt,Dt,Tt,Ut].join("|"),"g");var Kt=RegExp("["+At+nt+ot+mt+"]");var Vt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Qt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var Jt=-1;var Yt={};Yt[_e]=Yt[me]=Yt[ve]=Yt[ge]=Yt[pe]=Yt[he]=Yt[Se]=Yt[Te]=Yt[ye]=true;Yt[W]=Yt[z]=Yt[fe]=Yt[G]=Yt[de]=Yt[K]=Yt[Q]=Yt[J]=Yt[X]=Yt[Z]=Yt[te]=Yt[ie]=Yt[ae]=Yt[oe]=Yt[ue]=false;var Xt={};Xt[W]=Xt[z]=Xt[fe]=Xt[de]=Xt[G]=Xt[K]=Xt[_e]=Xt[me]=Xt[ve]=Xt[ge]=Xt[pe]=Xt[X]=Xt[Z]=Xt[te]=Xt[ie]=Xt[ae]=Xt[oe]=Xt[se]=Xt[he]=Xt[Se]=Xt[Te]=Xt[ye]=true;Xt[Q]=Xt[J]=Xt[ue]=false;var Zt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"};var en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var rn=parseFloat,an=parseInt;var on="object"==typeof e&&e&&e.Object===Object&&e;var sn="object"==typeof self&&self&&self.Object===Object&&self;var ln=on||sn||Function("return this")();var un="object"==typeof t&&t&&!t.nodeType&&t;var cn=un&&"object"==typeof r&&r&&!r.nodeType&&r;var fn=cn&&cn.exports===un;var dn=fn&&on.process;var _n=function(){try{return dn&&dn.binding&&dn.binding("util")}catch(e){}}();var mn=_n&&_n.isArrayBuffer,vn=_n&&_n.isDate,gn=_n&&_n.isMap,pn=_n&&_n.isRegExp,hn=_n&&_n.isSet,Sn=_n&&_n.isTypedArray;function Tn(e,t){e.set(t[0],t[1]);return e}function yn(e,t){e.add(t);return e}function bn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wn(e,t,n,r){var i=-1,a=null==e?0:e.length;while(++i<a){var o=e[i];t(r,o,n(o),e)}return r}function kn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(false===t(e[n],n,e))break;return e}function xn(e,t){var n=null==e?0:e.length;while(n--)if(false===t(e[n],n,e))break;return e}function En(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!t(e[n],n,e))return false;return true}function Cn(e,t){var n=-1,r=null==e?0:e.length,i=0,a=[];while(++n<r){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function On(e,t){var n=null==e?0:e.length;return!!n&&Bn(e,t,0)>-1}function Rn(e,t,n){var r=-1,i=null==e?0:e.length;while(++r<i)if(n(t,e[r]))return true;return false}function An(e,t){var n=-1,r=null==e?0:e.length,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function In(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function Mn(e,t,n,r){var i=-1,a=null==e?0:e.length;r&&a&&(n=e[++i]);while(++i<a)n=t(n,e[i],i,e);return n}function jn(e,t,n,r){var i=null==e?0:e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function Fn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return true;return false}var Ln=zn("length");function Pn(e){return e.split("")}function $n(e){return e.match(ze)||[]}function Dn(e,t,n){var r;n(e,function(e,n,i){if(t(e,n,i)){r=n;return false}});return r}function Nn(e,t,n,r){var i=e.length,a=n+(r?1:-1);while(r?a--:++a<i)if(t(e[a],a,e))return a;return-1}function Bn(e,t,n){return t===t?vr(e,t,n):Nn(e,qn,n)}function Un(e,t,n,r){var i=n-1,a=e.length;while(++i<a)if(r(e[i],t))return i;return-1}function qn(e){return e!==e}function Wn(e,t){var n=null==e?0:e.length;return n?Vn(e,t)/n:D}function zn(e){return function(t){return null==t?a:t[e]}}function Hn(e){return function(t){return null==e?a:e[t]}}function Gn(e,t,n,r,i){i(e,function(e,i,a){n=r?(r=false,e):t(n,e,i,a)});return n}function Kn(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function Vn(e,t){var n,r=-1,i=e.length;while(++r<i){var o=t(e[r]);o!==a&&(n=n===a?o:n+o)}return n}function Qn(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function Jn(e,t){return An(t,function(t){return[t,e[t]]})}function Yn(e){return function(t){return e(t)}}function Xn(e,t){return An(t,function(t){return e[t]})}function Zn(e,t){return e.has(t)}function er(e,t){var n=-1,r=e.length;while(++n<r&&Bn(t,e[n],0)>-1);return n}function tr(e,t){var n=e.length;while(n--&&Bn(t,e[n],0)>-1);return n}function nr(e,t){var n=e.length,r=0;while(n--)e[n]===t&&++r;return r}var rr=Hn(Zt);var ir=Hn(en);function ar(e){return"\\"+nn[e]}function or(e,t){return null==e?a:e[t]}function sr(e){return Kt.test(e)}function lr(e){return Vt.test(e)}function ur(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function cr(e){var t=-1,n=Array(e.size);e.forEach(function(e,r){n[++t]=[r,e]});return n}function fr(e,t){return function(n){return e(t(n))}}function dr(e,t){var n=-1,r=e.length,i=0,a=[];while(++n<r){var o=e[n];if(o===t||o===d){e[n]=d;a[i++]=n}}return a}function _r(e){var t=-1,n=Array(e.size);e.forEach(function(e){n[++t]=e});return n}function mr(e){var t=-1,n=Array(e.size);e.forEach(function(e){n[++t]=[e,e]});return n}function vr(e,t,n){var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function gr(e,t,n){var r=n+1;while(r--)if(e[r]===t)return r;return r}function pr(e){return sr(e)?Tr(e):Ln(e)}function hr(e){return sr(e)?yr(e):Pn(e)}var Sr=Hn(tn);function Tr(e){var t=Ht.lastIndex=0;while(Ht.test(e))++t;return t}function yr(e){return e.match(Ht)||[]}function br(e){return e.match(Gt)||[]}var wr=function e(t){t=null==t?ln:kr.defaults(ln.Object(),t,kr.pick(ln,Qt));var n=t.Array,r=t.Date,i=t.Error,ze=t.Function,nt=t.Math,rt=t.Object,it=t.RegExp,at=t.String,ot=t.TypeError;var st=n.prototype,lt=ze.prototype,ut=rt.prototype;var ct=t["__core-js_shared__"];var ft=lt.toString;var dt=ut.hasOwnProperty;var _t=0;var mt=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var vt=ut.toString;var gt=ft.call(rt);var pt=ln._;var ht=it("^"+ft.call(dt).replace(Pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var St=fn?t.Buffer:a,Tt=t.Symbol,yt=t.Uint8Array,bt=St?St.allocUnsafe:a,wt=fr(rt.getPrototypeOf,rt),kt=rt.create,xt=ut.propertyIsEnumerable,Et=st.splice,Ct=Tt?Tt.isConcatSpreadable:a,Ot=Tt?Tt.iterator:a,Rt=Tt?Tt.toStringTag:a;var At=function(){try{var e=Jo(rt,"defineProperty");e({},"",{});return e}catch(e){}}();var It=t.clearTimeout!==ln.clearTimeout&&t.clearTimeout,Mt=r&&r.now!==ln.Date.now&&r.now,jt=t.setTimeout!==ln.setTimeout&&t.setTimeout;var Ft=nt.ceil,Lt=nt.floor,Pt=rt.getOwnPropertySymbols,$t=St?St.isBuffer:a,Dt=t.isFinite,Nt=st.join,Bt=fr(rt.keys,rt),Ut=nt.max,qt=nt.min,Ht=r.now,Gt=t.parseInt,Kt=nt.random,Vt=st.reverse;var Zt=Jo(t,"DataView"),en=Jo(t,"Map"),tn=Jo(t,"Promise"),nn=Jo(t,"Set"),on=Jo(t,"WeakMap"),sn=Jo(rt,"create");var un=on&&new on;var cn={};var dn=Fs(Zt),_n=Fs(en),Ln=Fs(tn),Pn=Fs(nn),Hn=Fs(on);var vr=Tt?Tt.prototype:a,Tr=vr?vr.valueOf:a,yr=vr?vr.toString:a;function wr(e){if(Cc(e)&&!cc(e)&&!(e instanceof Or)){if(e instanceof Cr)return e;if(dt.call(e,"__wrapped__"))return Ps(e)}return new Cr(e)}var xr=function(){function e(){}return function(t){if(!Ec(t))return{};if(kt)return kt(t);e.prototype=t;var n=new e;e.prototype=a;return n}}();function Er(){}function Cr(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=a}wr.templateSettings={escape:Re,evaluate:Ae,interpolate:Ie,variable:"",imports:{_:wr}};wr.prototype=Er.prototype;wr.prototype.constructor=wr;Cr.prototype=xr(Er.prototype);Cr.prototype.constructor=Cr;function Or(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=N;this.__views__=[]}function Rr(){var e=new Or(this.__wrapped__);e.__actions__=oo(this.__actions__);e.__dir__=this.__dir__;e.__filtered__=this.__filtered__;e.__iteratees__=oo(this.__iteratees__);e.__takeCount__=this.__takeCount__;e.__views__=oo(this.__views__);return e}function Ar(){if(this.__filtered__){var e=new Or(this);e.__dir__=-1;e.__filtered__=true}else{e=this.clone();e.__dir__*=-1}return e}function Ir(){var e=this.__wrapped__.value(),t=this.__dir__,n=cc(e),r=t<0,i=n?e.length:0,a=ts(0,i,this.__views__),o=a.start,s=a.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,_=qt(l,this.__takeCount__);if(!n||!r&&i==l&&_==l)return Na(e,this.__actions__);var m=[];e:while(l--&&d<_){u+=t;var v=-1,g=e[u];while(++v<f){var p=c[v],h=p.iteratee,S=p.type,T=h(g);if(S==j)g=T;else if(!T){if(S==M)continue e;break e}}m[d++]=g}return m}Or.prototype=xr(Er.prototype);Or.prototype.constructor=Or;function Mr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function jr(){this.__data__=sn?sn(null):{};this.size=0}function Fr(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}function Lr(e){var t=this.__data__;if(sn){var n=t[e];return n===c?a:n}return dt.call(t,e)?t[e]:a}function Pr(e){var t=this.__data__;return sn?t[e]!==a:dt.call(t,e)}function $r(e,t){var n=this.__data__;this.size+=this.has(e)?0:1;n[e]=sn&&t===a?c:t;return this}Mr.prototype.clear=jr;Mr.prototype["delete"]=Fr;Mr.prototype.get=Lr;Mr.prototype.has=Pr;Mr.prototype.set=$r;function Dr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Nr(){this.__data__=[];this.size=0}function Br(e){var t=this.__data__,n=fi(t,e);if(n<0)return false;var r=t.length-1;n==r?t.pop():Et.call(t,n,1);--this.size;return true}function Ur(e){var t=this.__data__,n=fi(t,e);return n<0?a:t[n][1]}function qr(e){return fi(this.__data__,e)>-1}function Wr(e,t){var n=this.__data__,r=fi(n,e);if(r<0){++this.size;n.push([e,t])}else n[r][1]=t;return this}Dr.prototype.clear=Nr;Dr.prototype["delete"]=Br;Dr.prototype.get=Ur;Dr.prototype.has=qr;Dr.prototype.set=Wr;function zr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Hr(){this.size=0;this.__data__={hash:new Mr,map:new(en||Dr),string:new Mr}}function Gr(e){var t=Vo(this,e)["delete"](e);this.size-=t?1:0;return t}function Kr(e){return Vo(this,e).get(e)}function Vr(e){return Vo(this,e).has(e)}function Qr(e,t){var n=Vo(this,e),r=n.size;n.set(e,t);this.size+=n.size==r?0:1;return this}zr.prototype.clear=Hr;zr.prototype["delete"]=Gr;zr.prototype.get=Kr;zr.prototype.has=Vr;zr.prototype.set=Qr;function Jr(e){var t=-1,n=null==e?0:e.length;this.__data__=new zr;while(++t<n)this.add(e[t])}function Yr(e){this.__data__.set(e,c);return this}function Xr(e){return this.__data__.has(e)}Jr.prototype.add=Jr.prototype.push=Yr;Jr.prototype.has=Xr;function Zr(e){var t=this.__data__=new Dr(e);this.size=t.size}function ei(){this.__data__=new Dr;this.size=0}function ti(e){var t=this.__data__,n=t["delete"](e);this.size=t.size;return n}function ni(e){return this.__data__.get(e)}function ri(e){return this.__data__.has(e)}function ii(e,t){var n=this.__data__;if(n instanceof Dr){var r=n.__data__;if(!en||r.length<s-1){r.push([e,t]);this.size=++n.size;return this}n=this.__data__=new zr(r)}n.set(e,t);this.size=n.size;return this}Zr.prototype.clear=ei;Zr.prototype["delete"]=ti;Zr.prototype.get=ni;Zr.prototype.has=ri;Zr.prototype.set=ii;function ai(e,t){var n=cc(e),r=!n&&uc(e),i=!n&&!r&&vc(e),a=!n&&!r&&!i&&qc(e),o=n||r||i||a,s=o?Qn(e.length,at):[],l=s.length;for(var u in e)!t&&!dt.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||us(u,l))||s.push(u);return s}function oi(e){var t=e.length;return t?e[ha(0,t-1)]:a}function si(e,t){return Is(oo(e),pi(t,0,e.length))}function li(e){return Is(oo(e))}function ui(e,t,n){(n===a||oc(e[t],n))&&(n!==a||t in e)||vi(e,t,n)}function ci(e,t,n){var r=e[t];dt.call(e,t)&&oc(r,n)&&(n!==a||t in e)||vi(e,t,n)}function fi(e,t){var n=e.length;while(n--)if(oc(e[n][0],t))return n;return-1}function di(e,t,n,r){wi(e,function(e,i,a){t(r,e,n(e),a)});return r}function _i(e,t){return e&&so(t,xf(t),e)}function mi(e,t){return e&&so(t,Ef(t),e)}function vi(e,t,n){"__proto__"==t&&At?At(e,t,{configurable:true,enumerable:true,value:n,writable:true}):e[t]=n}function gi(e,t){var r=-1,i=t.length,o=n(i),s=null==e;while(++r<i)o[r]=s?a:Sf(e,t[r]);return o}function pi(e,t,n){if(e===e){n!==a&&(e=e<=n?e:n);t!==a&&(e=e>=t?e:t)}return e}function hi(e,t,n,r,i,o){var s,l=t&_,u=t&m,c=t&v;n&&(s=i?n(e,r,i,o):n(e));if(s!==a)return s;if(!Ec(e))return e;var f=cc(e);if(f){s=is(e);if(!l)return oo(e,s)}else{var d=es(e),g=d==J||d==Y;if(vc(e))return Va(e,l);if(d==te||d==W||g&&!i){s=u||g?{}:as(e);if(!l)return u?uo(e,mi(s,e)):lo(e,_i(s,e))}else{if(!Xt[d])return i?e:{};s=os(e,d,hi,l)}}o||(o=new Zr);var p=o.get(e);if(p)return p;o.set(e,s);var h=c?u?Wo:qo:u?Ef:xf;var S=f?a:h(e);kn(S||e,function(r,i){if(S){i=r;r=e[i]}ci(s,i,hi(r,t,n,i,e,o))});return s}function Si(e){var t=xf(e);return function(n){return Ti(n,e,t)}}function Ti(e,t,n){var r=n.length;if(null==e)return!r;e=rt(e);while(r--){var i=n[r],o=t[i],s=e[i];if(s===a&&!(i in e)||!o(s))return false}return true}function yi(e,t,n){if("function"!=typeof e)throw new ot(u);return Cs(function(){e.apply(a,n)},t)}function bi(e,t,n,r){var i=-1,a=On,o=true,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=An(t,Yn(n)));if(r){a=Rn;o=false}else if(t.length>=s){a=Zn;o=false;t=new Jr(t)}e:while(++i<l){var f=e[i],d=null==n?f:n(f);f=r||0!==f?f:0;if(o&&d===d){var _=c;while(_--)if(t[_]===d)continue e;u.push(f)}else a(t,d,r)||u.push(f)}return u}var wi=_o(Mi);var ki=_o(ji,true);function xi(e,t){var n=true;wi(e,function(e,r,i){n=!!t(e,r,i);return n});return n}function Ei(e,t,n){var r=-1,i=e.length;while(++r<i){var o=e[r],s=t(o);if(null!=s&&(l===a?s===s&&!Uc(s):n(s,l)))var l=s,u=o}return u}function Ci(e,t,n,r){var i=e.length;n=Jc(n);n<0&&(n=-n>i?0:i+n);r=r===a||r>i?i:Jc(r);r<0&&(r+=i);r=n>r?0:Yc(r);while(n<r)e[n++]=t;return e}function Oi(e,t){var n=[];wi(e,function(e,r,i){t(e,r,i)&&n.push(e)});return n}function Ri(e,t,n,r,i){var a=-1,o=e.length;n||(n=ls);i||(i=[]);while(++a<o){var s=e[a];t>0&&n(s)?t>1?Ri(s,t-1,n,r,i):In(i,s):r||(i[i.length]=s)}return i}var Ai=mo();var Ii=mo(true);function Mi(e,t){return e&&Ai(e,t,xf)}function ji(e,t){return e&&Ii(e,t,xf)}function Fi(e,t){return Cn(t,function(t){return wc(e[t])})}function Li(e,t){t=za(t,e);var n=0,r=t.length;while(null!=e&&n<r)e=e[js(t[n++])];return n&&n==r?e:a}function Pi(e,t,n){var r=t(e);return cc(e)?r:In(r,n(e))}function $i(e){if(null==e)return e===a?le:ee;return Rt&&Rt in rt(e)?Yo(e):bs(e)}function Di(e,t){return e>t}function Ni(e,t){return null!=e&&dt.call(e,t)}function Bi(e,t){return null!=e&&t in rt(e)}function Ui(e,t,n){return e>=qt(t,n)&&e<Ut(t,n)}function qi(e,t,r){var i=r?Rn:On,o=e[0].length,s=e.length,l=s,u=n(s),c=Infinity,f=[];while(l--){var d=e[l];l&&t&&(d=An(d,Yn(t)));c=qt(d.length,c);u[l]=!r&&(t||o>=120&&d.length>=120)?new Jr(l&&d):a}d=e[0];var _=-1,m=u[0];e:while(++_<o&&f.length<c){var v=d[_],g=t?t(v):v;v=r||0!==v?v:0;if(!(m?Zn(m,g):i(f,g,r))){l=s;while(--l){var p=u[l];if(!(p?Zn(p,g):i(e[l],g,r)))continue e}m&&m.push(g);f.push(v)}}return f}function Wi(e,t,n,r){Mi(e,function(e,i,a){t(r,n(e),i,a)});return r}function zi(e,t,n){t=za(t,e);e=ks(e,t);var r=null==e?e:e[js(sl(t))];return null==r?a:bn(r,e,n)}function Hi(e){return Cc(e)&&$i(e)==W}function Gi(e){return Cc(e)&&$i(e)==fe}function Ki(e){return Cc(e)&&$i(e)==K}function Vi(e,t,n,r,i){if(e===t)return true;if(null==e||null==t||!Cc(e)&&!Cc(t))return e!==e&&t!==t;return Qi(e,t,n,r,Vi,i)}function Qi(e,t,n,r,i,a){var o=cc(e),s=cc(t),l=o?z:es(e),u=s?z:es(t);l=l==W?te:l;u=u==W?te:u;var c=l==te,f=u==te,d=l==u;if(d&&vc(e)){if(!vc(t))return false;o=true;c=false}if(d&&!c){a||(a=new Zr);return o||qc(e)?Do(e,t,n,r,i,a):No(e,t,l,n,r,i,a)}if(!(n&g)){var _=c&&dt.call(e,"__wrapped__"),m=f&&dt.call(t,"__wrapped__");if(_||m){var v=_?e.value():e,p=m?t.value():t;a||(a=new Zr);return i(v,p,n,r,a)}}if(!d)return false;a||(a=new Zr);return Bo(e,t,n,r,i,a)}function Ji(e){return Cc(e)&&es(e)==X}function Yi(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;e=rt(e);while(i--){var l=n[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return false}while(++i<o){l=n[i];var u=l[0],c=e[u],f=l[1];if(s&&l[2]){if(c===a&&!(u in e))return false}else{var d=new Zr;if(r)var _=r(c,f,u,e,t,d);if(!(_===a?Vi(f,c,g|p,r,d):_))return false}}return true}function Xi(e){if(!Ec(e)||ms(e))return false;var t=wc(e)?ht:Je;return t.test(Fs(e))}function Zi(e){return Cc(e)&&$i(e)==ie}function ea(e){return Cc(e)&&es(e)==ae}function ta(e){return Cc(e)&&xc(e.length)&&!!Yt[$i(e)]}function na(e){if("function"==typeof e)return e;if(null==e)return jd;if("object"==typeof e)return cc(e)?la(e[0],e[1]):sa(e);return Gd(e)}function ra(e){if(!gs(e))return Bt(e);var t=[];for(var n in rt(e))dt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ia(e){if(!Ec(e))return ys(e);var t=gs(e),n=[];for(var r in e)"constructor"==r&&(t||!dt.call(e,r))||n.push(r);return n}function aa(e,t){return e<t}function oa(e,t){var r=-1,i=dc(e)?n(e.length):[];wi(e,function(e,n,a){i[++r]=t(e,n,a)});return i}function sa(e){var t=Qo(e);if(1==t.length&&t[0][2])return hs(t[0][0],t[0][1]);return function(n){return n===e||Yi(n,e,t)}}function la(e,t){if(fs(e)&&ps(t))return hs(js(e),t);return function(n){var r=Sf(n,e);return r===a&&r===t?yf(n,e):Vi(t,r,g|p)}}function ua(e,t,n,r,i){if(e===t)return;Ai(t,function(o,s){if(Ec(o)){i||(i=new Zr);ca(e,t,s,n,ua,r,i)}else{var l=r?r(e[s],o,s+"",e,t,i):a;l===a&&(l=o);ui(e,s,l)}},Ef)}function ca(e,t,n,r,i,o,s){var l=e[n],u=t[n],c=s.get(u);if(c){ui(e,n,c);return}var f=o?o(l,u,n+"",e,t,s):a;var d=f===a;if(d){var _=cc(u),m=!_&&vc(u),v=!_&&!m&&qc(u);f=u;if(_||m||v)if(cc(l))f=l;else if(_c(l))f=oo(l);else if(m){d=false;f=Va(u,true)}else if(v){d=false;f=to(u,true)}else f=[];else if(Pc(u)||uc(u)){f=l;uc(l)?f=Zc(l):(!Ec(l)||r&&wc(l))&&(f=as(u))}else d=false}if(d){s.set(u,f);i(f,u,r,o,s);s["delete"](u)}ui(e,n,f)}function fa(e,t){var n=e.length;if(!n)return;t+=t<0?n:0;return us(t,n)?e[t]:a}function da(e,t,n){var r=-1;t=An(t.length?t:[jd],Yn(Ko()));var i=oa(e,function(e,n,i){var a=An(t,function(t){return t(e)});return{criteria:a,index:++r,value:e}});return Kn(i,function(e,t){return ro(e,t,n)})}function _a(e,t){return ma(e,t,function(t,n){return yf(e,n)})}function ma(e,t,n){var r=-1,i=t.length,a={};while(++r<i){var o=t[r],s=Li(e,o);n(s,o)&&ka(a,za(o,e),s)}return a}function va(e){return function(t){return Li(t,e)}}function ga(e,t,n,r){var i=r?Un:Bn,a=-1,o=t.length,s=e;e===t&&(t=oo(t));n&&(s=An(e,Yn(n)));while(++a<o){var l=0,u=t[a],c=n?n(u):u;while((l=i(s,c,l,r))>-1){s!==e&&Et.call(s,l,1);Et.call(e,l,1)}}return e}function pa(e,t){var n=e?t.length:0,r=n-1;while(n--){var i=t[n];if(n==r||i!==a){var a=i;us(i)?Et.call(e,i,1):Pa(e,i)}}return e}function ha(e,t){return e+Lt(Kt()*(t-e+1))}function Sa(e,t,r,i){var a=-1,o=Ut(Ft((t-e)/(r||1)),0),s=n(o);while(o--){s[i?o:++a]=e;e+=r}return s}function Ta(e,t){var n="";if(!e||t<1||t>P)return n;do{t%2&&(n+=e);t=Lt(t/2);t&&(e+=e)}while(t);return n}function ya(e,t){return Os(ws(e,t,jd),e+"")}function ba(e){return oi(zf(e))}function wa(e,t){var n=zf(e);return Is(n,pi(t,0,n.length))}function ka(e,t,n,r){if(!Ec(e))return e;t=za(t,e);var i=-1,o=t.length,s=o-1,l=e;while(null!=l&&++i<o){var u=js(t[i]),c=n;if(i!=s){var f=l[u];c=r?r(f,u,l):a;c===a&&(c=Ec(f)?f:us(t[i+1])?[]:{})}ci(l,u,c);l=l[u]}return e}var xa=un?function(e,t){un.set(e,t);return e}:jd;var Ea=At?function(e,t){return At(e,"toString",{configurable:true,enumerable:false,value:Rd(t),writable:true})}:jd;function Ca(e){return Is(zf(e))}function Oa(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t);r=r>a?a:r;r<0&&(r+=a);a=t>r?0:r-t>>>0;t>>>=0;var o=n(a);while(++i<a)o[i]=e[i+t];return o}function Ra(e,t){var n;wi(e,function(e,r,i){n=t(e,r,i);return!n});return!!n}function Aa(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=U){while(r<i){var a=r+i>>>1,o=e[a];null!==o&&!Uc(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return Ia(e,t,jd,n)}function Ia(e,t,n,r){t=n(t);var i=0,o=null==e?0:e.length,s=t!==t,l=null===t,u=Uc(t),c=t===a;while(i<o){var f=Lt((i+o)/2),d=n(e[f]),_=d!==a,m=null===d,v=d===d,g=Uc(d);if(s)var p=r||v;else p=c?v&&(r||_):l?v&&_&&(r||!m):u?v&&_&&!m&&(r||!g):!m&&!g&&(r?d<=t:d<t);p?i=f+1:o=f}return qt(o,B)}function Ma(e,t){var n=-1,r=e.length,i=0,a=[];while(++n<r){var o=e[n],s=t?t(o):o;if(!n||!oc(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ja(e){if("number"==typeof e)return e;if(Uc(e))return D;return+e}function Fa(e){if("string"==typeof e)return e;if(cc(e))return An(e,Fa)+"";if(Uc(e))return yr?yr.call(e):"";var t=e+"";return"0"==t&&1/e==-L?"-0":t}function La(e,t,n){var r=-1,i=On,a=e.length,o=true,l=[],u=l;if(n){o=false;i=Rn}else if(a>=s){var c=t?null:Mo(e);if(c)return _r(c);o=false;i=Zn;u=new Jr}else u=t?[]:l;e:while(++r<a){var f=e[r],d=t?t(f):f;f=n||0!==f?f:0;if(o&&d===d){var _=u.length;while(_--)if(u[_]===d)continue e;t&&u.push(d);l.push(f)}else if(!i(u,d,n)){u!==l&&u.push(d);l.push(f)}}return l}function Pa(e,t){t=za(t,e);e=ks(e,t);return null==e||delete e[js(sl(t))]}function $a(e,t,n,r){return ka(e,t,n(Li(e,t)),r)}function Da(e,t,n,r){var i=e.length,a=r?i:-1;while((r?a--:++a<i)&&t(e[a],a,e));return n?Oa(e,r?0:a,r?a+1:i):Oa(e,r?a+1:0,r?i:a)}function Na(e,t){var n=e;n instanceof Or&&(n=n.value());return Mn(t,function(e,t){return t.func.apply(t.thisArg,In([e],t.args))},n)}function Ba(e,t,r){var i=e.length;if(i<2)return i?La(e[0]):[];var a=-1,o=n(i);while(++a<i){var s=e[a],l=-1;while(++l<i)l!=a&&(o[a]=bi(o[a]||s,e[l],t,r))}return La(Ri(o,1),t,r)}function Ua(e,t,n){var r=-1,i=e.length,o=t.length,s={};while(++r<i){var l=r<o?t[r]:a;n(s,e[r],l)}return s}function qa(e){return _c(e)?e:[]}function Wa(e){return"function"==typeof e?e:jd}function za(e,t){if(cc(e))return e;return fs(e,t)?[e]:Ms(tf(e))}var Ha=ya;function Ga(e,t,n){var r=e.length;n=n===a?r:n;return!t&&n>=r?e:Oa(e,t,n)}var Ka=It||function(e){return ln.clearTimeout(e)};function Va(e,t){if(t)return e.slice();var n=e.length,r=bt?bt(n):new e.constructor(n);e.copy(r);return r}function Qa(e){var t=new e.constructor(e.byteLength);new yt(t).set(new yt(e));return t}function Ja(e,t){var n=t?Qa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ya(e,t,n){var r=t?n(cr(e),_):cr(e);return Mn(r,Tn,new e.constructor)}function Xa(e){var t=new e.constructor(e.source,Ke.exec(e));t.lastIndex=e.lastIndex;return t}function Za(e,t,n){var r=t?n(_r(e),_):_r(e);return Mn(r,yn,new e.constructor)}function eo(e){return Tr?rt(Tr.call(e)):{}}function to(e,t){var n=t?Qa(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function no(e,t){if(e!==t){var n=e!==a,r=null===e,i=e===e,o=Uc(e);var s=t!==a,l=null===t,u=t===t,c=Uc(t);if(!l&&!c&&!o&&e>t||o&&s&&u&&!l&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||l&&n&&i||!s&&i||!u)return-1}return 0}function ro(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;while(++r<o){var l=no(i[r],a[r]);if(l){if(r>=s)return l;var u=n[r];return l*("desc"==u?-1:1)}}return e.index-t.index}function io(e,t,r,i){var a=-1,o=e.length,s=r.length,l=-1,u=t.length,c=Ut(o-s,0),f=n(u+c),d=!i;while(++l<u)f[l]=t[l];while(++a<s)(d||a<o)&&(f[r[a]]=e[a]);while(c--)f[l++]=e[a++];return f}function ao(e,t,r,i){var a=-1,o=e.length,s=-1,l=r.length,u=-1,c=t.length,f=Ut(o-l,0),d=n(f+c),_=!i;while(++a<f)d[a]=e[a];var m=a;while(++u<c)d[m+u]=t[u];while(++s<l)(_||a<o)&&(d[m+r[s]]=e[a++]);return d}function oo(e,t){var r=-1,i=e.length;t||(t=n(i));while(++r<i)t[r]=e[r];return t}function so(e,t,n,r){var i=!n;n||(n={});var o=-1,s=t.length;while(++o<s){var l=t[o];var u=r?r(n[l],e[l],l,n,e):a;u===a&&(u=e[l]);i?vi(n,l,u):ci(n,l,u)}return n}function lo(e,t){return so(e,Xo(e),t)}function uo(e,t){return so(e,Zo(e),t)}function co(e,t){return function(n,r){var i=cc(n)?wn:di,a=t?t():{};return i(n,e,Ko(r,2),a)}}function fo(e){return ya(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:a,s=i>2?n[2]:a;o=e.length>3&&"function"==typeof o?(i--,o):a;if(s&&cs(n[0],n[1],s)){o=i<3?a:o;i=1}t=rt(t);while(++r<i){var l=n[r];l&&e(t,l,r,o)}return t})}function _o(e,t){return function(n,r){if(null==n)return n;if(!dc(n))return e(n,r);var i=n.length,a=t?i:-1,o=rt(n);while(t?a--:++a<i)if(false===r(o[a],a,o))break;return n}}function mo(e){return function(t,n,r){var i=-1,a=rt(t),o=r(t),s=o.length;while(s--){var l=o[e?s:++i];if(false===n(a[l],l,a))break}return t}}function vo(e,t,n){var r=t&h,i=ho(e);function a(){var t=this&&this!==ln&&this instanceof a?i:e;return t.apply(r?n:this,arguments)}return a}function go(e){return function(t){t=tf(t);var n=sr(t)?hr(t):a;var r=n?n[0]:t.charAt(0);var i=n?Ga(n,1).join(""):t.slice(1);return r[e]()+i}}function po(e){return function(t){return Mn(kd(Yf(t).replace(Wt,"")),e,"")}}function ho(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=xr(e.prototype),r=e.apply(n,t);return Ec(r)?r:n}}function So(e,t,r){var i=ho(e);function o(){var s=arguments.length,l=n(s),u=s,c=Go(o);while(u--)l[u]=arguments[u];var f=s<3&&l[0]!==c&&l[s-1]!==c?[]:dr(l,c);s-=f.length;if(s<r)return Ao(e,t,bo,o.placeholder,a,l,f,a,a,r-s);var d=this&&this!==ln&&this instanceof o?i:e;return bn(d,this,l)}return o}function To(e){return function(t,n,r){var i=rt(t);if(!dc(t)){var o=Ko(n,3);t=xf(t);n=function(e){return o(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[o?t[s]:s]:a}}function yo(e){return Uo(function(t){var n=t.length,r=n,i=Cr.prototype.thru;e&&t.reverse();while(r--){var o=t[r];if("function"!=typeof o)throw new ot(u);if(i&&!s&&"wrapper"==Ho(o))var s=new Cr([],true)}r=s?r:n;while(++r<n){o=t[r];var l=Ho(o),c="wrapper"==l?zo(o):a;s=c&&_s(c[0])&&c[1]==(x|y|w|E)&&!c[4].length&&1==c[9]?s[Ho(c[0])].apply(s,c[3]):1==o.length&&_s(o)?s[l]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&cc(r))return s.plant(r).value();var i=0,a=n?t[i].apply(this,e):r;while(++i<n)a=t[i].call(this,a);return a}})}function bo(e,t,r,i,o,s,l,u,c,f){var d=t&x,_=t&h,m=t&S,v=t&(y|b),g=t&C,p=m?a:ho(e);function T(){var a=arguments.length,h=n(a),S=a;while(S--)h[S]=arguments[S];if(v)var y=Go(T),b=nr(h,y);i&&(h=io(h,i,o,v));s&&(h=ao(h,s,l,v));a-=b;if(v&&a<f){var w=dr(h,y);return Ao(e,t,bo,T.placeholder,r,h,w,u,c,f-a)}var k=_?r:this,x=m?k[e]:e;a=h.length;u?h=xs(h,u):g&&a>1&&h.reverse();d&&c<a&&(h.length=c);this&&this!==ln&&this instanceof T&&(x=p||ho(x));return x.apply(k,h)}return T}function wo(e,t){return function(n,r){return Wi(n,e,t(r),{})}}function ko(e,t){return function(n,r){var i;if(n===a&&r===a)return t;n!==a&&(i=n);if(r!==a){if(i===a)return r;if("string"==typeof n||"string"==typeof r){n=Fa(n);r=Fa(r)}else{n=ja(n);r=ja(r)}i=e(n,r)}return i}}function xo(e){return Uo(function(t){t=An(t,Yn(Ko()));return ya(function(n){var r=this;return e(t,function(e){return bn(e,r,n)})})})}function Eo(e,t){t=t===a?" ":Fa(t);var n=t.length;if(n<2)return n?Ta(t,e):t;var r=Ta(t,Ft(e/pr(t)));return sr(t)?Ga(hr(r),0,e).join(""):r.slice(0,e)}function Co(e,t,r,i){var a=t&h,o=ho(e);function s(){var t=-1,l=arguments.length,u=-1,c=i.length,f=n(c+l),d=this&&this!==ln&&this instanceof s?o:e;while(++u<c)f[u]=i[u];while(l--)f[u++]=arguments[++t];return bn(d,a?r:this,f)}return s}function Oo(e){return function(t,n,r){r&&"number"!=typeof r&&cs(t,n,r)&&(n=r=a);t=Qc(t);if(n===a){n=t;t=0}else n=Qc(n);r=r===a?t<n?1:-1:Qc(r);return Sa(t,n,r,e)}}function Ro(e){return function(t,n){if(!("string"==typeof t&&"string"==typeof n)){t=Xc(t);n=Xc(n)}return e(t,n)}}function Ao(e,t,n,r,i,o,s,l,u,c){var f=t&y,d=f?s:a,_=f?a:s,m=f?o:a,v=f?a:o;t|=f?w:k;t&=~(f?k:w);t&T||(t&=~(h|S));var g=[e,t,i,m,d,v,_,l,u,c];var p=n.apply(a,g);_s(e)&&Es(p,g);p.placeholder=r;return Rs(p,e,t)}function Io(e){var t=nt[e];return function(e,n){e=Xc(e);n=null==n?0:qt(Jc(n),292);if(n){var r=(tf(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));r=(tf(i)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return t(e)}}var Mo=nn&&1/_r(new nn([,-0]))[1]==L?function(e){return new nn(e)}:Ud;function jo(e){return function(t){var n=es(t);if(n==X)return cr(t);if(n==ae)return mr(t);return Jn(t,e(t))}}function Fo(e,t,n,r,i,o,s,l){var c=t&S;if(!c&&"function"!=typeof e)throw new ot(u);var f=r?r.length:0;if(!f){t&=~(w|k);r=i=a}s=s===a?s:Ut(Jc(s),0);l=l===a?l:Jc(l);f-=i?i.length:0;if(t&k){var d=r,_=i;r=i=a}var m=c?a:zo(e);var v=[e,t,n,r,i,d,_,o,s,l];m&&Ts(v,m);e=v[0];t=v[1];n=v[2];r=v[3];i=v[4];l=v[9]=v[9]===a?c?0:e.length:Ut(v[9]-f,0);!l&&t&(y|b)&&(t&=~(y|b));if(t&&t!=h)g=t==y||t==b?So(e,t,l):t!=w&&t!=(h|w)||i.length?bo.apply(a,v):Co(e,t,n,r);else var g=vo(e,t,n);var p=m?xa:Es;return Rs(p(g,v),e,t)}function Lo(e,t,n,r){if(e===a||oc(e,ut[n])&&!dt.call(r,n))return t;return e}function Po(e,t,n,r,i,o){if(Ec(e)&&Ec(t)){o.set(t,e);ua(e,t,a,Po,o);o["delete"](t)}return e}function $o(e){return Pc(e)?a:e}function Do(e,t,n,r,i,o){var s=n&g,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return false;var c=o.get(e);if(c&&o.get(t))return c==t;var f=-1,d=true,_=n&p?new Jr:a;o.set(e,t);o.set(t,e);while(++f<l){var m=e[f],v=t[f];if(r)var h=s?r(v,m,f,t,e,o):r(m,v,f,e,t,o);if(h!==a){if(h)continue;d=false;break}if(_){if(!Fn(t,function(e,t){if(!Zn(_,t)&&(m===e||i(m,e,n,r,o)))return _.push(t)})){d=false;break}}else if(!(m===v||i(m,v,n,r,o))){d=false;break}}o["delete"](e);o["delete"](t);return d}function No(e,t,n,r,i,a,o){switch(n){case de:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case fe:if(e.byteLength!=t.byteLength||!a(new yt(e),new yt(t)))return false;return true;case G:case K:case Z:return oc(+e,+t);case Q:return e.name==t.name&&e.message==t.message;case ie:case oe:return e==t+"";case X:var s=cr;case ae:var l=r&g;s||(s=_r);if(e.size!=t.size&&!l)return false;var u=o.get(e);if(u)return u==t;r|=p;o.set(e,t);var c=Do(s(e),s(t),r,i,a,o);o["delete"](e);return c;case se:if(Tr)return Tr.call(e)==Tr.call(t)}return false}function Bo(e,t,n,r,i,o){var s=n&g,l=qo(e),u=l.length,c=qo(t),f=c.length;if(u!=f&&!s)return false;var d=u;while(d--){var _=l[d];if(!(s?_ in t:dt.call(t,_)))return false}var m=o.get(e);if(m&&o.get(t))return m==t;var v=true;o.set(e,t);o.set(t,e);var p=s;while(++d<u){_=l[d];var h=e[_],S=t[_];if(r)var T=s?r(S,h,_,t,e,o):r(h,S,_,e,t,o);if(!(T===a?h===S||i(h,S,n,r,o):T)){v=false;break}p||(p="constructor"==_)}if(v&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(v=false)}o["delete"](e);o["delete"](t);return v}function Uo(e){return Os(ws(e,a,Js),e+"")}function qo(e){return Pi(e,xf,Xo)}function Wo(e){return Pi(e,Ef,Zo)}var zo=un?function(e){return un.get(e)}:Ud;function Ho(e){var t=e.name+"",n=cn[t],r=dt.call(cn,t)?n.length:0;while(r--){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Go(e){var t=dt.call(wr,"placeholder")?wr:e;return t.placeholder}function Ko(){var e=wr.iteratee||Fd;e=e===Fd?na:e;return arguments.length?e(arguments[0],arguments[1]):e}function Vo(e,t){var n=e.__data__;return ds(t)?n["string"==typeof t?"string":"hash"]:n.map}function Qo(e){var t=xf(e),n=t.length;while(n--){var r=t[n],i=e[r];t[n]=[r,i,ps(i)]}return t}function Jo(e,t){var n=or(e,t);return Xi(n)?n:a}function Yo(e){var t=dt.call(e,Rt),n=e[Rt];try{e[Rt]=a;var r=true}catch(e){}var i=vt.call(e);r&&(t?e[Rt]=n:delete e[Rt]);return i}var Xo=Pt?function(e){if(null==e)return[];e=rt(e);return Cn(Pt(e),function(t){return xt.call(e,t)})}:Jd;var Zo=Pt?function(e){var t=[];while(e){In(t,Xo(e));e=wt(e)}return t}:Jd;var es=$i;(Zt&&es(new Zt(new ArrayBuffer(1)))!=de||en&&es(new en)!=X||tn&&es(tn.resolve())!=ne||nn&&es(new nn)!=ae||on&&es(new on)!=ue)&&(es=function(e){var t=$i(e),n=t==te?e.constructor:a,r=n?Fs(n):"";if(r)switch(r){case dn:return de;case _n:return X;case Ln:return ne;case Pn:return ae;case Hn:return ue}return t});function ts(e,t,n){var r=-1,i=n.length;while(++r<i){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=qt(t,e+o);break;case"takeRight":e=Ut(e,t-o);break}}return{start:e,end:t}}function ns(e){var t=e.match(qe);return t?t[1].split(We):[]}function rs(e,t,n){t=za(t,e);var r=-1,i=t.length,a=false;while(++r<i){var o=js(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}if(a||++r!=i)return a;i=null==e?0:e.length;return!!i&&xc(i)&&us(o,i)&&(cc(e)||uc(e))}function is(e){var t=e.length,n=e.constructor(t);if(t&&"string"==typeof e[0]&&dt.call(e,"index")){n.index=e.index;n.input=e.input}return n}function as(e){return"function"!=typeof e.constructor||gs(e)?{}:xr(wt(e))}function os(e,t,n,r){var i=e.constructor;switch(t){case fe:return Qa(e);case G:case K:return new i(+e);case de:return Ja(e,r);case _e:case me:case ve:case ge:case pe:case he:case Se:case Te:case ye:return to(e,r);case X:return Ya(e,r,n);case Z:case oe:return new i(e);case ie:return Xa(e);case ae:return Za(e,r,n);case se:return eo(e)}}function ss(e,t){var n=t.length;if(!n)return e;var r=n-1;t[r]=(n>1?"& ":"")+t[r];t=t.join(n>2?", ":" ");return e.replace(Ue,"{\n/* [wrapped with "+t+"] */\n")}function ls(e){return cc(e)||uc(e)||!!(Ct&&e&&e[Ct])}function us(e,t){t=null==t?P:t;return!!t&&("number"==typeof e||Xe.test(e))&&e>-1&&e%1==0&&e<t}function cs(e,t,n){if(!Ec(n))return false;var r=typeof t;if("number"==r?dc(n)&&us(t,n.length):"string"==r&&t in n)return oc(n[t],e);return false}function fs(e,t){if(cc(e))return false;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||Uc(e))return true;return je.test(e)||!Me.test(e)||null!=t&&e in rt(t)}function ds(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function _s(e){var t=Ho(e),n=wr[t];if("function"!=typeof n||!(t in Or.prototype))return false;if(e===n)return true;var r=zo(n);return!!r&&e===r[0]}function ms(e){return!!mt&&mt in e}var vs=ct?wc:Yd;function gs(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ut;return e===n}function ps(e){return e===e&&!Ec(e)}function hs(e,t){return function(n){if(null==n)return false;return n[e]===t&&(t!==a||e in rt(n))}}function Ss(e){var t=qu(e,function(e){n.size===f&&n.clear();return e});var n=t.cache;return t}function Ts(e,t){var n=e[1],r=t[1],i=n|r,a=i<(h|S|x);var o=r==x&&n==y||r==x&&n==E&&e[7].length<=t[8]||r==(x|E)&&t[7].length<=t[8]&&n==y;if(!(a||o))return e;if(r&h){e[2]=t[2];i|=n&h?0:T}var s=t[3];if(s){var l=e[3];e[3]=l?io(l,s,t[4]):s;e[4]=l?dr(e[3],d):t[4]}s=t[5];if(s){l=e[5];e[5]=l?ao(l,s,t[6]):s;e[6]=l?dr(e[5],d):t[6]}s=t[7];s&&(e[7]=s);r&x&&(e[8]=null==e[8]?t[8]:qt(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=i;return e}function ys(e){var t=[];if(null!=e)for(var n in rt(e))t.push(n);return t}function bs(e){return vt.call(e)}function ws(e,t,r){t=Ut(t===a?e.length-1:t,0);return function(){var i=arguments,a=-1,o=Ut(i.length-t,0),s=n(o);while(++a<o)s[a]=i[t+a];a=-1;var l=n(t+1);while(++a<t)l[a]=i[a];l[t]=r(s);return bn(e,this,l)}}function ks(e,t){return t.length<2?e:Li(e,Oa(t,0,-1))}function xs(e,t){var n=e.length,r=qt(t.length,n),i=oo(e);while(r--){var o=t[r];e[r]=us(o,n)?i[o]:a}return e}var Es=As(xa);var Cs=jt||function(e,t){return ln.setTimeout(e,t)};var Os=As(Ea);function Rs(e,t,n){var r=t+"";return Os(e,ss(r,Ls(ns(r),n)))}function As(e){var t=0,n=0;return function(){var r=Ht(),i=I-(r-n);n=r;if(i>0){if(++t>=A)return arguments[0]}else t=0;return e.apply(a,arguments)}}function Is(e,t){var n=-1,r=e.length,i=r-1;t=t===a?r:t;while(++n<t){var o=ha(n,i),s=e[o];e[o]=e[n];e[n]=s}e.length=t;return e}var Ms=Ss(function(e){var t=[];Fe.test(e)&&t.push("");e.replace(Le,function(e,n,r,i){t.push(r?i.replace(He,"$1"):n||e)});return t});function js(e){if("string"==typeof e||Uc(e))return e;var t=e+"";return"0"==t&&1/e==-L?"-0":t}function Fs(e){if(null!=e){try{return ft.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ls(e,t){kn(q,function(n){var r="_."+n[0];t&n[1]&&!On(e,r)&&e.push(r)});return e.sort()}function Ps(e){if(e instanceof Or)return e.clone();var t=new Cr(e.__wrapped__,e.__chain__);t.__actions__=oo(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}function $s(e,t,r){t=(r?cs(e,t,r):t===a)?1:Ut(Jc(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];var o=0,s=0,l=n(Ft(i/t));while(o<i)l[s++]=Oa(e,o,o+=t);return l}function Ds(e){var t=-1,n=null==e?0:e.length,r=0,i=[];while(++t<n){var a=e[t];a&&(i[r++]=a)}return i}function Ns(){var e=arguments.length;if(!e)return[];var t=n(e-1),r=arguments[0],i=e;while(i--)t[i-1]=arguments[i];return In(cc(r)?oo(r):[r],Ri(t,1))}var Bs=ya(function(e,t){return _c(e)?bi(e,Ri(t,1,_c,true)):[]});var Us=ya(function(e,t){var n=sl(t);_c(n)&&(n=a);return _c(e)?bi(e,Ri(t,1,_c,true),Ko(n,2)):[]});var qs=ya(function(e,t){var n=sl(t);_c(n)&&(n=a);return _c(e)?bi(e,Ri(t,1,_c,true),a,n):[]});function Ws(e,t,n){var r=null==e?0:e.length;if(!r)return[];t=n||t===a?1:Jc(t);return Oa(e,t<0?0:t,r)}function zs(e,t,n){var r=null==e?0:e.length;if(!r)return[];t=n||t===a?1:Jc(t);t=r-t;return Oa(e,0,t<0?0:t)}function Hs(e,t){return e&&e.length?Da(e,Ko(t,3),true,true):[]}function Gs(e,t){return e&&e.length?Da(e,Ko(t,3),true):[]}function Ks(e,t,n,r){var i=null==e?0:e.length;if(!i)return[];if(n&&"number"!=typeof n&&cs(e,t,n)){n=0;r=i}return Ci(e,t,n,r)}function Vs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Jc(n);i<0&&(i=Ut(r+i,0));return Nn(e,Ko(t,3),i)}function Qs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;if(n!==a){i=Jc(n);i=n<0?Ut(r+i,0):qt(i,r-1)}return Nn(e,Ko(t,3),i,true)}function Js(e){var t=null==e?0:e.length;return t?Ri(e,1):[]}function Ys(e){var t=null==e?0:e.length;return t?Ri(e,L):[]}function Xs(e,t){var n=null==e?0:e.length;if(!n)return[];t=t===a?1:Jc(t);return Ri(e,t)}function Zs(e){var t=-1,n=null==e?0:e.length,r={};while(++t<n){var i=e[t];r[i[0]]=i[1]}return r}function el(e){return e&&e.length?e[0]:a}function tl(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Jc(n);i<0&&(i=Ut(r+i,0));return Bn(e,t,i)}function nl(e){var t=null==e?0:e.length;return t?Oa(e,0,-1):[]}var rl=ya(function(e){var t=An(e,qa);return t.length&&t[0]===e[0]?qi(t):[]});var il=ya(function(e){var t=sl(e),n=An(e,qa);t===sl(n)?t=a:n.pop();return n.length&&n[0]===e[0]?qi(n,Ko(t,2)):[]});var al=ya(function(e){var t=sl(e),n=An(e,qa);t="function"==typeof t?t:a;t&&n.pop();return n.length&&n[0]===e[0]?qi(n,a,t):[]});function ol(e,t){return null==e?"":Nt.call(e,t)}function sl(e){var t=null==e?0:e.length;return t?e[t-1]:a}function ll(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;if(n!==a){i=Jc(n);i=i<0?Ut(r+i,0):qt(i,r-1)}return t===t?gr(e,t,i):Nn(e,qn,i,true)}function ul(e,t){return e&&e.length?fa(e,Jc(t)):a}var cl=ya(fl);function fl(e,t){return e&&e.length&&t&&t.length?ga(e,t):e}function dl(e,t,n){return e&&e.length&&t&&t.length?ga(e,t,Ko(n,2)):e}function _l(e,t,n){return e&&e.length&&t&&t.length?ga(e,t,a,n):e}var ml=Uo(function(e,t){var n=null==e?0:e.length,r=gi(e,t);pa(e,An(t,function(e){return us(e,n)?+e:e}).sort(no));return r});function vl(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],a=e.length;t=Ko(t,3);while(++r<a){var o=e[r];if(t(o,r,e)){n.push(o);i.push(r)}}pa(e,i);return n}function gl(e){return null==e?e:Vt.call(e)}function pl(e,t,n){var r=null==e?0:e.length;if(!r)return[];if(n&&"number"!=typeof n&&cs(e,t,n)){t=0;n=r}else{t=null==t?0:Jc(t);n=n===a?r:Jc(n)}return Oa(e,t,n)}function hl(e,t){return Aa(e,t)}function Sl(e,t,n){return Ia(e,t,Ko(n,2))}function Tl(e,t){var n=null==e?0:e.length;if(n){var r=Aa(e,t);if(r<n&&oc(e[r],t))return r}return-1}function yl(e,t){return Aa(e,t,true)}function bl(e,t,n){return Ia(e,t,Ko(n,2),true)}function wl(e,t){var n=null==e?0:e.length;if(n){var r=Aa(e,t,true)-1;if(oc(e[r],t))return r}return-1}function kl(e){return e&&e.length?Ma(e):[]}function xl(e,t){return e&&e.length?Ma(e,Ko(t,2)):[]}function El(e){var t=null==e?0:e.length;return t?Oa(e,1,t):[]}function Cl(e,t,n){if(!(e&&e.length))return[];t=n||t===a?1:Jc(t);return Oa(e,0,t<0?0:t)}function Ol(e,t,n){var r=null==e?0:e.length;if(!r)return[];t=n||t===a?1:Jc(t);t=r-t;return Oa(e,t<0?0:t,r)}function Rl(e,t){return e&&e.length?Da(e,Ko(t,3),false,true):[]}function Al(e,t){return e&&e.length?Da(e,Ko(t,3)):[]}var Il=ya(function(e){return La(Ri(e,1,_c,true))});var Ml=ya(function(e){var t=sl(e);_c(t)&&(t=a);return La(Ri(e,1,_c,true),Ko(t,2))});var jl=ya(function(e){var t=sl(e);t="function"==typeof t?t:a;return La(Ri(e,1,_c,true),a,t)});function Fl(e){return e&&e.length?La(e):[]}function Ll(e,t){return e&&e.length?La(e,Ko(t,2)):[]}function Pl(e,t){t="function"==typeof t?t:a;return e&&e.length?La(e,a,t):[]}function $l(e){if(!(e&&e.length))return[];var t=0;e=Cn(e,function(e){if(_c(e)){t=Ut(e.length,t);return true}});return Qn(t,function(t){return An(e,zn(t))})}function Dl(e,t){if(!(e&&e.length))return[];var n=$l(e);if(null==t)return n;return An(n,function(e){return bn(t,a,e)})}var Nl=ya(function(e,t){return _c(e)?bi(e,t):[]});var Bl=ya(function(e){return Ba(Cn(e,_c))});var Ul=ya(function(e){var t=sl(e);_c(t)&&(t=a);return Ba(Cn(e,_c),Ko(t,2))});var ql=ya(function(e){var t=sl(e);t="function"==typeof t?t:a;return Ba(Cn(e,_c),a,t)});var Wl=ya($l);function zl(e,t){return Ua(e||[],t||[],ci)}function Hl(e,t){return Ua(e||[],t||[],ka)}var Gl=ya(function(e){var t=e.length,n=t>1?e[t-1]:a;n="function"==typeof n?(e.pop(),n):a;return Dl(e,n)});function Kl(e){var t=wr(e);t.__chain__=true;return t}function Vl(e,t){t(e);return e}function Ql(e,t){return t(e)}var Jl=Uo(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return gi(t,e)};if(t>1||this.__actions__.length||!(r instanceof Or)||!us(n))return this.thru(i);r=r.slice(n,+n+(t?1:0));r.__actions__.push({func:Ql,args:[i],thisArg:a});return new Cr(r,this.__chain__).thru(function(e){t&&!e.length&&e.push(a);return e})});function Yl(){return Kl(this)}function Xl(){return new Cr(this.value(),this.__chain__)}function Zl(){this.__values__===a&&(this.__values__=Vc(this.value()));var e=this.__index__>=this.__values__.length,t=e?a:this.__values__[this.__index__++];return{done:e,value:t}}function eu(){return this}function tu(e){var t,n=this;while(n instanceof Er){var r=Ps(n);r.__index__=0;r.__values__=a;t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}i.__wrapped__=e;return t}function nu(){var e=this.__wrapped__;if(e instanceof Or){var t=e;this.__actions__.length&&(t=new Or(this));t=t.reverse();t.__actions__.push({func:Ql,args:[gl],thisArg:a});return new Cr(t,this.__chain__)}return this.thru(gl)}function ru(){return Na(this.__wrapped__,this.__actions__)}var iu=co(function(e,t,n){dt.call(e,n)?++e[n]:vi(e,n,1)});function au(e,t,n){var r=cc(e)?En:xi;n&&cs(e,t,n)&&(t=a);return r(e,Ko(t,3))}function ou(e,t){var n=cc(e)?Cn:Oi;return n(e,Ko(t,3))}var su=To(Vs);var lu=To(Qs);function uu(e,t){return Ri(hu(e,t),1)}function cu(e,t){return Ri(hu(e,t),L)}function fu(e,t,n){n=n===a?1:Jc(n);return Ri(hu(e,t),n)}function du(e,t){var n=cc(e)?kn:wi;return n(e,Ko(t,3))}function _u(e,t){var n=cc(e)?xn:ki;return n(e,Ko(t,3))}var mu=co(function(e,t,n){dt.call(e,n)?e[n].push(t):vi(e,n,[t])});function vu(e,t,n,r){e=dc(e)?e:zf(e);n=n&&!r?Jc(n):0;var i=e.length;n<0&&(n=Ut(i+n,0));return Bc(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Bn(e,t,n)>-1}var gu=ya(function(e,t,r){var i=-1,a="function"==typeof t,o=dc(e)?n(e.length):[];wi(e,function(e){o[++i]=a?bn(t,e,r):zi(e,t,r)});return o});var pu=co(function(e,t,n){vi(e,n,t)});function hu(e,t){var n=cc(e)?An:oa;return n(e,Ko(t,3))}function Su(e,t,n,r){if(null==e)return[];cc(t)||(t=null==t?[]:[t]);n=r?a:n;cc(n)||(n=null==n?[]:[n]);return da(e,t,n)}var Tu=co(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function yu(e,t,n){var r=cc(e)?Mn:Gn,i=arguments.length<3;return r(e,Ko(t,4),n,i,wi)}function bu(e,t,n){var r=cc(e)?jn:Gn,i=arguments.length<3;return r(e,Ko(t,4),n,i,ki)}function wu(e,t){var n=cc(e)?Cn:Oi;return n(e,Wu(Ko(t,3)))}function ku(e){var t=cc(e)?oi:ba;return t(e)}function xu(e,t,n){t=(n?cs(e,t,n):t===a)?1:Jc(t);var r=cc(e)?si:wa;return r(e,t)}function Eu(e){var t=cc(e)?li:Ca;return t(e)}function Cu(e){if(null==e)return 0;if(dc(e))return Bc(e)?pr(e):e.length;var t=es(e);if(t==X||t==ae)return e.size;return ra(e).length}function Ou(e,t,n){var r=cc(e)?Fn:Ra;n&&cs(e,t,n)&&(t=a);return r(e,Ko(t,3))}var Ru=ya(function(e,t){if(null==e)return[];var n=t.length;n>1&&cs(e,t[0],t[1])?t=[]:n>2&&cs(t[0],t[1],t[2])&&(t=[t[0]]);return da(e,Ri(t,1),[])});var Au=Mt||function(){return ln.Date.now()};function Iu(e,t){if("function"!=typeof t)throw new ot(u);e=Jc(e);return function(){if(--e<1)return t.apply(this,arguments)}}function Mu(e,t,n){t=n?a:t;t=e&&null==t?e.length:t;return Fo(e,x,a,a,a,a,t)}function ju(e,t){var n;if("function"!=typeof t)throw new ot(u);e=Jc(e);return function(){--e>0&&(n=t.apply(this,arguments));e<=1&&(t=a);return n}}var Fu=ya(function(e,t,n){var r=h;if(n.length){var i=dr(n,Go(Fu));r|=w}return Fo(e,r,t,n,i)});var Lu=ya(function(e,t,n){var r=h|S;if(n.length){var i=dr(n,Go(Lu));r|=w}return Fo(t,r,e,n,i)});function Pu(e,t,n){t=n?a:t;var r=Fo(e,y,a,a,a,a,a,t);r.placeholder=Pu.placeholder;return r}function $u(e,t,n){t=n?a:t;var r=Fo(e,b,a,a,a,a,a,t);r.placeholder=$u.placeholder;return r}function Du(e,t,n){var r,i,o,s,l,c,f=0,d=false,_=false,m=true;if("function"!=typeof e)throw new ot(u);t=Xc(t)||0;if(Ec(n)){d=!!n.leading;_="maxWait"in n;o=_?Ut(Xc(n.maxWait)||0,t):o;m="trailing"in n?!!n.trailing:m}function v(t){var n=r,o=i;r=i=a;f=t;s=e.apply(o,n);return s}function g(e){f=e;l=Cs(S,t);return d?v(e):s}function p(e){var n=e-c,r=e-f,i=t-n;return _?qt(i,o-r):i}function h(e){var n=e-c,r=e-f;return c===a||n>=t||n<0||_&&r>=o}function S(){var e=Au();if(h(e))return T(e);l=Cs(S,p(e))}function T(e){l=a;if(m&&r)return v(e);r=i=a;return s}function y(){l!==a&&Ka(l);f=0;r=c=i=l=a}function b(){return l===a?s:T(Au())}function w(){var e=Au(),n=h(e);r=arguments;i=this;c=e;if(n){if(l===a)return g(c);if(_){l=Cs(S,t);return v(c)}}l===a&&(l=Cs(S,t));return s}w.cancel=y;w.flush=b;return w}var Nu=ya(function(e,t){return yi(e,1,t)});var Bu=ya(function(e,t,n){return yi(e,Xc(t)||0,n)});function Uu(e){return Fo(e,C)}function qu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(u);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);n.cache=a.set(i,o)||a;return o};n.cache=new(qu.Cache||zr);return n}qu.Cache=zr;function Wu(e){if("function"!=typeof e)throw new ot(u);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zu(e){return ju(2,e)}var Hu=Ha(function(e,t){t=1==t.length&&cc(t[0])?An(t[0],Yn(Ko())):An(Ri(t,1),Yn(Ko()));var n=t.length;return ya(function(r){var i=-1,a=qt(r.length,n);while(++i<a)r[i]=t[i].call(this,r[i]);return bn(e,this,r)})});var Gu=ya(function(e,t){var n=dr(t,Go(Gu));return Fo(e,w,a,t,n)});var Ku=ya(function(e,t){var n=dr(t,Go(Ku));return Fo(e,k,a,t,n)});var Vu=Uo(function(e,t){return Fo(e,E,a,a,a,t)});function Qu(e,t){if("function"!=typeof e)throw new ot(u);t=t===a?t:Jc(t);return ya(e,t)}function Ju(e,t){if("function"!=typeof e)throw new ot(u);t=null==t?0:Ut(Jc(t),0);return ya(function(n){var r=n[t],i=Ga(n,0,t);r&&In(i,r);return bn(e,this,i)})}function Yu(e,t,n){var r=true,i=true;if("function"!=typeof e)throw new ot(u);if(Ec(n)){r="leading"in n?!!n.leading:r;i="trailing"in n?!!n.trailing:i}return Du(e,t,{leading:r,maxWait:t,trailing:i})}function Xu(e){return Mu(e,1)}function Zu(e,t){return Gu(Wa(t),e)}function ec(){if(!arguments.length)return[];var e=arguments[0];return cc(e)?e:[e]}function tc(e){return hi(e,v)}function nc(e,t){t="function"==typeof t?t:a;return hi(e,v,t)}function rc(e){return hi(e,_|v)}function ic(e,t){t="function"==typeof t?t:a;return hi(e,_|v,t)}function ac(e,t){return null==t||Ti(e,t,xf(t))}function oc(e,t){return e===t||e!==e&&t!==t}var sc=Ro(Di);var lc=Ro(function(e,t){return e>=t});var uc=Hi(function(){return arguments}())?Hi:function(e){return Cc(e)&&dt.call(e,"callee")&&!xt.call(e,"callee")};var cc=n.isArray;var fc=mn?Yn(mn):Gi;function dc(e){return null!=e&&xc(e.length)&&!wc(e)}function _c(e){return Cc(e)&&dc(e)}function mc(e){return true===e||false===e||Cc(e)&&$i(e)==G}var vc=$t||Yd;var gc=vn?Yn(vn):Ki;function pc(e){return Cc(e)&&1===e.nodeType&&!Pc(e)}function hc(e){if(null==e)return true;if(dc(e)&&(cc(e)||"string"==typeof e||"function"==typeof e.splice||vc(e)||qc(e)||uc(e)))return!e.length;var t=es(e);if(t==X||t==ae)return!e.size;if(gs(e))return!ra(e).length;for(var n in e)if(dt.call(e,n))return false;return true}function Sc(e,t){return Vi(e,t)}function Tc(e,t,n){n="function"==typeof n?n:a;var r=n?n(e,t):a;return r===a?Vi(e,t,a,n):!!r}function yc(e){if(!Cc(e))return false;var t=$i(e);return t==Q||t==V||"string"==typeof e.message&&"string"==typeof e.name&&!Pc(e)}function bc(e){return"number"==typeof e&&Dt(e)}function wc(e){if(!Ec(e))return false;var t=$i(e);return t==J||t==Y||t==H||t==re}function kc(e){return"number"==typeof e&&e==Jc(e)}function xc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=P}function Ec(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Cc(e){return null!=e&&"object"==typeof e}var Oc=gn?Yn(gn):Ji;function Rc(e,t){return e===t||Yi(e,t,Qo(t))}function Ac(e,t,n){n="function"==typeof n?n:a;return Yi(e,t,Qo(t),n)}function Ic(e){return Lc(e)&&e!=+e}function Mc(e){if(vs(e))throw new i(l);return Xi(e)}function jc(e){return null===e}function Fc(e){return null==e}function Lc(e){return"number"==typeof e||Cc(e)&&$i(e)==Z}function Pc(e){if(!Cc(e)||$i(e)!=te)return false;var t=wt(e);if(null===t)return true;var n=dt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ft.call(n)==gt}var $c=pn?Yn(pn):Zi;function Dc(e){return kc(e)&&e>=-P&&e<=P}var Nc=hn?Yn(hn):ea;function Bc(e){return"string"==typeof e||!cc(e)&&Cc(e)&&$i(e)==oe}function Uc(e){return"symbol"==typeof e||Cc(e)&&$i(e)==se}var qc=Sn?Yn(Sn):ta;function Wc(e){return e===a}function zc(e){return Cc(e)&&es(e)==ue}function Hc(e){return Cc(e)&&$i(e)==ce}var Gc=Ro(aa);var Kc=Ro(function(e,t){return e<=t});function Vc(e){if(!e)return[];if(dc(e))return Bc(e)?hr(e):oo(e);if(Ot&&e[Ot])return ur(e[Ot]());var t=es(e),n=t==X?cr:t==ae?_r:zf;return n(e)}function Qc(e){if(!e)return 0===e?e:0;e=Xc(e);if(e===L||e===-L){var t=e<0?-1:1;return t*$}return e===e?e:0}function Jc(e){var t=Qc(e),n=t%1;return t===t?n?t-n:t:0}function Yc(e){return e?pi(Jc(e),0,N):0}function Xc(e){if("number"==typeof e)return e;if(Uc(e))return D;if(Ec(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ec(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var n=Qe.test(e);return n||Ye.test(e)?an(e.slice(2),n?2:8):Ve.test(e)?D:+e}function Zc(e){return so(e,Ef(e))}function ef(e){return e?pi(Jc(e),-P,P):0===e?e:0}function tf(e){return null==e?"":Fa(e)}var nf=fo(function(e,t){if(gs(t)||dc(t)){so(t,xf(t),e);return}for(var n in t)dt.call(t,n)&&ci(e,n,t[n])});var rf=fo(function(e,t){so(t,Ef(t),e)});var af=fo(function(e,t,n,r){so(t,Ef(t),e,r)});var of=fo(function(e,t,n,r){so(t,xf(t),e,r)});var sf=Uo(gi);function lf(e,t){var n=xr(e);return null==t?n:_i(n,t)}var uf=ya(function(e){e.push(a,Lo);return bn(af,a,e)});var cf=ya(function(e){e.push(a,Po);return bn(Af,a,e)});function ff(e,t){return Dn(e,Ko(t,3),Mi)}function df(e,t){return Dn(e,Ko(t,3),ji)}function _f(e,t){return null==e?e:Ai(e,Ko(t,3),Ef)}function mf(e,t){return null==e?e:Ii(e,Ko(t,3),Ef)}function vf(e,t){return e&&Mi(e,Ko(t,3))}function gf(e,t){return e&&ji(e,Ko(t,3))}function pf(e){return null==e?[]:Fi(e,xf(e))}function hf(e){return null==e?[]:Fi(e,Ef(e))}function Sf(e,t,n){var r=null==e?a:Li(e,t);return r===a?n:r}function Tf(e,t){return null!=e&&rs(e,t,Ni)}function yf(e,t){return null!=e&&rs(e,t,Bi)}var bf=wo(function(e,t,n){e[t]=n},Rd(jd));var wf=wo(function(e,t,n){dt.call(e,t)?e[t].push(n):e[t]=[n]},Ko);var kf=ya(zi);function xf(e){return dc(e)?ai(e):ra(e)}function Ef(e){return dc(e)?ai(e,true):ia(e)}function Cf(e,t){var n={};t=Ko(t,3);Mi(e,function(e,r,i){vi(n,t(e,r,i),e)});return n}function Of(e,t){var n={};t=Ko(t,3);Mi(e,function(e,r,i){vi(n,r,t(e,r,i))});return n}var Rf=fo(function(e,t,n){ua(e,t,n)});var Af=fo(function(e,t,n,r){ua(e,t,n,r)});var If=Uo(function(e,t){var n={};if(null==e)return n;var r=false;t=An(t,function(t){t=za(t,e);r||(r=t.length>1);return t});so(e,Wo(e),n);r&&(n=hi(n,_|m|v,$o));var i=t.length;while(i--)Pa(n,t[i]);return n});function Mf(e,t){return Ff(e,Wu(Ko(t)))}var jf=Uo(function(e,t){return null==e?{}:_a(e,t)});function Ff(e,t){if(null==e)return{};var n=An(Wo(e),function(e){return[e]});t=Ko(t);return ma(e,n,function(e,n){return t(e,n[0])})}function Lf(e,t,n){t=za(t,e);var r=-1,i=t.length;if(!i){i=1;e=a}while(++r<i){var o=null==e?a:e[js(t[r])];if(o===a){r=i;o=n}e=wc(o)?o.call(e):o}return e}function Pf(e,t,n){return null==e?e:ka(e,t,n)}function $f(e,t,n,r){r="function"==typeof r?r:a;return null==e?e:ka(e,t,n,r)}var Df=jo(xf);var Nf=jo(Ef);function Bf(e,t,n){var r=cc(e),i=r||vc(e)||qc(e);t=Ko(t,4);if(null==n){var a=e&&e.constructor;n=i?r?new a:[]:Ec(e)&&wc(a)?xr(wt(e)):{}}(i?kn:Mi)(e,function(e,r,i){return t(n,e,r,i)});return n}function Uf(e,t){return null==e||Pa(e,t)}function qf(e,t,n){return null==e?e:$a(e,t,Wa(n))}function Wf(e,t,n,r){r="function"==typeof r?r:a;return null==e?e:$a(e,t,Wa(n),r)}function zf(e){return null==e?[]:Xn(e,xf(e))}function Hf(e){return null==e?[]:Xn(e,Ef(e))}function Gf(e,t,n){if(n===a){n=t;t=a}if(n!==a){n=Xc(n);n=n===n?n:0}if(t!==a){t=Xc(t);t=t===t?t:0}return pi(Xc(e),t,n)}function Kf(e,t,n){t=Qc(t);if(n===a){n=t;t=0}else n=Qc(n);e=Xc(e);return Ui(e,t,n)}function Vf(e,t,n){n&&"boolean"!=typeof n&&cs(e,t,n)&&(t=n=a);if(n===a)if("boolean"==typeof t){n=t;t=a}else if("boolean"==typeof e){n=e;e=a}if(e===a&&t===a){e=0;t=1}else{e=Qc(e);if(t===a){t=e;e=0}else t=Qc(t)}if(e>t){var r=e;e=t;t=r}if(n||e%1||t%1){var i=Kt();return qt(e+i*(t-e+rn("1e-"+((i+"").length-1))),t)}return ha(e,t)}var Qf=po(function(e,t,n){t=t.toLowerCase();return e+(n?Jf(t):t)});function Jf(e){return wd(tf(e).toLowerCase())}function Yf(e){e=tf(e);return e&&e.replace(Ze,rr).replace(zt,"")}function Xf(e,t,n){e=tf(e);t=Fa(t);var r=e.length;n=n===a?r:pi(Jc(n),0,r);var i=n;n-=t.length;return n>=0&&e.slice(n,i)==t}function Zf(e){e=tf(e);return e&&Oe.test(e)?e.replace(Ee,ir):e}function ed(e){e=tf(e);return e&&$e.test(e)?e.replace(Pe,"\\$&"):e}var td=po(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});var nd=po(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});var rd=go("toLowerCase");function id(e,t,n){e=tf(e);t=Jc(t);var r=t?pr(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Eo(Lt(i),n)+e+Eo(Ft(i),n)}function ad(e,t,n){e=tf(e);t=Jc(t);var r=t?pr(e):0;return t&&r<t?e+Eo(t-r,n):e}function od(e,t,n){e=tf(e);t=Jc(t);var r=t?pr(e):0;return t&&r<t?Eo(t-r,n)+e:e}function sd(e,t,n){n||null==t?t=0:t&&(t=+t);return Gt(tf(e).replace(Ne,""),t||0)}function ld(e,t,n){t=(n?cs(e,t,n):t===a)?1:Jc(t);return Ta(tf(e),t)}function ud(){var e=arguments,t=tf(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var cd=po(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function fd(e,t,n){n&&"number"!=typeof n&&cs(e,t,n)&&(t=n=a);n=n===a?N:n>>>0;if(!n)return[];e=tf(e);if(e&&("string"==typeof t||null!=t&&!$c(t))){t=Fa(t);if(!t&&sr(e))return Ga(hr(e),0,n)}return e.split(t,n)}var dd=po(function(e,t,n){return e+(n?" ":"")+wd(t)});function _d(e,t,n){e=tf(e);n=null==n?0:pi(Jc(n),0,e.length);t=Fa(t);return e.slice(n,n+t.length)==t}function md(e,t,n){var r=wr.templateSettings;n&&cs(e,t,n)&&(t=a);e=tf(e);t=af({},t,r,Lo);var i=af({},t.imports,r.imports,Lo),o=xf(i),s=Xn(i,o);var l,u,c=0,f=t.interpolate||et,d="__p += '";var _=it((t.escape||et).source+"|"+f.source+"|"+(f===Ie?Ge:et).source+"|"+(t.evaluate||et).source+"|$","g");var m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Jt+"]")+"\n";e.replace(_,function(t,n,r,i,a,o){r||(r=i);d+=e.slice(c,o).replace(tt,ar);if(n){l=true;d+="' +\n__e("+n+") +\n'"}if(a){u=true;d+="';\n"+a+";\n__p += '"}r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'");c=o+t.length;return t});d+="';\n";var v=t.variable;v||(d="with (obj) {\n"+d+"\n}\n");d=(u?d.replace(be,""):d).replace(we,"$1").replace(ke,"$1;");d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=xd(function(){return ze(o,m+"return "+d).apply(a,s)});g.source=d;if(yc(g))throw g;return g}function vd(e){return tf(e).toLowerCase()}function gd(e){return tf(e).toUpperCase()}function pd(e,t,n){e=tf(e);if(e&&(n||t===a))return e.replace(De,"");if(!e||!(t=Fa(t)))return e;var r=hr(e),i=hr(t),o=er(r,i),s=tr(r,i)+1;return Ga(r,o,s).join("")}function hd(e,t,n){e=tf(e);if(e&&(n||t===a))return e.replace(Be,"");if(!e||!(t=Fa(t)))return e;var r=hr(e),i=tr(r,hr(t))+1;return Ga(r,0,i).join("")}function Sd(e,t,n){e=tf(e);if(e&&(n||t===a))return e.replace(Ne,"");if(!e||!(t=Fa(t)))return e;var r=hr(e),i=er(r,hr(t));return Ga(r,i).join("")}function Td(e,t){var n=O,r=R;if(Ec(t)){var i="separator"in t?t.separator:i;n="length"in t?Jc(t.length):n;r="omission"in t?Fa(t.omission):r}e=tf(e);var o=e.length;if(sr(e)){var s=hr(e);o=s.length}if(n>=o)return e;var l=n-pr(r);if(l<1)return r;var u=s?Ga(s,0,l).join(""):e.slice(0,l);if(i===a)return u+r;s&&(l+=u.length-l);if($c(i)){if(e.slice(l).search(i)){var c,f=u;i.global||(i=it(i.source,tf(Ke.exec(i))+"g"));i.lastIndex=0;while(c=i.exec(f))var d=c.index;u=u.slice(0,d===a?l:d)}}else if(e.indexOf(Fa(i),l)!=l){var _=u.lastIndexOf(i);_>-1&&(u=u.slice(0,_))}return u+r}function yd(e){e=tf(e);return e&&Ce.test(e)?e.replace(xe,Sr):e}var bd=po(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});var wd=go("toUpperCase");function kd(e,t,n){e=tf(e);t=n?a:t;if(t===a)return lr(e)?br(e):$n(e);return e.match(t)||[]}var xd=ya(function(e,t){try{return bn(e,a,t)}catch(e){return yc(e)?e:new i(e)}});var Ed=Uo(function(e,t){kn(t,function(t){t=js(t);vi(e,t,Fu(e[t],e))});return e});function Cd(e){var t=null==e?0:e.length,n=Ko();e=t?An(e,function(e){if("function"!=typeof e[1])throw new ot(u);return[n(e[0]),e[1]]}):[];return ya(function(n){var r=-1;while(++r<t){var i=e[r];if(bn(i[0],this,n))return bn(i[1],this,n)}})}function Od(e){return Si(hi(e,_))}function Rd(e){return function(){return e}}function Ad(e,t){return null==e||e!==e?t:e}var Id=yo();var Md=yo(true);function jd(e){return e}function Fd(e){return na("function"==typeof e?e:hi(e,_))}function Ld(e){return sa(hi(e,_))}function Pd(e,t){return la(e,hi(t,_))}var $d=ya(function(e,t){return function(n){return zi(n,e,t)}});var Dd=ya(function(e,t){return function(n){return zi(e,n,t)}});function Nd(e,t,n){var r=xf(t),i=Fi(t,r);if(null==n&&!(Ec(t)&&(i.length||!r.length))){n=t;t=e;e=this;i=Fi(t,xf(t))}var a=!(Ec(n)&&"chain"in n)||!!n.chain,o=wc(e);kn(i,function(n){var r=t[n];e[n]=r;o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=oo(this.__actions__);i.push({func:r,args:arguments,thisArg:e});n.__chain__=t;return n}return r.apply(e,In([this.value()],arguments))})});return e}function Bd(){ln._===this&&(ln._=pt);return this}function Ud(){}function qd(e){e=Jc(e);return ya(function(t){return fa(t,e)})}var Wd=xo(An);var zd=xo(En);var Hd=xo(Fn);function Gd(e){return fs(e)?zn(js(e)):va(e)}function Kd(e){return function(t){return null==e?a:Li(e,t)}}var Vd=Oo();var Qd=Oo(true);function Jd(){return[]}function Yd(){return false}function Xd(){return{}}function Zd(){return""}function e_(){return true}function t_(e,t){e=Jc(e);if(e<1||e>P)return[];var n=N,r=qt(e,N);t=Ko(t);e-=N;var i=Qn(r,t);while(++n<e)t(n);return i}function n_(e){if(cc(e))return An(e,js);return Uc(e)?[e]:oo(Ms(tf(e)))}function r_(e){var t=++_t;return tf(e)+t}var i_=ko(function(e,t){return e+t},0);var a_=Io("ceil");var o_=ko(function(e,t){return e/t},1);var s_=Io("floor");function l_(e){return e&&e.length?Ei(e,jd,Di):a}function u_(e,t){return e&&e.length?Ei(e,Ko(t,2),Di):a}function c_(e){return Wn(e,jd)}function f_(e,t){return Wn(e,Ko(t,2))}function d_(e){return e&&e.length?Ei(e,jd,aa):a}function __(e,t){return e&&e.length?Ei(e,Ko(t,2),aa):a}var m_=ko(function(e,t){return e*t},1);var v_=Io("round");var g_=ko(function(e,t){return e-t},0);function p_(e){return e&&e.length?Vn(e,jd):0}function h_(e,t){return e&&e.length?Vn(e,Ko(t,2)):0}wr.after=Iu;wr.ary=Mu;wr.assign=nf;wr.assignIn=rf;wr.assignInWith=af;wr.assignWith=of;wr.at=sf;wr.before=ju;wr.bind=Fu;wr.bindAll=Ed;wr.bindKey=Lu;wr.castArray=ec;wr.chain=Kl;wr.chunk=$s;wr.compact=Ds;wr.concat=Ns;wr.cond=Cd;wr.conforms=Od;wr.constant=Rd;wr.countBy=iu;wr.create=lf;wr.curry=Pu;wr.curryRight=$u;wr.debounce=Du;wr.defaults=uf;wr.defaultsDeep=cf;wr.defer=Nu;wr.delay=Bu;wr.difference=Bs;wr.differenceBy=Us;wr.differenceWith=qs;wr.drop=Ws;wr.dropRight=zs;wr.dropRightWhile=Hs;wr.dropWhile=Gs;wr.fill=Ks;wr.filter=ou;wr.flatMap=uu;wr.flatMapDeep=cu;wr.flatMapDepth=fu;wr.flatten=Js;wr.flattenDeep=Ys;wr.flattenDepth=Xs;wr.flip=Uu;wr.flow=Id;wr.flowRight=Md;wr.fromPairs=Zs;wr.functions=pf;wr.functionsIn=hf;wr.groupBy=mu;wr.initial=nl;wr.intersection=rl;wr.intersectionBy=il;wr.intersectionWith=al;wr.invert=bf;wr.invertBy=wf;wr.invokeMap=gu;wr.iteratee=Fd;wr.keyBy=pu;wr.keys=xf;wr.keysIn=Ef;wr.map=hu;wr.mapKeys=Cf;wr.mapValues=Of;wr.matches=Ld;wr.matchesProperty=Pd;wr.memoize=qu;wr.merge=Rf;wr.mergeWith=Af;wr.method=$d;wr.methodOf=Dd;wr.mixin=Nd;wr.negate=Wu;wr.nthArg=qd;wr.omit=If;wr.omitBy=Mf;wr.once=zu;wr.orderBy=Su;wr.over=Wd;wr.overArgs=Hu;wr.overEvery=zd;wr.overSome=Hd;wr.partial=Gu;wr.partialRight=Ku;wr.partition=Tu;wr.pick=jf;wr.pickBy=Ff;wr.property=Gd;wr.propertyOf=Kd;wr.pull=cl;wr.pullAll=fl;wr.pullAllBy=dl;wr.pullAllWith=_l;wr.pullAt=ml;wr.range=Vd;wr.rangeRight=Qd;wr.rearg=Vu;wr.reject=wu;wr.remove=vl;wr.rest=Qu;wr.reverse=gl;wr.sampleSize=xu;wr.set=Pf;wr.setWith=$f;wr.shuffle=Eu;wr.slice=pl;wr.sortBy=Ru;wr.sortedUniq=kl;wr.sortedUniqBy=xl;wr.split=fd;wr.spread=Ju;wr.tail=El;wr.take=Cl;wr.takeRight=Ol;wr.takeRightWhile=Rl;wr.takeWhile=Al;wr.tap=Vl;wr.throttle=Yu;wr.thru=Ql;wr.toArray=Vc;wr.toPairs=Df;wr.toPairsIn=Nf;wr.toPath=n_;wr.toPlainObject=Zc;wr.transform=Bf;wr.unary=Xu;wr.union=Il;wr.unionBy=Ml;wr.unionWith=jl;wr.uniq=Fl;wr.uniqBy=Ll;wr.uniqWith=Pl;wr.unset=Uf;wr.unzip=$l;wr.unzipWith=Dl;wr.update=qf;wr.updateWith=Wf;wr.values=zf;wr.valuesIn=Hf;wr.without=Nl;wr.words=kd;wr.wrap=Zu;wr.xor=Bl;wr.xorBy=Ul;wr.xorWith=ql;wr.zip=Wl;wr.zipObject=zl;wr.zipObjectDeep=Hl;wr.zipWith=Gl;wr.entries=Df;wr.entriesIn=Nf;wr.extend=rf;wr.extendWith=af;Nd(wr,wr);wr.add=i_;wr.attempt=xd;wr.camelCase=Qf;wr.capitalize=Jf;wr.ceil=a_;wr.clamp=Gf;wr.clone=tc;wr.cloneDeep=rc;wr.cloneDeepWith=ic;wr.cloneWith=nc;wr.conformsTo=ac;wr.deburr=Yf;wr.defaultTo=Ad;wr.divide=o_;wr.endsWith=Xf;wr.eq=oc;wr.escape=Zf;wr.escapeRegExp=ed;wr.every=au;wr.find=su;wr.findIndex=Vs;wr.findKey=ff;wr.findLast=lu;wr.findLastIndex=Qs;wr.findLastKey=df;wr.floor=s_;wr.forEach=du;wr.forEachRight=_u;wr.forIn=_f;wr.forInRight=mf;wr.forOwn=vf;wr.forOwnRight=gf;wr.get=Sf;wr.gt=sc;wr.gte=lc;wr.has=Tf;wr.hasIn=yf;wr.head=el;wr.identity=jd;wr.includes=vu;wr.indexOf=tl;wr.inRange=Kf;wr.invoke=kf;wr.isArguments=uc;wr.isArray=cc;wr.isArrayBuffer=fc;wr.isArrayLike=dc;wr.isArrayLikeObject=_c;wr.isBoolean=mc;wr.isBuffer=vc;wr.isDate=gc;wr.isElement=pc;wr.isEmpty=hc;wr.isEqual=Sc;wr.isEqualWith=Tc;wr.isError=yc;wr.isFinite=bc;wr.isFunction=wc;wr.isInteger=kc;wr.isLength=xc;wr.isMap=Oc;wr.isMatch=Rc;wr.isMatchWith=Ac;wr.isNaN=Ic;wr.isNative=Mc;wr.isNil=Fc;wr.isNull=jc;wr.isNumber=Lc;wr.isObject=Ec;wr.isObjectLike=Cc;wr.isPlainObject=Pc;wr.isRegExp=$c;wr.isSafeInteger=Dc;wr.isSet=Nc;wr.isString=Bc;wr.isSymbol=Uc;wr.isTypedArray=qc;wr.isUndefined=Wc;wr.isWeakMap=zc;wr.isWeakSet=Hc;wr.join=ol;wr.kebabCase=td;wr.last=sl;wr.lastIndexOf=ll;wr.lowerCase=nd;wr.lowerFirst=rd;wr.lt=Gc;wr.lte=Kc;wr.max=l_;wr.maxBy=u_;wr.mean=c_;wr.meanBy=f_;wr.min=d_;wr.minBy=__;wr.stubArray=Jd;wr.stubFalse=Yd;wr.stubObject=Xd;wr.stubString=Zd;wr.stubTrue=e_;wr.multiply=m_;wr.nth=ul;wr.noConflict=Bd;wr.noop=Ud;wr.now=Au;wr.pad=id;wr.padEnd=ad;wr.padStart=od;wr.parseInt=sd;wr.random=Vf;wr.reduce=yu;wr.reduceRight=bu;wr.repeat=ld;wr.replace=ud;wr.result=Lf;wr.round=v_;wr.runInContext=e;wr.sample=ku;wr.size=Cu;wr.snakeCase=cd;wr.some=Ou;wr.sortedIndex=hl;wr.sortedIndexBy=Sl;wr.sortedIndexOf=Tl;wr.sortedLastIndex=yl;wr.sortedLastIndexBy=bl;wr.sortedLastIndexOf=wl;wr.startCase=dd;wr.startsWith=_d;wr.subtract=g_;wr.sum=p_;wr.sumBy=h_;wr.template=md;wr.times=t_;wr.toFinite=Qc;wr.toInteger=Jc;wr.toLength=Yc;wr.toLower=vd;wr.toNumber=Xc;wr.toSafeInteger=ef;wr.toString=tf;wr.toUpper=gd;wr.trim=pd;wr.trimEnd=hd;wr.trimStart=Sd;wr.truncate=Td;wr.unescape=yd;wr.uniqueId=r_;wr.upperCase=bd;wr.upperFirst=wd;wr.each=du;wr.eachRight=_u;wr.first=el;Nd(wr,function(){var e={};Mi(wr,function(t,n){dt.call(wr.prototype,n)||(e[n]=t)});return e}(),{chain:false});wr.VERSION=o;kn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){wr[e].placeholder=wr});kn(["drop","take"],function(e,t){Or.prototype[e]=function(n){n=n===a?1:Ut(Jc(n),0);var r=this.__filtered__&&!t?new Or(this):this.clone();r.__filtered__?r.__takeCount__=qt(n,r.__takeCount__):r.__views__.push({size:qt(n,N),type:e+(r.__dir__<0?"Right":"")});return r};Or.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}});kn(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==M||n==F;Or.prototype[e]=function(e){var t=this.clone();t.__iteratees__.push({iteratee:Ko(e,3),type:n});t.__filtered__=t.__filtered__||r;return t}});kn(["head","last"],function(e,t){var n="take"+(t?"Right":"");Or.prototype[e]=function(){return this[n](1).value()[0]}});kn(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Or.prototype[e]=function(){return this.__filtered__?new Or(this):this[n](1)}});Or.prototype.compact=function(){return this.filter(jd)};Or.prototype.find=function(e){return this.filter(e).head()};Or.prototype.findLast=function(e){return this.reverse().find(e)};Or.prototype.invokeMap=ya(function(e,t){if("function"==typeof e)return new Or(this);return this.map(function(n){return zi(n,e,t)})});Or.prototype.reject=function(e){return this.filter(Wu(Ko(e)))};Or.prototype.slice=function(e,t){e=Jc(e);var n=this;if(n.__filtered__&&(e>0||t<0))return new Or(n);e<0?n=n.takeRight(-e):e&&(n=n.drop(e));if(t!==a){t=Jc(t);n=t<0?n.dropRight(-t):n.take(t-e)}return n};Or.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Or.prototype.toArray=function(){return this.take(N)};Mi(Or.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=wr[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);if(!i)return;wr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof Or,u=s[0],c=l||cc(t);var f=function(e){var t=i.apply(wr,In([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=false);var d=this.__chain__,_=!!this.__actions__.length,m=o&&!d,v=l&&!_;if(!o&&c){t=v?t:new Or(this);var g=e.apply(t,s);g.__actions__.push({func:Ql,args:[f],thisArg:a});return new Cr(g,d)}if(m&&v)return e.apply(this,s);g=this.thru(f);return m?r?g.value()[0]:g.value():g}});kn(["pop","push","shift","sort","splice","unshift"],function(e){var t=st[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);wr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(cc(i)?i:[],e)}return this[n](function(n){return t.apply(cc(n)?n:[],e)})}});Mi(Or.prototype,function(e,t){var n=wr[t];if(n){var r=n.name+"",i=cn[r]||(cn[r]=[]);i.push({name:t,func:n})}});cn[bo(a,S).name]=[{name:"wrapper",func:a}];Or.prototype.clone=Rr;Or.prototype.reverse=Ar;Or.prototype.value=Ir;wr.prototype.at=Jl;wr.prototype.chain=Yl;wr.prototype.commit=Xl;wr.prototype.next=Zl;wr.prototype.plant=tu;wr.prototype.reverse=nu;wr.prototype.toJSON=wr.prototype.valueOf=wr.prototype.value=ru;wr.prototype.first=wr.prototype.head;Ot&&(wr.prototype[Ot]=eu);return wr};var kr=wr();true;ln._=kr;!(i=function(){return kr}.call(t,n,t,r),i!==a&&(r.exports=i))}).call(this)}).call(t,n(7),n(57)(e))},9706:function(e,t,n){"use strict";t["c"]=f;t["b"]=_;t["a"]=m;var r=n(1);var i=n.n(r);var a=n(7410);var o=n.n(a);var s=function(){function e(e,t){var n=[];var r=true;var i=false;var a=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){i=true;a=e}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function l(e){if(o.a.paths.indexOf(e)>=0)return true;if(Object(r["some"])(o.a.prefixes,function(t){return 0===e.indexOf(t)}))return true;return false}var u={};function c(e){u[e]||(u[e]=0);u[e]+=1}window.showFallbackCalls=function e(){return Object(r["sortBy"])(Object(r["map"])(u,function(e,t){t,e}),"value")};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r["noop"];if(l(e))throw new Error("Unable to adapt "+e+": this is a blacklisted function and should not be used from modern code. See #dhtml-modern for help.");return function(){if(!Object(r["hasIn"])(window,e)){c(e);return t.apply(void 0,arguments)}var n=Object(r["get"])(window,e);return Object(r["isFunction"])(n)?n.apply(void 0,arguments):n}}var d=function e(t,n,r){var i=s(r,1),a=i[0];return t(a)};function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Promise.resolve;if(l(e))throw new Error("Unable to adapt "+e+": this is a blacklisted function and should not be used from modern code. See #dhtml-modern for help.");return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];if(!Object(r["hasIn"])(window,e)){c(e);return n()}var s=Object(r["get"])(window,e);if(!Object(r["isFunction"])(s))throw new Error(e+" is not a function");return new Promise(function(e,n){s.apply(void 0,a.concat([function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];t(e,n,i)}]))})}}function m(e,t){var n=f(e,t);return function(t){for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(!Object(r["isObject"])(t))throw new Error("adaptFunctionWithFallbackAndStateGuard: "+e+" must be given a state object");return n.apply(void 0,a)}}},9709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["setRedactionEnabled"]=g;t["setLogLevel"]=p;t["action"]=h;t["debug"]=S;t["info"]=T;t["warn"]=y;t["error"]=b;t["makeLogDate"]=k;var r=n(1);var i=n.n(r);var a=n(9827);var o=n(9719);var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=a["isDev"]?"warn":"info";var c=["debug","info","action","warn","error"];var f=15;var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var _="ACTION";var m=["name","_name_lc","real_name","_real_name_lc","real_name_normalized","_real_name_normalized_lc","display_name","_display_name_lc","display_name_normalized","_display_name_normalized_lc","first_name","_first_name_lc","last_name","_last_name_lc","preferred_name","full_name","email","skype","status_text","title","src","text","msgs"];var v=true;function g(e){v=e}function p(e){if(!c.includes(e)){console.error("Invalid log level "+e+" passed to setLogLevel(). Accepted values are "+c.join(", ")+".");return}u=e}function h(e,t){if("warn"===u||"error"===u)return;if("string"!==typeof e){console.error("action() expects the first argument to be a string describing the context of the log. Instead received "+e);return}if("string"!==typeof t){console.error("action() expects the second argument to be a string describing a user action");return}var n="["+_+":"+x(e)+"] "+t;for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];i.length>0?w("info",[n,i]):w("info",[n])}function S(){if("debug"!==u)return;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];w("info",t)}function T(e){if("debug"!==u&&"info"!==u)return;if("string"!==typeof e){console.error("info() expects the first argument to be a string describing the context of the log. Instead received "+e);return}if(e===_){console.error("The log label ACTION is reserved for the action() method. Please choose something else.");return}for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length){console.error("info() expects 1 or more arguments to be passed after the required label");return}var i="["+x(e)+"]";w("info",[i].concat(n))}function y(){if("error"===u)return;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];w("warn",t)}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];w("error",t)}function w(e,t){if(!window.console||!console[e])return;var n=k();var i=t;a["isDev"]||v&&(i=t.map(function(e){return E(e)}));var o=true;var s=Object(r["isString"])(i[0])&&2===i.length&&Object(r["isArray"])(i[1])&&1===i[1].length&&Object(r["isString"])(i[1][0])||Object(r["isArray"])(i[0])&&1===i.length&&1===i[0].length&&Object(r["isString"])(i[0][0]);if(!s){var u=i.length;while(o&&u){u-=1;o=Object(r["isString"])(i[u])}}if(o){i.unshift(n);console[e](i.join(" "))}else{var c;(c=console)[e].apply(c,[n].concat(l(i)))}}function k(){var e=new Date;var t=d[e.getMonth()];var n=e.getDate();var r={h:e.getHours(),mi:e.getMinutes(),s:e.getSeconds(),ms:e.getMilliseconds()};Object.keys(r).map(function(e){"ms"===e?r[e]<10?r[e]=r[e]+"00":r[e]<100&&(r[e]=r[e]+"0"):r[e]<10&&(r[e]="0"+r[e]);return null});return t+"-"+n+" "+r.h+":"+r.mi+":"+r.s+"."+r.ms}function x(e){if(!e){console.error("No label passed to formatLabel().");return false}return e.substring(0,f).toUpperCase()}function E(e,t){var n=void 0;var i=t||1;if(!e||"object"!==("undefined"===typeof e?"undefined":s(e)))return e;if(e instanceof Error)return{error:e.message};t&&(i+=1);if(t>=10)return e;n=Array.isArray(e)?[]:{};Object(r["each"])(e,function(e,t){m.includes(t)?n[t]="[redacted]":n[t]=E(e,i)});return n}function C(e){e.log_level&&p(e.log_level)}C(Object(o["urlQueryStringParse"])(window.location.href))},9719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"URL_REGEXP",function(){return d});t["findUrlsInString"]=_;t["parseUrl"]=m;t["getTeamSubdomain"]=v;t["getHostName"]=g;t["setHostName"]=p;t["isValidSlackWebSocketUrl"]=h;t["setUrlQueryStringValue"]=S;t["removeUrlQueryStringValue"]=T;t["extractStateObjectFromUrl"]=y;t["urlQueryStringParse"]=b;t["simpleIsUrl"]=x;t["isValidSlackHostName"]=E;t["getReferrerSafeLinkAttrs"]=C;t["getTargetAttr"]=O;var r=n(1);var i=n.n(r);var a=n(9827);var o=n(9750);var s=n(9732);var l=n(9721);var u=n(9740);var c=n(13455);var f=n(13455);n.d(t,"removeQueryStringValue",function(){return f["c"]});n.d(t,"queryStringEncode",function(){return f["a"]});n.d(t,"queryStringParse",function(){return f["b"]});n.d(t,"setQueryStringValue",function(){return f["d"]});var d=/((ftp|http|https):\/\/|\bw{3}\.)[a-z0-9\-.]+[a-z]+(:[a-z0-9]*)?\/?([@a-z0-9\-._?,'/\\+&amp;%:!$#=~])*/gi;function _(e){return e.match(d)||[]}function m(e){if(!e)return{};var t=document.createElement("a");t.href=e;return{hash:t.hash,hostname:t.hostname,port:t.port?parseInt(t.port,10):void 0,pathname:t.pathname,protocol:t.protocol,search:t.search}}function v(e){var t=m(e).hostname||"";if(!t)return"";var n=t.split(".");var r=n.length>2?n.slice(n.length-2).join("."):"";if(n.length>2&&"slack.com"===r)return n[0];return""}function g(e,t){var n=m(e).hostname||"";if(!n)return n;if(n&&t){var r=n.split(".");if(r.length>2)return r.slice(r.length-2).join(".")}return n}function p(e,t){var n=m(e);return Object(r["compact"])([n.protocol,"//",t,n.pathname,n.search,n.hash]).join("")}function h(e){var t=g(e);if(a["isDev"]&&"localhost"===t)return true;return/\.slack-msgs.(com|eu)$/.test(t)}function S(e,t,n,r){var i=document.createElement("a");i.href=e;var a=i.search?i.search.slice(1):"";i.search=Object(c["d"])(a,t,n,r);return i.href}function T(e,t){var n=document.createElement("a");n.href=e;if(!n.search)return e;var r=n.search.slice(1);n.search=Object(c["c"])(r,t);return n.href}function y(e){var t=b(e).state;t=t?t.match(/(\{.*\})/g):null;t=t?t[0]:null;try{t=t?JSON.parse(t):null}catch(e){t=null}return t}function b(e){var t=document.createElement("a");t.href=e;if(!t.search)return{};var n=t.search?t.search.slice(1):"";return Object(c["b"])(n)}var w=/[a-z0-9]+\.[a-z0-9]+/i;var k=["http","https"];function x(e){if(-1!==e.indexOf(" "))return false;var t=document.createElement("a");t.href=e;if(!t.protocol||!t.pathname)return false;if(window.location.href.substr(0,window.location.href.lastIndexOf("/"))+"/"+e===t.href)return false;var n=t.protocol.slice(0,-1).toLowerCase();if(Object(r["includes"])(k,n)){if(!t.hostname)return false;if("localhost"===t.hostname)return true;return w.test(t.hostname)}return true}function E(e){return!!e.match(/^[^.]+\.(((enterprise\.)?(staging|dev\d*)|enterprise)\.)?slack\.com$/)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.redirDomain,i=void 0===n?"slack-redir.net":n,a=t.hideReferrers,u=void 0===a||a;var c={href:e,originalURL:e,proxyURL:null,rel:null,isProxied:false};if("string"!==typeof e)return null;if(e.match(/^javascript:/gi))return null;if(Object(o["a"])())return c;if(!u)return c;if(!Object(l["l"])(e))return c;var f=Object(s["e"])(e);f=f.replace(/&amp;/g,"&");f=Object(r["escape"])(f);f=f.replace(/&amp;/g,"&").replace(/(%27|&#39;)/g,"'");f=encodeURIComponent(f);var d=Object(l["f"])();var _=d.redirect_type?"&v="+d.redirect_type:"";c.href="https://"+i+"/link?url="+f+_;c.proxyURL=c.href;c.rel="noopener noreferrer";c.isProxied=true;return c}function O(e){var t=m(e);var n=/\/(messages|unreads|threads)/;if(t.hostname===document.location.hostname&&t.pathname.match(n))return"_self";if(Object(u["a"])(e))return e;return"_blank"}},9720:function(e,t,n){"use strict";var r=n(9736);n.d(t,"a",function(){return r["a"]});n.d(t,"b",function(){return r["b"]});n.d(t,"c",function(){return r["c"]});n.d(t,"d",function(){return r["d"]});n.d(t,"e",function(){return r["e"]});n.d(t,"f",function(){return r["f"]});n.d(t,"g",function(){return r["g"]})},9721:function(e,t,n){"use strict";n.d(t,"h",function(){return o});n.d(t,"i",function(){return s});n.d(t,"a",function(){return c});n.d(t,"b",function(){return f});n.d(t,"c",function(){return d});n.d(t,"d",function(){return _});n.d(t,"e",function(){return m});n.d(t,"f",function(){return v});n.d(t,"g",function(){return g});n.d(t,"j",function(){return p});n.d(t,"k",function(){return h});n.d(t,"l",function(){return S});n.d(t,"m",function(){return T});n.d(t,"n",function(){return y});var r=n(1);var i=n.n(r);var a=n(9706);var o=Object(a["c"])("TS.log",console.log);var s=Object(a["c"])("TS.error",console.error);var l=Object(a["c"])("TS.warn",console.warn);var u=Object(a["c"])("TS.info",console.info);var c=Object(a["c"])("TS.utility.cmdKey",function(){return false});var f=Object(a["c"])("TS.utility.exampleEmailAddress");var d=Object(a["c"])("TS.utility.calls.getCallActive",function(){return Promise.resolve(false)});var _=Object(a["c"])("TS.utility.getImgProxyURL",function(e){return e});var m=Object(a["c"])("TS.utility.getImgProxyURLWithOptions",function(e){return e});var v=Object(a["c"])("TS.utility.getRefererPolicy",function(){return{}});var g=Object(a["c"])("TS.utility.calls.isScreenSharing",function(){return false});var p=Object(a["c"])("TS.utility.openInNewTab");var h=Object(a["c"])("TS.utility.shouldLinksHaveTargets",function(){return false});var S=Object(a["c"])("TS.utility.urlNeedsRefererHiding",function(){return true});var T=Object(a["c"])("TS.utility.uuidv4",i.a.uniqueId);var y=Object(a["c"])("TS.utility.email.validateEmail")},9732:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n.d(t,"c",function(){return a});n.d(t,"d",function(){return o});n.d(t,"h",function(){return l});n.d(t,"f",function(){return u});n.d(t,"e",function(){return c});n.d(t,"g",function(){return f});n.d(t,"b",function(){return d});var r=n(9706);var i=Object(r["c"])("TS.format.cleanMsg",function(e){return e});var a=Object(r["c"])("TS.format.extractIds",function(){return{c_ids:[],m_ids:[]}});var o=Object(r["c"])("TS.format.formatWithOptions",function(e){return e});var s=Object(r["c"])("TS.format.formatCurrentStatus",function(){return""});var l=Object(r["c"])("TS.format.unFormatMsg",function(e){return e});var u=Object(r["c"])("TS.format.shouldAllowIntraWordFormatting",function(){return false});var c=Object(r["c"])("TS.format.replaceHighlightMarkers",function(e){return e});var f=Object(r["c"])("TS.format.swapOutAts",function(e){return e});var d=Object(r["c"])("TS.format.texty.convertContentsStringToDisplayString",function(){return false})},9733:function(e,t,n){"use strict";t["a"]=k;n.d(t,"b",function(){return x});n.d(t,"c",function(){return E});n.d(t,"e",function(){return C});n.d(t,"d",function(){return O});var r=n(9709);var i=n(9720);var a=n(9827);var o=n(9719);var s=n(9828);var l=n(9769);var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();var c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=[];var m=3e4;var v=5e3;var g=2e3;var p=1e3;var h=function e(t){var n=Object(a["getEnvironment"])(t);var r="https://";var i="/clog/track/";switch(n.env){case a["DEVELOPMENT"]:case a["QA"]:return""+r+n.envSubdomain+".slack.com"+i;case a["STAGING"]:return""+r+n.env+".slack.com"+i;case a["PRODUCTION"]:default:return r+"slack.com"+i}};var S=function e(t,n,r,a,s,l,u){if("string"!==typeof t)return;var c=u||null;"string"===typeof c&&(c=Object(o["queryStringParse"])(u,","));var f={tstamp:Date.now(),event:t,args:c};r&&(f.user_id=r);a&&(f.team_id=a);s&&(f.enterprise_id=s);l&&(f.i18n_locale=l);n.push(f);Object(i["f"])(p)&&Object(i["c"])(p,"Event called:",t,u)};var T=function e(t,n,r){var a=function e(t){return n+"?logs="+encodeURIComponent(JSON.stringify(t))};var o=[];var s=[];for(var l=0,u=t.length;l<u;l++){var c=t[l];var f=a(s.concat(c));if(f.length<=r)s.push(c);else{o.push(a(s));s=[c]}}s.length>0&&o.push(a(s));Object(i["f"])(p)&&Object(i["c"])(p,"URLs:",o);return o};var y=function e(t,n){var i=t.getAttribute("data-clog-event");if(!i){Object(r["warn"])("Logging clicks with data-clog-click requires a data-clog-event attribute");return null}var a={};var s={};var l=Object(o["queryStringParse"])(t.getAttribute("data-clog-params"),",");var u=t.getAttribute("data-clog-ui-action");if(u){f(s,{ui_element:t.getAttribute("data-clog-ui-element"),action:t.getAttribute("data-clog-ui-action"),step:t.getAttribute("data-clog-ui-step"),ui_component:t.getAttribute("data-clog-ui-component")});a={contexts:{ui_context:s}}}switch(i.toUpperCase()){case"WEBSITE_CLICK":l.page_url=n;break;default:break}f(a,l);return a};var b=function e(t){var n=void 0;if(l["isDesktop"]&&"object"===("undefined"===typeof t?"undefined":c(t))){n=f({},t);n.contexts=n.contexts||{};n.contexts.desktop=n.contexts.desktop||Object(l["getDesktopContext"])()}return n||t};var w=function(){function e(){d(this,e);this.userId=null;this.teamId=null;this.enterpriseId=null;this.i18nLocale=null}u(e,[{key:"setUser",value:function e(t){this.userId=t||this.userId;return this}},{key:"setTeam",value:function e(t){this.teamId=t||this.teamId;return this}},{key:"setEnterprise",value:function e(t){this.enterpriseId=t||this.enterpriseId;return this}},{key:"setLocale",value:function e(t){this.i18nLocale=t||this.i18nLocale;return this}},{key:"start",value:function e(){setInterval(this.sendDataAndEmptyQueue,m+Math.floor(Math.random()*v));this.addEventListeners();this.sendDataAndEmptyQueue()}},{key:"addEventListeners",value:function e(){window.addEventListener("beforeunload",this.sendDataAndEmptyQueue);window.addEventListener("pagehide",this.sendDataAndEmptyQueue);var t=this;Object(s["a"])("body","click",'[data-clog-click="true"], [data-clog-ui-action="click"], [data-clog-event=WEBSITE_CLICK]',function e(){var n=this;var r=y(n,location.href);if(null!==r){var i=this.getAttribute("data-clog-event");t.track(i,r)}})}},{key:"track",value:function e(t,n){S(t,_,this.userId,this.teamId,this.enterpriseId,this.i18nLocale,b(n))}},{key:"trackClick",value:function e(t,n,i){var a=this;var o=document.querySelector(t);if(null===o){Object(r["warn"])("Could not find node with selector '"+t+"' - cannot track click for this element");return null}o.addEventListener("click",function(){S(n,_,a.userId,a.teamId,a.enterpriseId,a.i18nLocale,b(i))});return true}},{key:"trackForm",value:function e(t,n,i){var a=this;var o=document.querySelector(t);if(null===o){Object(r["warn"])("Could not find node with selector '"+t+"' - cannot track form submit for this element");return null}o.addEventListener("submit",function(){S(n,_,a.userId,a.teamId,a.enterpriseId,a.i18nLocale,b(i))});return true}},{key:"trackClickWithContext",value:function e(t){if(!t||!t.event)return;var n={};t.element&&f(n,{ui_context:{action:"click",ui_element:t.element}});t.contexts&&f(n,t.contexts);this.track(t.event,{contexts:n})}},{key:"sendDataAndEmptyQueue",value:function e(){if(0===_.length)return;if(Object(i["f"])(p)){Object(i["c"])(p,"Sending clog data, emptying queue");Object(i["c"])(p,"Logs: ",_)}var t=T(_,h(location.host),g);for(var n=0,r=t.length;n<r;n++){var a=new Image;a.src=t[n];Object(i["f"])(p)&&Object(i["c"])(p,"Logged event: "+t[n])}_=[]}},{key:"getLogs",value:function e(){return _}},{key:"flushLogs",value:function e(){_=[]}}]);return e}();w.instance=null;function k(){null===w.instance&&(w.instance=new w);return w.instance}var x=k().track.bind(w.instance);var E=k().trackClick.bind(w.instance);var C=k().trackForm.bind(w.instance);var O=k().trackClickWithContext.bind(w.instance)},9736:function(e,t,n){"use strict";n.d(t,"b",function(){return s});n.d(t,"c",function(){return l});n.d(t,"a",function(){return u});n.d(t,"d",function(){return c});n.d(t,"e",function(){return f});n.d(t,"f",function(){return d});n.d(t,"g",function(){return _});var r=n(1);var i=n.n(r);var a=n(9706);var o=Object(a["c"])("TS.console.getStackTrace",i.a.noop);var s=Object(a["c"])("TS.console.info",i.a.noop);var l=Object(a["c"])("TS.console.log",i.a.noop);var u=Object(a["c"])("TS.console.error",i.a.noop);var c=Object(a["c"])("TS.console.logError",i.a.noop);var f=Object(a["c"])("TS.console.logStackTrace",i.a.noop);var d=Object(a["c"])("TS.console.shouldLog",i.a.noop);var _=Object(a["c"])("TS.console.warn",i.a.noop)},9740:function(e,t,n){"use strict";t["a"]=s;var r=n(1);var i=n.n(r);var a=function(){function e(e,t){var n=[];var r=true;var i=false;var a=void 0;try{for(var o=e[Symbol.iterator](),s;!(r=(s=o.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){i=true;a=e}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var o=/\/services\/(B[0-9a-z]{1,14})$/i;function s(e){if(!Object(r["isString"])(e))return null;var t=e.match(o)||[null,null],n=a(t,2),i=n[1];return i}},9750:function(e,t,n){"use strict";var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return!!/(Slack)/g.test(t)};t["a"]=r},9769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"isDesktop",function(){return a});n.d(t,"getPreference",function(){return o});n.d(t,"showContextMenu",function(){return s});n.d(t,"bounceIndefinitely",function(){return l});n.d(t,"bounceOnce",function(){return u});n.d(t,"startDownload",function(){return c});n.d(t,"showDownload",function(){return f});n.d(t,"openDownload",function(){return d});n.d(t,"cancelDownload",function(){return _});n.d(t,"retryDownload",function(){return m});n.d(t,"removeDownload",function(){return v});n.d(t,"pauseDownload",function(){return g});n.d(t,"resumeDownload",function(){return p});n.d(t,"clearDownloads",function(){return h});n.d(t,"notify",function(){return S});n.d(t,"shouldAttachSoundToNotification",function(){return T});n.d(t,"getAppMetrics",function(){return y});n.d(t,"instanceUid",function(){return w});n.d(t,"sessionId",function(){return k});t["getDesktopContext"]=x;t["canAutoGetKeyboard"]=E;t["canRequestMetrics"]=C;var r=n(9827);var i=n(9706);var a=window&&window.desktop;var o=Object(i["c"])("desktop.app.getPreference");var s=Object(i["c"])("desktop.contextMenu");var l=function e(){return a&&window.desktop.dock.bounceIndefinitely()};var u=function e(){return a&&window.desktop.dock.bounceOnce()};var c=Object(i["c"])("desktop.downloads.startDownload");var f=Object(i["c"])("desktop.downloads.showDownload");var d=Object(i["c"])("desktop.downloads.openDownload");var _=Object(i["c"])("desktop.downloads.cancelDownload");var m=Object(i["c"])("desktop.downloads.retryDownload");var v=Object(i["c"])("desktop.downloads.removeDownload");var g=Object(i["c"])("desktop.downloads.pauseDownload");var p=Object(i["c"])("desktop.downloads.resumeDownload");var h=Object(i["c"])("desktop.downloads.clearDownloads");var S=Object(i["c"])("desktop.notice.notify");var T=Object(i["c"])("desktop.notice.shouldAttachSoundToNotification");var y=Object(i["c"])("desktop.stats.getAppMetrics");var b=a&&window.desktop.stats&&window.desktop.stats.Id?window.desktop.stats.Id:{instanceUid:null,sessionId:null};var w=b.instanceUid;var k=b.sessionId;function x(){if(!a)return{};var e=o("releaseChannel")||null;return{instanceUid:w,sessionId:k,releaseChannel:e}}function E(){var e=a&&window.desktop.app&&window.desktop.app.getLocaleInformation&&window.desktop.app.getLocaleInformation().currentKeyboardLayout;return!!e}function C(){if(Object(r["isSSBAndAtLeastVersion"])("3.2.1"))return true;return a&&window.desktop.reduxHelper&&window.desktop.reduxHelper.isSelectedTeam&&window.desktop.reduxHelper.isSelectedTeam()}},9827:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"DEVELOPMENT",function(){return s});n.d(t,"QA",function(){return l});n.d(t,"STAGING",function(){return u});n.d(t,"PRODUCTION",function(){return c});n.d(t,"isDev",function(){return d});n.d(t,"isQa",function(){return _});n.d(t,"isEU",function(){return m});n.d(t,"isJsPath",function(){return g});t["getEnvironment"]=p;t["isMac"]=h;t["isWindows"]=S;t["isSSBAndAtLeastVersion"]=T;t["isTouch"]=y;t["isServiceWorkerAvailable"]=b;t["isNavigatorStorageAvailable"]=w;var r=n(194);var i=n.n(r);var a=n(9719);var o=n(9847);var s="dev";var l="qa";var u="staging";var c="production";var f=p(window.location.hostname);var d=f.env===s;var _=f.env===l;var m=f.isEU;var v=Object(a["urlQueryStringParse"])(window.location.href);var g=!!v.js_path;function p(e){var t=e.toLowerCase().split(".");var n=t.slice(t.length-2).join(".");if(["slack.com","slack.eu"].indexOf(n)<0)return{subdomain:null,isEnterprise:false,isEU:false,envSubdomain:null,env:c};var r="eu"===t[t.length-1];t.pop();t.pop();var i=void 0;var a=void 0;var o=void 0;if(t.length>0){if(t[t.length-1].match(/^dev[0-9]*$/)){i=s;a=t[t.length-1];t.pop()}else if(t[t.length-1].match(/^qa[0-9]*$/)){i=l;a=t[t.length-1];t.pop()}else if("staging"===t[t.length-1]){i=u;a="staging";t.pop()}else if(t[t.length-1].match(/^staging[0-9]+$/)){i=c;t.pop()}if("enterprise"===t[t.length-1]){o=true;t.pop()}}if(t.length>1)throw new Error("Unable to parse host string");return{subdomain:t[0]||null,isEnterprise:!!o,isEU:r,envSubdomain:a||null,env:i||c}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a;return!!e.mac}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a;return!!e.windows}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator&&navigator.userAgent;var n=/(Slack)/g.test(t);if(!n)return false;if(!window.TSSSB||!window.TSSSB.env)return false;var r=e.split(".");var i={major:0,minor:0};var a={major:0,minor:0};r.length>2&&(i.minor=parseFloat(r.pop()));i.major=parseFloat(r.join("."));if(window.TSSSB.env.mac_ssb_version){a.major=window.TSSSB.env.mac_ssb_version;a.minor=window.TSSSB.env.mac_ssb_version_minor}else if(window.TSSSB.env.win_ssb_version){a.major=window.TSSSB.env.win_ssb_version;a.minor=window.TSSSB.env.win_ssb_version_minor}else if(window.TSSSB.env.lin_ssb_version){a.major=window.TSSSB.env.lin_ssb_version;a.minor=window.TSSSB.env.lin_ssb_version_minor}return Object(o["compareVersions"])(a,i)>=0}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return"ontouchstart"in e.documentElement}function b(){return"serviceWorker"in navigator&&window&&"undefined"!==typeof window.caches}function w(){return"storage"in navigator}},9828:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n.d(t,"b",function(){return a});var r=n(9709);var i=function e(t,n,i,a){var o=document.querySelector(t);if(!o){Object(r["warn"])("'on' could not find the target element - events will not be delegated");return}o.addEventListener(n,function(e){var n=e.target;while(n&&n!==t&&"function"===typeof n.matches){if(n.matches(i))return a.call(n,e);n=n.parentNode}return null})};var a=function e(t,n,r){var i=function e(i){t.removeEventListener(n,e,true);r.call(i.target,i)};t.addEventListener(n,i,true)}},9847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["compareVersions"]=r;function r(e,t){e.major||(e.major=0);e.minor||(e.minor=0);e.patch||(e.patch=0);t.major||(t.major=0);t.minor||(t.minor=0);t.patch||(t.patch=0);if(e.major===t.major){if(e.minor==t.minor){if(e.patch==t.patch)return 0;return e.patch>t.patch?1:-1}return e.minor>t.minor?1:-1}return e.major>t.major?1:-1}},9891:function(e,t){(function(){TS.registerModule("clipboard",{canWriteText:function e(){return TS.interop.clipboard.canWriteText()},writeText:function e(t){TS.interop.clipboard.writeText(t)},canWriteHTML:function e(){return TS.interop.clipboard.canWriteHTML()},writeHTML:function e(t){TS.interop.clipboard.writeHTML(t)},writeTextFromEvent:function e(t,n){TS.interop.clipboard.writeTextFromEvent(t,n)}})})()},9899:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"detectImplementation",function(){return g});n.d(t,"canWriteText",function(){return S});n.d(t,"writeText",function(){return T});n.d(t,"canWriteHTML",function(){return y});n.d(t,"writeHTML",function(){return b});n.d(t,"writeTextFromEvent",function(){return w});var r=n(194);var i=n.n(r);var a=n(9709);var o=n(9828);var s=n(9941);var l=n(11846);var u=n(9733);var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,n,r){n&&e(t.prototype,n);r&&e(t,r);return t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=void 0;var _=void 0;var m="clipboardTextarea";var v=function e(){d=false;i.a.chrome&&i.a.version>=42&&(d=true);i.a.firefox&&i.a.version>=41&&(d=true);i.a.msie&&i.a.version>=9&&(d=true);i.a.opera&&i.a.version>=29&&(d=true);Object(o["b"])(window,"click",function(){d=document.queryCommandSupported("copy")})};var g=function e(){var t=new h;var n=new p;if(t.canWriteText()){_=t;return t}v();_=n;return n};var p=function(){function e(){f(this,e);this.currentRanges=[];this.selection=null}c(e,[{key:"canWriteText",value:function e(){return d}},{key:"writeText",value:function e(t){if(!this.canWriteText()){Object(a["warn"])("Cannot write string to clipboard");return false}var n=document.createElement("textarea");n.id=m;n.appendChild(document.createTextNode(t));document.body.appendChild(n);var r=this.writeNode(n);document.body.removeChild(n);return r}},{key:"canWriteHTML",value:function e(){return d}},{key:"writeHTML",value:function e(t){if(!this.canWriteHTML()){Object(a["warn"])("Cannot write html to clipboard");return false}var n=document.createElement("p");n.innerHTML=t;var r=document.createElement("textarea");r.id=m;r.innerHTML=n.innerHTML;document.body.appendChild(r);var i=this.writeNode(r);document.body.removeChild(r);return i}},{key:"writeNode",value:function e(t){var n=false;if("input"!==t.type&&"textarea"!==t.type){Object(a["warn"])("Can only write input and textarea node's to clipboard");return false}try{this.saveSelection();var r=window.getSelection();r.removeAllRanges();t.select();document.execCommand("copy")}catch(e){n=true;Object(a["warn"])("Something bad happened when we tried to copy: "+e)}finally{this.restoreSelection()}return!n}},{key:"saveSelection",value:function e(){this.currentRanges=[];this.selection=window.getSelection();for(var t=0,n=this.selection.rangeCount;t<n;t++)this.currentRanges.push(this.selection.getRangeAt(t))}},{key:"restoreSelection",value:function e(){this.selection.removeAllRanges();for(var t=0,n=this.currentRanges.length;t<n;t++)this.selection.addRange(this.currentRanges[t])}}]);return e}();var h=function(){function e(){f(this,e)}c(e,[{key:"canWriteText",value:function e(){return window.TSSSB&&window.TSSSB.call("canClipboardWriteString")}},{key:"writeText",value:function e(t){if(!this.canWriteText()){Object(a["warn"])("Cannot write string to clipboard");return false}window.TSSSB.call("clipboardWriteString",t);return true}},{key:"canWriteHTML",value:function e(){return false}},{key:"writeHTML",value:function e(){Object(a["warn"])("We cannot write HTML in SSB");return false}}]);return e}();g();var S=function e(){return _.canWriteText()};var T=function e(t){return _.writeText(t)};var y=function e(){return _.canWriteHTML()};var b=function e(t){return _.writeHTML(t)};var w=function e(t,n){var r=Object.keys(n);if(0===r.length)return;var i=[];var o=null;try{var c=t.originalEvent||t;var f=c.clipboardData||window.clipboardData;r.forEach(function(e){try{f.setData(e,n[e]);var t=f.getData(e);n[e]===t&&i.push(e)}catch(t){Object(a["warn"])('TS.clipboard.writeTextFromEvent: error copying to "'+e+'" ('+t+")")}})}catch(e){o=e}o||0!==i.length||(o="failed to write to clipboard");if(o){Object(a["error"])("clipboard.writeTextFromEvent: "+o);return}t.preventDefault();"cut"===t.type&&Object(s["a"])()&&Object(l["a"])(document.activeElement);Object(u["b"])("CLIPBOARD_WRITE",{action:t.type,err:o,types:i.join(",")})}},9935:function(e,t,n){"use strict";n.d(t,"b",function(){return s});n.d(t,"e",function(){return u});n.d(t,"j",function(){return c});n.d(t,"g",function(){return f});n.d(t,"h",function(){return d});n.d(t,"f",function(){return _});n.d(t,"c",function(){return g});n.d(t,"i",function(){return p});n.d(t,"d",function(){return T});n.d(t,"a",function(){return w});var r=n(1);var i=n.n(r);var a=n(9706);var o=Object(a["c"])("TS.utility.contenteditable.clear",r["noop"]);var s=Object(a["c"])("TS.utility.contenteditable.create",r["noop"]);var l=Object(a["c"])("TS.utility.contenteditable.unload",r["noop"]);var u=Object(a["c"])("TS.utility.contenteditable.focus",r["noop"]);var c=Object(a["c"])("TS.utility.contenteditable.value",function(){return""});var f=Object(a["c"])("TS.utility.contenteditable.hasFocus",function(){return false});var d=Object(a["c"])("TS.utility.contenteditable.isTextSelected",function(){return false});var _=Object(a["c"])("TS.utility.contenteditable.getLength",function(){return 0});var m=Object(a["c"])("TS.utility.contenteditable.setCursorAtEnd",r["noop"]);var v=Object(a["c"])("TS.utility.contenteditable.isEmpty",false);var g=Object(a["c"])("TS.utility.contenteditable.cursorPosition",function(){return{start:0,end:0,length:0}});var p=Object(a["c"])("TS.utility.contenteditable.synchronouslyReplacePotentialMentions",r["noop"]);var h=Object(a["c"])("TS.utility.contenteditable.enable",r["noop"]);var S=Object(a["c"])("TS.utility.contenteditable.disable",r["noop"]);var T=Object(a["c"])("TS.utility.contenteditable.deleteSelection",r["noop"]);var y=Object(a["c"])("TS.utility.contenteditable.clearHistory",r["noop"]);var b=Object(a["c"])("TS.utility.contenteditable.placeholder",r["noop"]);var w=Object(a["c"])("TS.utility.contenteditable.clearUnverifiedMentionsCache",r["noop"])},9941:function(e,t,n){"use strict";var r=n(10066);n.d(t,"a",function(){return r["a"]})}},[11296]);